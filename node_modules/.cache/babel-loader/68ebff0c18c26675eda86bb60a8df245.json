{"ast":null,"code":"import _defineProperty from \"/Users/jermz/Desktop/eclipse-workspace/medicalWebsite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/jermz/Desktop/eclipse-workspace/medicalWebsite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/jermz/Desktop/eclipse-workspace/medicalWebsite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/jermz/Desktop/eclipse-workspace/medicalWebsite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/jermz/Desktop/eclipse-workspace/medicalWebsite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/jermz/Desktop/eclipse-workspace/medicalWebsite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/jermz/Desktop/eclipse-workspace/medicalWebsite/src/PlaybackMapMode.js\";\nimport React, { Component } from 'react';\nimport AppBar from '@material-ui/core/AppBar';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@material-ui/core/Typography';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport { withStyles } from '@material-ui/core/styles';\nimport { connect } from \"react-redux\";\nimport { addUsername as _addUsername, fetchEcgVitals as _fetchEcgVitals, fetchHeartrateVitals as _fetchHeartrateVitals } from \"./actions/index\";\nimport Card from '@material-ui/core/Card';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport TemporaryDrawer from './TemporaryDrawer';\nimport IconButton from '@material-ui/core/IconButton';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport AddIcon from '@material-ui/icons/Add';\nimport AccountCircle from '@material-ui/icons/AccountCircle';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Menu from '@material-ui/core/Menu';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport classNames from 'classnames';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport Radio from '@material-ui/core/Radio';\nimport RadioGroup from '@material-ui/core/RadioGroup';\nimport FormLabel from '@material-ui/core/FormLabel';\nimport BeaconTable from './BeaconTable';\nimport CameraIcon from '@material-ui/icons/PhotoCamera';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport Chip from '@material-ui/core/Chip';\nimport Paper from '@material-ui/core/Paper';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport HealthChart from \"./HealthChart\";\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport socketIOClient from \"socket.io-client\";\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport ToggleButton from '@material-ui/lab/ToggleButton';\nimport ToggleButtonGroup from '@material-ui/lab/ToggleButtonGroup';\nimport axios from 'axios';\nimport PlaybackChart from './PlaybackChart';\nimport PlaybackEcgChart from './PlaybackEcgChart';\nimport PlaybackRespirationChart from './PlaybackRespirationChart';\nimport PlaybackMap from './PlaybackMap';\nimport moment from 'moment';\n\nvar styles = function styles(theme) {\n  return {\n    container: {\n      display: 'flex',\n      flexWrap: 'wrap'\n    },\n    root: {\n      flexGrow: 1\n    },\n    grow: {\n      flexGrow: 1\n    },\n    card: {\n      minWidth: 275,\n      padding: '1.5rem',\n      flexGrow: '1'\n    },\n    textField: {// marginLeft: theme.spacing.unit,\n      // marginRight: theme.spacing.unit,\n    },\n    borderBox: {\n      border: '1px solid',\n      padding: '2rem',\n      borderRadius: '16px'\n    },\n    menu: {\n      width: 200\n    },\n    menuButton: {\n      marginLeft: -12,\n      marginRight: 20,\n      opacity: 0.4,\n      color: 'black'\n    },\n    align: {\n      padding: \"\".concat(theme.spacing.unit * 2, \"px \").concat(theme.spacing.unit * 3, \"px \").concat(theme.spacing.unit * 3, \"px\")\n    },\n    label: {\n      textTransform: 'capitalize'\n    },\n    cameraIcon: {\n      opacity: '0.5',\n      paddingLeft: '10px'\n    },\n    cardContent: {\n      paddingBottom: '16px'\n    },\n    demo: {\n      padding: '16px 32px 24px' // [theme.breakpoints.up(\"sm\")]: {\n      //   width: '560px'\n      // }\n\n    },\n    demoOne: {\n      padding: '16px 32px 5px' // [theme.breakpoints.up(\"sm\")]: {\n      //   width: '560px'\n      // }\n\n    },\n    toggleContainer: {\n      height: 56,\n      padding: \"\".concat(theme.spacing.unit, \"px \").concat(theme.spacing.unit * 2, \"px\"),\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'flex-start',\n      margin: \"\".concat(theme.spacing.unit, \"px 0\")\n    },\n    button: {\n      margin: theme.spacing.unit\n    }\n  };\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    beacon: state.beacon,\n    vitals: state.vitals,\n    info: state.info\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    addUsername: function addUsername(username) {\n      return dispatch(_addUsername(username));\n    },\n    fetchEcgVitals: function fetchEcgVitals(vitals) {\n      return dispatch(_fetchEcgVitals(vitals));\n    },\n    fetchHeartrateVitals: function fetchHeartrateVitals(vitals) {\n      return dispatch(_fetchHeartrateVitals(vitals));\n    }\n  };\n};\n\nvar id = 0;\n\nfunction createData(name, calories, fat, carbs, protein) {\n  id += 1;\n  return {\n    id: id,\n    name: name,\n    calories: calories,\n    fat: fat,\n    carbs: carbs,\n    protein: protein\n  };\n}\n\nvar PlaybackMapMode =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(PlaybackMapMode, _Component);\n\n  function PlaybackMapMode(props) {\n    var _this;\n\n    _classCallCheck(this, PlaybackMapMode);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(PlaybackMapMode).call(this, props));\n\n    _this.toggleDrawer = function () {\n      _this.setState({\n        drawer: true\n      });\n    };\n\n    _this.handleFormat = function (event, chartMode) {\n      if (chartMode != _this.state.chartMode && chartMode != null) _this.setState({\n        chartMode: chartMode\n      });\n    };\n\n    _this.toggleCloseDrawer = function () {\n      _this.setState({\n        drawer: false\n      });\n    };\n\n    _this.handleMenu = function (event) {\n      _this.setState({\n        drawer: false\n      });\n\n      _this.setState({\n        anchorEl: event.currentTarget\n      });\n    };\n\n    _this.handleClose = function () {\n      _this.setState({\n        anchorEl: null\n      });\n    };\n\n    _this.backToMap = function (e) {\n      e.preventDefault();\n\n      _this.props.history.push('/locationTracking');\n    };\n\n    _this.handleSubmit = function (e) {\n      e.preventDefault();\n\n      _this.props.history.push('/home');\n    };\n\n    _this.handleLoading = function () {\n      _this.setState(function (state) {\n        return {\n          loading: !state.loading\n        };\n      });\n    };\n\n    _this.handleChange = function (prop) {\n      return function (event) {\n        _this.setState(_defineProperty({}, prop, event.target.value));\n      };\n    };\n\n    _this.handleTabChange = function (event, value) {\n      _this.setState({\n        tab: value\n      });\n    };\n\n    _this.imageUpload = function (e) {\n      if (e.target.files[0]) {\n        var image = e.target.files[0];\n\n        _this.setState({\n          image: image\n        });\n\n        _this.setState({\n          imagePreview: URL.createObjectURL(e.target.files[0])\n        });\n\n        _this.setState({\n          imageName: image.name\n        });\n      }\n    };\n\n    _this.removeImage = function () {\n      _this.setState({\n        image: \"\"\n      });\n\n      _this.setState({\n        imagePreview: \"\"\n      });\n\n      _this.setState({\n        imageName: \"\"\n      });\n    };\n\n    _this.updateStart = function (e) {\n      _this.setState({\n        startTime: e.target.value\n      });\n    };\n\n    _this.updateEnd = function (e) {\n      _this.setState({\n        endTime: e.target.value\n      });\n    };\n\n    _this.cancel = function () {\n      _this.props.history.push('/home');\n    };\n\n    _this.submitQuery = function (index) {\n      var id = \"b1\";\n\n      if (_this.props.info != \"\" && _this.props.info[0] != \"None\") {\n        id = _this.props.info.beacon[0];\n      } else {\n        return;\n      }\n\n      var timeStart = _this.state.startTime;\n      var timeEnd = _this.state.endTime;\n      timeStart = timeStart + ':00';\n      timeEnd = timeEnd + ':00';\n      var query = {\n        \"size\": 10000,\n        \"sort\": [{\n          \"@timestamp\": {\n            \"order\": \"asc\"\n          }\n        }],\n        \"query\": {\n          \"bool\": {\n            \"must\": [{\n              \"type\": {\n                \"value\": \"position-update\"\n              }\n            }, {\n              \"match\": {\n                \"id\": id\n              }\n            }, {\n              \"range\": {\n                \"@timestamp\": {\n                  \"gte\": timeStart,\n                  \"lte\": timeEnd,\n                  \"time_zone\": \"+08:00\"\n                }\n              }\n            }]\n          }\n        }\n      };\n      axios.get(\"http://137.132.165.139:9200/zmq/_search?scroll=1m\", {\n        params: {\n          source: JSON.stringify(query),\n          source_content_type: 'application/json'\n        }\n      }).then(function (res) {\n        var fullTrace = res.data.hits.hits;\n        var map = {};\n        var fullShot = [];\n        var counter = 0;\n        fullShot = fullShot.concat(fullTrace);\n        var scroll_size = res.data.hits.total;\n        var scroll_id = res.data._scroll_id;\n        var scrollQuery = {\n          'scroll': '1m',\n          'scroll_id': scroll_id\n        };\n\n        _this.getAPI(scrollQuery, fullShot);\n      });\n    };\n\n    _this.getAPI = function (scrollQuery, fullShot) {\n      axios.get(\"http://137.132.165.139:9200/_search/scroll\", {\n        params: {\n          source: JSON.stringify(scrollQuery),\n          source_content_type: 'application/json'\n        }\n      }).then(function (res) {\n        var fullTrace = res.data.hits.hits;\n        fullShot = fullShot.concat(fullTrace);\n        var scroll_id = res.data._scroll_id;\n        var scrollQuery = {\n          'scroll': '1m',\n          'scroll_id': scroll_id\n        };\n        var scroll_size = res.data.hits.hits.length;\n\n        if (scroll_size > 0) {\n          _this.getAPI(scrollQuery, fullShot);\n        } else {\n          _this.setState({\n            zmq: fullShot\n          });\n        }\n      });\n    };\n\n    _this.submitForm = function () {\n      _this.submitQuery('zmq');\n    };\n\n    _this.renderPlaybackForm = function () {\n      var classes = _this.props.classes;\n      var currentTime = moment().format();\n      var timeSplit = currentTime.split('T');\n      var timeString = timeSplit[0] + 'T' + timeSplit[1].slice(0, 5);\n      var form = React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 379\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        className: classes.container,\n        noValidate: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 380\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        id: \"datetime-local\",\n        label: \"Start\",\n        variant: \"outlined\",\n        type: \"datetime-local\",\n        style: {\n          marginRight: '1em',\n          marginBottom: '1em'\n        },\n        defaultValue: _this.state.startTime,\n        className: classes.textField,\n        onChange: _this.updateStart,\n        InputLabelProps: {\n          shrink: true\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 381\n        },\n        __self: this\n      }), React.createElement(TextField, {\n        id: \"datetime-local\",\n        label: \"End\",\n        variant: \"outlined\",\n        type: \"datetime-local\",\n        defaultValue: _this.state.endTime,\n        className: classes.textField,\n        onChange: _this.updateEnd,\n        InputLabelProps: {\n          shrink: true\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 395\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 407\n        },\n        __self: this\n      }, React.createElement(Button, {\n        variant: \"outlined\",\n        color: \"primary\",\n        onClick: _this.submitForm,\n        className: classes.button,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 408\n        },\n        __self: this\n      }, \"Fetch\"))));\n      return form;\n    };\n\n    _this.state = {\n      submittedForm: false,\n      values: {},\n      anchorEl: null,\n      auth: true,\n      name: \"Santa Claus\",\n      owner: \"\",\n      image: \"\",\n      imagePreview: \"\",\n      imageName: \"\",\n      ward: \"\",\n      contactDistance: \"\",\n      tab: 0,\n      beacon: _this.props.beacon,\n      response: [],\n      chartMode: ['live'],\n      endpoint: \"https://330f4015.ngrok.io\",\n      startTime: '2019-04-15T10:30',\n      endTime: '2019-04-15T10:30',\n      ecg: [],\n      heartrate: [],\n      zmq: []\n    };\n    return _this;\n  }\n\n  _createClass(PlaybackMapMode, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.props.info != \"\") this.setState({\n        name: this.props.info.name\n      });\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      if (this.props.vitals !== prevProps.vitals) {\n        this.setState({\n          vitals: this.props.vitals\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var classes = this.props.classes;\n      var _this$state = this.state,\n          anchorEl = _this$state.anchorEl,\n          auth = _this$state.auth;\n      var open = Boolean(anchorEl);\n      return React.createElement(\"div\", {\n        className: classes.root,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 425\n        },\n        __self: this\n      }, this.renderPlaybackForm(), React.createElement(PlaybackMap, {\n        locationData: this.state.zmq,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 427\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return PlaybackMapMode;\n}(Component);\n\nvar ConnectedPlaybackMapMode = connect(mapStateToProps, mapDispatchToProps)(PlaybackMapMode);\nexport default withStyles(styles)(ConnectedPlaybackMapMode);","map":{"version":3,"sources":["/Users/jermz/Desktop/eclipse-workspace/medicalWebsite/src/PlaybackMapMode.js"],"names":["React","Component","AppBar","Button","TextField","Grid","Typography","Toolbar","withStyles","connect","addUsername","fetchEcgVitals","fetchHeartrateVitals","Card","CardMedia","CardContent","CardActions","CircularProgress","TemporaryDrawer","IconButton","MenuIcon","AddIcon","AccountCircle","MenuItem","Menu","FormControl","FormControlLabel","classNames","InputAdornment","Radio","RadioGroup","FormLabel","BeaconTable","CameraIcon","DeleteIcon","Chip","Paper","Table","TableBody","TableCell","TableHead","TableRow","Tabs","Tab","HealthChart","ExpansionPanel","ExpansionPanelSummary","ExpansionPanelDetails","ExpandMoreIcon","socketIOClient","ClickAwayListener","ToggleButton","ToggleButtonGroup","axios","PlaybackChart","PlaybackEcgChart","PlaybackRespirationChart","PlaybackMap","moment","styles","theme","container","display","flexWrap","root","flexGrow","grow","card","minWidth","padding","textField","borderBox","border","borderRadius","menu","width","menuButton","marginLeft","marginRight","opacity","color","align","spacing","unit","label","textTransform","cameraIcon","paddingLeft","cardContent","paddingBottom","demo","demoOne","toggleContainer","height","alignItems","justifyContent","margin","button","mapStateToProps","state","beacon","vitals","info","mapDispatchToProps","dispatch","username","id","createData","name","calories","fat","carbs","protein","PlaybackMapMode","props","toggleDrawer","setState","drawer","handleFormat","event","chartMode","toggleCloseDrawer","handleMenu","anchorEl","currentTarget","handleClose","backToMap","e","preventDefault","history","push","handleSubmit","handleLoading","loading","handleChange","prop","target","value","handleTabChange","tab","imageUpload","files","image","imagePreview","URL","createObjectURL","imageName","removeImage","updateStart","startTime","updateEnd","endTime","cancel","submitQuery","index","timeStart","timeEnd","query","get","params","source","JSON","stringify","source_content_type","then","res","fullTrace","data","hits","map","fullShot","counter","concat","scroll_size","total","scroll_id","_scroll_id","scrollQuery","getAPI","length","zmq","submitForm","renderPlaybackForm","classes","currentTime","format","timeSplit","split","timeString","slice","form","marginBottom","shrink","submittedForm","values","auth","owner","ward","contactDistance","response","endpoint","ecg","heartrate","prevProps","prevState","open","Boolean","ConnectedPlaybackMapMode"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport { connect } from \"react-redux\";\r\nimport { addUsername, fetchEcgVitals, fetchHeartrateVitals } from \"./actions/index\";\r\nimport Card from '@material-ui/core/Card';\r\nimport CardMedia from '@material-ui/core/CardMedia';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport TemporaryDrawer from './TemporaryDrawer';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport AccountCircle from '@material-ui/icons/AccountCircle';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport classNames from 'classnames';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport Radio from '@material-ui/core/Radio';\r\nimport RadioGroup from '@material-ui/core/RadioGroup';\r\nimport FormLabel from '@material-ui/core/FormLabel';\r\nimport BeaconTable from './BeaconTable';\r\nimport CameraIcon from '@material-ui/icons/PhotoCamera';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport Chip from '@material-ui/core/Chip';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\nimport HealthChart from \"./HealthChart\";\r\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\r\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\r\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport socketIOClient from \"socket.io-client\";\r\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\r\nimport ToggleButton from '@material-ui/lab/ToggleButton';\r\nimport ToggleButtonGroup from '@material-ui/lab/ToggleButtonGroup';\r\nimport axios from 'axios'\r\nimport PlaybackChart from './PlaybackChart'\r\nimport PlaybackEcgChart from './PlaybackEcgChart'\r\nimport PlaybackRespirationChart from './PlaybackRespirationChart'\r\nimport PlaybackMap from './PlaybackMap'\r\nimport moment from 'moment';\r\n\r\n\r\nconst styles = theme => ({\r\n  container: {\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n  },\r\n  root: {\r\n    flexGrow: 1,\r\n  },\r\n  grow: {\r\n    flexGrow: 1,\r\n  },\r\n  card: {\r\n    minWidth: 275,\r\n    padding: '1.5rem',\r\n    flexGrow: '1',\r\n  },\r\n  textField: {\r\n    // marginLeft: theme.spacing.unit,\r\n    // marginRight: theme.spacing.unit,\r\n  },\r\n  borderBox: {\r\n    border: '1px solid',\r\n    padding: '2rem',\r\n    borderRadius: '16px',\r\n  },\r\n  menu: {\r\n    width: 200,\r\n  },\r\n  menuButton: {\r\n    marginLeft: -12,\r\n    marginRight: 20,\r\n    opacity : 0.4,\r\n    color: 'black',\r\n  },\r\n  align: {\r\n    padding: `${theme.spacing.unit * 2}px ${theme.spacing.unit * 3}px ${theme.spacing.unit * 3}px`,\r\n  },\r\n  label: {\r\n    textTransform: 'capitalize',\r\n  },\r\n  cameraIcon: {\r\n    opacity: '0.5',\r\n    paddingLeft: '10px'\r\n  },\r\n  cardContent: {\r\n    paddingBottom: '16px'\r\n  },\r\n  demo: {\r\n    padding: '16px 32px 24px',\r\n    // [theme.breakpoints.up(\"sm\")]: {\r\n    //   width: '560px'\r\n    // }\r\n  },\r\n  demoOne: {\r\n    padding: '16px 32px 5px',\r\n    // [theme.breakpoints.up(\"sm\")]: {\r\n    //   width: '560px'\r\n    // }\r\n  },\r\n  toggleContainer: {\r\n    height: 56,\r\n    padding: `${theme.spacing.unit}px ${theme.spacing.unit * 2}px`,\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'flex-start',\r\n    margin: `${theme.spacing.unit}px 0`,\r\n  },\r\n  button: {\r\n    margin: theme.spacing.unit,\r\n  },\r\n\r\n});\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    beacon: state.beacon,\r\n    vitals: state.vitals,\r\n    info: state.info,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    addUsername: username => dispatch(addUsername(username)),\r\n    fetchEcgVitals: vitals => dispatch(fetchEcgVitals(vitals)),\r\n    fetchHeartrateVitals: vitals => dispatch(fetchHeartrateVitals(vitals)),\r\n  };\r\n};\r\n\r\nlet id = 0;\r\nfunction createData(name, calories, fat, carbs, protein) {\r\n  id += 1;\r\n  return { id, name, calories, fat, carbs, protein };\r\n}\r\n\r\n\r\n\r\nclass PlaybackMapMode extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      submittedForm: false,\r\n      values: {},\r\n      anchorEl: null,\r\n      auth: true,\r\n      name: \"Santa Claus\",\r\n      owner: \"\",\r\n      image: \"\",\r\n      imagePreview: \"\",\r\n      imageName: \"\",\r\n      ward: \"\",\r\n      contactDistance: \"\",\r\n      tab: 0,\r\n      beacon: this.props.beacon,\r\n      response: [],\r\n      chartMode: ['live'],\r\n      endpoint: \"https://330f4015.ngrok.io\",\r\n      startTime: '2019-04-15T10:30',\r\n      endTime: '2019-04-15T10:30',\r\n      ecg: [],\r\n      heartrate: [],\r\n      zmq: []\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    if(this.props.info != \"\")\r\n      this.setState({name: this.props.info.name})\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if(this.props.vitals !== prevProps.vitals ) {\r\n      this.setState({vitals: this.props.vitals})\r\n    }\r\n  }\r\n\r\n  toggleDrawer = () => {\r\n    this.setState({ drawer: true});\r\n  }\r\n\r\n  handleFormat = (event, chartMode) => {\r\n    if(chartMode != this.state.chartMode && chartMode != null)\r\n      this.setState({ chartMode });\r\n  }\r\n\r\n  toggleCloseDrawer = () => {\r\n    this.setState({ drawer: false });\r\n  }\r\n\r\n  handleMenu = event => {\r\n    this.setState({ drawer: false });\r\n    this.setState({ anchorEl: event.currentTarget });\r\n  };\r\n\r\n  handleClose = () => {\r\n    this.setState({ anchorEl: null });\r\n  };\r\n\r\n  backToMap = (e) => {\r\n    e.preventDefault();\r\n    this.props.history.push('/locationTracking');\r\n  }\r\n\r\n  handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    this.props.history.push('/home');\r\n\r\n  }\r\n\r\n  handleLoading = () => {\r\n    this.setState(state => ({\r\n      loading: !state.loading,\r\n    }))\r\n  }\r\n\r\n  handleChange = prop => event => {\r\n    this.setState({ [prop]: event.target.value });\r\n  };\r\n\r\n  handleTabChange = (event, value) => {\r\n   this.setState({ tab: value });\r\n };\r\n\r\n  imageUpload = (e) => {\r\n    if(e.target.files[0]) {\r\n      const image = e.target.files[0];\r\n      this.setState({image})\r\n      this.setState({imagePreview : URL.createObjectURL(e.target.files[0])})\r\n      this.setState({imageName : image.name})\r\n    }\r\n  }\r\n\r\n  removeImage = () => {\r\n    this.setState({image : \"\"});\r\n    this.setState({imagePreview : \"\"});\r\n    this.setState({imageName: \"\"});\r\n  }\r\n\r\n  updateStart = (e) => {\r\n    this.setState({startTime: e.target.value})\r\n  }\r\n\r\n  updateEnd = (e) => {\r\n    this.setState({endTime: e.target.value})\r\n  }\r\n\r\n  cancel = () => {\r\n    this.props.history.push('/home');\r\n  }\r\n\r\n  submitQuery = (index) => {\r\n    let id = \"b1\"\r\n    if(this.props.info != \"\" && this.props.info[0] != \"None\") {\r\n      id = this.props.info.beacon[0]\r\n    } else {\r\n      return\r\n    }\r\n\r\n    let timeStart = this.state.startTime\r\n    let timeEnd = this.state.endTime\r\n    timeStart = timeStart + ':00'\r\n    timeEnd = timeEnd + ':00'\r\n    const query = {\r\n      \"size\": 10000,\r\n      \"sort\" : [{ \"@timestamp\" : {\"order\" : \"asc\"}}],\r\n      \"query\": {\r\n        \"bool\": {\r\n          \"must\": [\r\n            {\r\n              \"type\" : {\r\n                \"value\": \"position-update\"\r\n              }\r\n            },\r\n            {\r\n              \"match\": {\r\n                \"id\": id\r\n              }\r\n            },\r\n            {\r\n              \"range\" : {\r\n                  \"@timestamp\" : {\r\n                    \"gte\": timeStart,\r\n                    \"lte\": timeEnd,\r\n                    \"time_zone\": \"+08:00\"\r\n                    }\r\n                }\r\n            }\r\n          ]\r\n        }\r\n        }\r\n\r\n    };\r\n\r\n    axios.get(`http://137.132.165.139:9200/zmq/_search?scroll=1m`, {\r\n      params: {\r\n        source: JSON.stringify(query),\r\n        source_content_type: 'application/json'\r\n      }\r\n    }).then((res) => {\r\n\r\n      let fullTrace = res.data.hits.hits\r\n      let map = {}\r\n      let fullShot = []\r\n      let counter = 0\r\n      fullShot = fullShot.concat(fullTrace)\r\n\r\n      let scroll_size = res.data.hits.total\r\n\r\n      let scroll_id = res.data._scroll_id\r\n\r\n      let scrollQuery = {\r\n          'scroll' : '1m',\r\n          'scroll_id': scroll_id\r\n        }\r\n\r\n        this.getAPI(scrollQuery, fullShot)\r\n    });\r\n  }\r\n\r\n  getAPI = (scrollQuery, fullShot) => {\r\n\r\n         axios.get(`http://137.132.165.139:9200/_search/scroll`, {\r\n          params: {\r\n            source: JSON.stringify(scrollQuery),\r\n            source_content_type: 'application/json'\r\n          }\r\n      }).then((res) => {\r\n\r\n        let fullTrace = res.data.hits.hits\r\n        fullShot = fullShot.concat(fullTrace)\r\n\r\n        let scroll_id = res.data._scroll_id\r\n        let scrollQuery = {\r\n          'scroll' : '1m',\r\n          'scroll_id': scroll_id\r\n        }\r\n        let scroll_size = res.data.hits.hits.length\r\n\r\n        if(scroll_size > 0) {\r\n          this.getAPI(scrollQuery, fullShot)\r\n        } else {\r\n          this.setState({zmq: fullShot})\r\n        }\r\n\r\n      })\r\n  }\r\n\r\n  submitForm = () => {\r\n    this.submitQuery('zmq');\r\n  }\r\n\r\n  renderPlaybackForm = () => {\r\n\r\n    const { classes } = this.props;\r\n    let currentTime = moment().format();\r\n\r\n    let timeSplit  = currentTime.split('T')\r\n    let timeString = timeSplit[0] + 'T' + timeSplit[1].slice(0, 5)\r\n\r\n    let form = <div>\r\n    <form className={classes.container} noValidate>\r\n      <TextField\r\n        id=\"datetime-local\"\r\n        label=\"Start\"\r\n        variant=\"outlined\"\r\n        type=\"datetime-local\"\r\n        style={{marginRight: '1em', marginBottom: '1em'}}\r\n        defaultValue={this.state.startTime}\r\n        className={classes.textField}\r\n        onChange={this.updateStart}\r\n        InputLabelProps={{\r\n          shrink: true,\r\n        }}\r\n      />\r\n\r\n      <TextField\r\n        id=\"datetime-local\"\r\n        label=\"End\"\r\n        variant=\"outlined\"\r\n        type=\"datetime-local\"\r\n        defaultValue={this.state.endTime}\r\n        className={classes.textField}\r\n        onChange={this.updateEnd}\r\n        InputLabelProps={{\r\n          shrink: true,\r\n        }}\r\n      />\r\n      <div>\r\n      <Button variant=\"outlined\" color=\"primary\" onClick={this.submitForm} className={classes.button}>\r\n        Fetch\r\n      </Button>\r\n      </div>\r\n    </form>\r\n\r\n    </div>\r\n\r\n    return form\r\n  }\r\n  render() {\r\n\r\n    const { classes } = this.props;\r\n    const { anchorEl, auth } = this.state;\r\n    const open = Boolean(anchorEl)\r\n\r\n    return (\r\n      <div className={classes.root}>\r\n        {this.renderPlaybackForm()}\r\n        <PlaybackMap locationData={this.state.zmq}/>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst ConnectedPlaybackMapMode = connect(mapStateToProps, mapDispatchToProps)(PlaybackMapMode);\r\n\r\nexport default withStyles(styles)(ConnectedPlaybackMapMode);\r\n"]},"metadata":{},"sourceType":"module"}