{"version":3,"sources":["logo.svg","TemporaryDrawer.js","firebase/index.js","actions/index.js","constants/action-types.js","Home.js","Login.js","Scanner.js","Result.js","AddDeviceForm.js","BeaconTable.js","DevicesTable.js","AddPatient.js","AddAsset.js","AddStaff.js","Map.js","CustomizedSnackbars.js","LocationTracking.js","ContactTracing.js","PotentialInfectedTable.js","ContactTraceMap.js","ContactTracingResults.js","HealthChart.js","PlaybackChart.js","PlaybackEcgChart.js","PlaybackRespirationChart.js","PlaybackMode.js","ECGChart.js","RespirationChart.js","InfoMap.js","PlaybackMap.js","PlaybackMapMode.js","PatientInfo.js","AssetStaffInfo.js","AddConfirmation.js","AddDevice.js","Routes.js","App.js","registerServiceWorker.js","reducers/index.js","store/index.js","index.js"],"names":["module","exports","__webpack_require__","p","TemporaryDrawer","state","top","left","bottom","right","handleDrawerClose","_this","setState","toggle","toggleDrawer","side","open","Object","defineProperty","nextProps","this","_this$props","props","classes","links","links2","sideList","react_default","a","createElement","className","list","List_default","map","text","index","ListItem_default","button","component","Link","to","key","ListItemIcon_default","Home_default","briefcaseIcon","PersonAdd_default","ListItemText_default","primary","addStaffIcon","Add_default","addIcon","mdIcon","Divider_default","LocationOn_default","People_default","fullList","ClickAwayListener_default","onClickAway","Drawer_default","onClose","tabIndex","role","onClick","onKeyDown","anchor","React","Component","withStyles","width","marginRight","marginLeft","fontSize","display","vitalFirebase","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","medicalPortalFirebase","auth","signInWithEmailAndPassword","storage","databaseRef","database","ref","ecgRef","child","heartrateRef","medicalPortalDatabaseRef","beaconCountRef","patientCountRef","assetCountRef","staffCountRef","fakeDataRef","addUsername","username","type","payload","assignBeacon","beacon","assignDevices","devices","confirmType","editPatient","patient","fetchMaps","maps","loadMap","fetchDevices","fetchDeviceLocations","addPatient","_ref","asyncToGenerator","regenerator_default","mark","_callee","dispatch","wrap","_context","prev","next","push","set","stop","_x","apply","arguments","removePatient","_ref2","_callee2","_context2","concat","id","remove","_x2","signOutUser","_ref13","_callee13","_context13","signOut","then","_x13","verifyAuth","_ref14","_callee14","_context14","onAuthStateChanged","user","authuser","currentUser","email","_x14","fetchSimulationCoordinates","_ref16","_callee16","checkTime","coordinateQuery","_context16","Date","setSeconds","getSeconds","toISOString","substr","size","sort","timestamp","order","query","bool","must","range","@timestamp","gte","lte","axios","get","params","source","JSON","stringify","source_content_type","res","data","hits","length","_source","_x16","fetchContactTrace","traceDetails","_ref17","_callee17","timeStart","timeEnd","distance","_context17","startTime","endTime","contactDistance","name","time_zone","fullTrace","fullShot","counter","forEach","item","_id","total","getAPI","scroll","scroll_id","_scroll_id","encodeURI","replace","contactURL","catch","error","_x17","scrollQuery","fetchEcgVitals","_ref26","_callee26","_context26","on","snapshot","val","_x26","fetchSpecificEcgVitals","uuid","_ref27","_callee27","_context27","_x27","fetchHeartrateVitals","_ref29","_callee29","_context29","_x29","fetchSpecificHeartrateVitals","_ref30","_callee30","_context30","_x30","Home","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","drawer","handleChange","event","target","checked","handleMenu","anchorEl","currentTarget","handleClose","handleLogOut","renderUsername","split","charAt","toUpperCase","slice","isAuthenticating","prevProps","authenticated","history","_this$state","Boolean","LinearProgress_default","root","AppBar_default","position","style","boxShadow","backgroundColor","AppBar","Toolbar_default","IconButton_default","menuButton","color","aria-label","Menu_default","Typography_default","variant","grow","aria-owns","aria-haspopup","AccountCircle_default","core_Menu_default","anchorOrigin","vertical","horizontal","transformOrigin","MenuItem_default","src_TemporaryDrawer","Grid_default","container","xs","title","spacing","alignItems","direction","justify","gutterBottom","Button_default","addButton","cardsFlex","Card_default","card","CardActionArea_default","CardMedia_default","alt","media","height","image","CardContent_default","ConnectedHome","connect","credentials","flexGrow","opacity","buttons","margin","marginTop","justifyContent","paddingLeft","maxWidth","lander","objectFit","paddingTop","paddingBottom","borderBottom","Login","renderAuthenticationError","autherror","handleSubmit","e","preventDefault","clearTimeout","timer","password","signInUser","handleLoading","loading","handleClickShowPassword","showPassword","prevState","_this2","background","overlay","toolbar","src","nuslogo","nuhlogo","minHeight","layout","Paper_default","paper","elevation","Avatar_default","avatar","LockOutlined_default","form","onSubmit","FormControl_default","required","fullWidth","TextField_default","label","placeholder","autoComplete","textField","onChange","value","classNames","InputProps","endAdornment","InputAdornment_default","VisibilityOff_default","Visibility_default","textAlign","ConnectedLogin","_ref15","_callee15","_context15","err","_x15","theme","flexWrap","unit","breakpoints","up","minWidth","padding","borderBox","border","borderRadius","menu","flexDirection","palette","secondary","main","backgroundImage","backgroundSize","backgroundPosition","maxHeight","paddingRight","Scanner","handleVideo","stream","videoError","console","log","_onDetected","result","Quagga","canvas","dom","onDetected","autoPlay","preload","muted","playsInLine","init","inputStream","constraints","facingMode","locator","patchSize","halfSample","numOfWorkers","decoder","readers","locate","start","offDetected","drawingBuffer","align","Result","codeResult","code","graphqlUrlHTTPS","AddDeviceForm","noConnection","fetchingDone","errorMessage","deleteDevice","verifyConnection","found","checkId","beaconCounter","deviceLogs","device","fetchAttempts","clearInterval","updateBeaconCount","handleClickOpen","createOptions","options","fetch","request","variables","method","url","headers","Content-Type","packageDevice","beaconId","measuredPower","gattId","gatt","gattProfile","profile","parse","requestPost","createDevice","input","_ref3","fetchingProcess","setInterval","prop","checkGimbal","window","cancel","_scan","scanning","results","indexOf","renderLoading","CircularProgress_default","edit","step","fetchNewBeacon","fetching","Dialog_default","aria-labelledby","DialogTitle_default","DialogContent_default","idPaper","CardActions_default","card_actions","paragraph","DialogActions_default","ConnectedAddDeviceForm","count","_ref18","_callee18","_context18","querySnapshot","errorObject","_x18","_ref19","_callee19","newCount","_context19","_x19","float","zIndex","pos","marginBottom","valueContainer","flex","overflow","noOptionsMessage","singleValue","withTheme","restUrlHTTPS","desc","b","orderBy","rows","numeric","disablePadding","EnhancedTableHead","createSortHandler","property","onRequestSort","onSelectAllClick","numSelected","rowCount","TableHead_default","TableRow_default","TableCell_default","row","sortDirection","Tooltip_default","placement","enterDelay","TableSortLabel_default","active","EnhancedTableToolbar","handleOpen","_this3","_this$props2","highlight","spacer","actions","lighten","light","dark","BeaconTable","selected","page","rowsPerPage","getDeviceLogs","_this4","filterLogs","filteredLogs","mobileDevices","checkBeacon","patients","assets","asset","staff","createData","serialno","handleRequestSort","handleSelectAllClick","n","handleClick","selectedIndex","newSelected","chosenBeacon","handleChangePage","handleChangeRowsPerPage","isSelected","_this5","forceUpdate","array","cmp","stabilizedThis","_this6","emptyRows","Math","min","src_AddDeviceForm","BeaconTable_EnhancedTableToolbar","tableWrapper","Table_default","table","BeaconTable_EnhancedTableHead","TableBody_default","getSorting","el","hover","aria-checked","Checkbox_default","scope","colSpan","TablePagination_default","rowsPerPageOptions","backIconButtonProps","nextIconButtonProps","onChangePage","onChangeRowsPerPage","ConnectedBeaconTable","overflowX","DevicesTable","getDevices","check","chosen","select","DevicesTable_EnhancedTableToolbar","DevicesTable_EnhancedTableHead","ConnectedDevicesTable","inputComponent","inputRef","objectWithoutProperties","assign","components","Control","borderColor","inputProps","objectSpread","selectProps","innerRef","children","innerProps","helperText","textFieldProps","SubMenu","square","MultiValue","Chip_default","chip","chipFocused","isFocused","onDelete","removeProps","deleteIcon","Cancel_default","NoOptionsMessage","Option","buttonRef","fontWeight","Placeholder","SingleValue","ValueContainer","AddPatient","flushData","age","race","gender","ward","crossReferenceData","_i","_Object$keys","keys","toggleCloseDrawer","errorCheck","nameError","wardError","imuCount","ecgCount","hrCount","confirm","updatePatient","editSuccess","updatePatientCount","patientCounter","fetchPatientCount","selectStyles","base","cursor","& input","font","src_Result","src_Scanner","autoFocus","formControl","FormLabel_default","RadioGroup_default","group","FormControlLabel_default","control","Radio_default","SelectProps","MenuProps","NoSsr_default","react_select_esm","styles","isClearable","src_BeaconTable","src_DevicesTable","ConnectedAddPatient","_ref20","_callee20","_context20","_x20","_ref21","_callee21","_context21","_x21","_callee3","_context3","_x3","AddAsset","owner","imageName","updateAsset","updateAssetCount","assetCounter","addAsset","removeAsset","imageUpload","files","imagePreview","URL","createObjectURL","removeImage","fetchAssetCount","htmlFor","raised","PhotoCamera_default","cameraIcon","cardContent","Delete_default","accept","ConnectedAddAsset","_ref5","_callee5","_context5","_x5","_ref6","_callee6","_context6","_x6","_ref24","_callee24","_context24","_x24","_ref23","_callee23","_context23","_x23","_ref7","_callee7","_context7","_x7","textTransform","AddStaff","updateStaff","updateStaffCount","staffCounter","addStaff","removeStaff","fetchStaffCount","ConnectedAddStaff","_ref9","_callee9","_context9","_x9","_ref10","_callee10","_context10","_x10","_ref25","_callee25","_context25","_x25","_ref22","_callee22","_context22","_x22","_ref11","_callee11","_context11","_x11","ReactMap","ReactMapboxGl","accessToken","maxZoom","minZoom","Map","createBeaconMarkers","filter","staffDevices","assetDevices","newObj","staffmem","initializeMap","jump","coordinates","simulation","sourceOptions","undefined","imageURL","center","mapboxgl","LngLatBounds","__guard__","x","x1","getCenter","staticDevices","location","values","contact","lib_esm","latitude","longitude","properties","onStyleLoad","mapgl","onLoad","getCirclePaint","circle-radius","circleRadius","circle-color","circle-opacity","_resize","viewport","innerWidth","_updateViewport","transform","renderHighlightDevices","beacons","_loop","i","lng","lat","_loop2","_loop3","renderStaffDevices","renderAssetDevices","renderDevices","renderPopup","popupInfo","esm","tipSize","closeOnClick","fullName","incidentNumber","disaster","class","icon","imgUrl","zoom","bearing","pitch","addEventListener","removeEventListener","locationOrigin","origin","version","sources","sprite","glyphs","layers","movingMethod","mapLocation","containerStyle","icon-image","icon-allow-overlap","icon-ignore-placement","text-allow-overlap","text-ignore-placement","text-field","text-font","text-offset","text-anchor","paint","tileJsonSource","before","sourceId","ConnectedMap","coord","variantIcon","success","CheckCircleIcon","warning","WarningIcon","ErrorIcon","info","InfoIcon","MySnackbarContentWrapper","green","amber","iconVariant","message","other","Icon","SnackbarContent_default","aria-describedby","action","close","Close_default","CustomizedSnackbars","reason","onOffWarning","Snackbar_default","calories","object","carbs","protein","Transition","Slide_default","LocationTracking","tweenTransientDevices","transitionDevices","newDevices","transientDevices","createDataRows","includes","staffmember","fat","load","search","infoButton","newPatient","loadInfo","staffInfoButton","newStaff","assetInfoButton","newAsset","handleMenuChange","handleToggle","openLocation","handlePatientsToggle","openPatients","handleAssetsToggle","openAssets","handleStaffToggle","openStaff","handleMenuClose","original","toHighlight","highlightPatient","highlightAsset","highlightStaff","offWarning","onClickLocation","createLocationItems","locationItems","anchorLocationEl","filteredStaff","filteredAssets","_this$state2","noPatients","noStaff","noAssets","src_CustomizedSnackbars","src_Map","BottomNavigation_default","showLabels","BottomNavigationAction_default","MyLocation_default","TransitionComponent","MenuList_default","PersonPin_default","infoDialog","InputBase_default","highlightButton","currentlyAt","ConnectedLocationTracking","ecg","heartrate","vitals","_paper","_infoDialog","shadows","between","down","ContactTracing","unixStart","unixEnd","distError","updateStart","updateEnd","contactTraceError","contactTrace","disabled","defaultValue","InputLabelProps","shrink","progress","ConnectedContactTracing","process","PotentialInfectedTable","updateTime","potential","PotentialInfectedTable_EnhancedTableToolbar","PotentialInfectedTable_EnhancedTableHead","ConnectedPotentialInfectedTable","ContactTraceMap","startPlayback","max","playback","stopTimer","createFake","updateSlider","lengthSlider","getInfectedCircle","circle-stroke-width","circle-stroke-color","renderInfectedCircle","contacts","infected","primaryContacts","filterTrace","formatUnix","unix","date","year","getFullYear","month","getMonth","day","getDate","hours","getHours","minutes","getMinutes","seconds","ContactTraceMap_ReactMap","icon-size","demo","Slider_default","ConnectedContactTraceMap","_demo","ContactTracingResults","findPotential","secondary_contacts","formatDate","startDate","endDate","unixDate","src_ContactTraceMap","src_PotentialInfectedTable","ConnectedContactTracingResults","HealthChart","lineChartData","datasets","showLine","pointBackgroundColor","pointBorderColor","borderWidth","lineTension","pointRadius","lineChartOptions","events","responsive","maintainAspectRatio","legend","elements","tooltips","enabled","plugins","streaming","frameRate","scales","xAxes","realtime","duration","delay","pause","ticks","autoSkip","maxTicksLimit","oldBtcDataSet","epoch","newBtcDataSet","vitalSign","y","newChartData","react_chartjs_2_es","chart-container","PlaybackChart","chartData","columns","points","timerange","tracker","trackerValue","trackerEvent","pan","mode","handleTimeRangeChange","handleTrackerChanged","t","TimeSeries","atTime","eventTime","begin","getTime","end","eventValue","v","renderMarker","entry","axis","column","markerLabel","markerLabelAlign","markerLabelStyle","fill","markerRadius","markerStyle","chartpoints","dataset","labels","newDataSet","vital","num","toLocaleString","point","timeseries","enablePanZoom","onTrackerChanged","onTimeRangeChanged","timeRange","series","normal","stroke","strokeWidth","highlighted","PlaybackEcgChart","checkLog","ecgHrPoint","moment","minus","PlaybackRespirationChart","resPoint","PlaybackMode","handleFormat","chartMode","backToMap","handleTabChange","tab","submitQuery","submitForm","renderPlaybackForm","timeSplit","format","noValidate","submittedForm","response","endpoint","ExpansionPanel_default","ExpansionPanelSummary_default","expandIcon","ExpandMore_default","ExpansionPanelDetails_default","src_PlaybackChart","src_PlaybackEcgChart","src_PlaybackRespirationChart","ConnectedPlaybackMode","demoOne","toggleContainer","RespirationChart","InfoMap","refs","getChildContext","initialize","initial","loadingStep","displayMap","InfoMap_ReactMap","ConnectedInfoMap","locationData","time","PlaybackMap_ReactMap","PlaybackMapMode","match","zmq","PlaybackMap","ConnectedPlaybackMapMode","PatientInfo","handleMapFormat","mapMode","playbackRes","removeListenerSpecificEcgVitals","removeListenerSpecificHeartrateVitals","Tabs_default","indicatorColor","textColor","Tab_default","ToggleButtonGroup_default","exclusive","ToggleButton_default","src_PlaybackMode","src_HealthChart","ECGChart","src_RespirationChart","src_InfoMap","src_PlaybackMapMode","ConnectedPatientInfo","_ref31","_callee31","_context31","off","_x31","_ref28","_callee28","_context28","_x28","AssetStaffInfo","ConnectedAssetStaffInfo","AddConfirmation","handleAddAnother","handleToMap","renderInformation","listitems","ConnectedAddConfirmation","AddDevice","lg","ConnectedAddDevice","Routes","Switch","Route","path","exact","App","isLocalhost","hostname","registerValidSW","swUrl","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","_ref4","_ref8","_ref12","initialState","rootReducer","toConsumableArray","aggregations","buckets","latest","update","$set","store","createStore","applyMiddleware","reduxThunk","Actions","_callee4","_context4","_x4","_callee8","_context8","_x8","_callee12","_context12","_x12","ReactDOM","render","es","BrowserRouter","src_App_0","document","getElementById","status","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker"],"mappings":"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","file":"static/js/main.3aa3d592.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.5d5d9eef.svg\";","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport Button from '@material-ui/core/Button';\r\nimport List from '@material-ui/core/List';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport HomeIcon from '@material-ui/icons/Home';\r\nimport PersonAddIcon from '@material-ui/icons/PersonAdd';\r\nimport LocationOnIcon from '@material-ui/icons/LocationOn';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport PeopleIcon from '@material-ui/icons/People';\r\nimport { Link } from 'react-router-dom';\r\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\r\n\r\nconst styles = {\r\n  list: {\r\n    width: 250,\r\n  },\r\n  fullList: {\r\n    width: 'auto',\r\n  },\r\n  addStaffIcon: {\r\n    marginRight: '14px'\r\n  },\r\n  addIcon: {\r\n    width: '.6em'\r\n  },\r\n  mdIcon: {\r\n    marginLeft: '-.2em',\r\n    fontSize: '1.3em',\r\n    display: 'inline',\r\n  },\r\n  briefcaseIcon: {\r\n    fontSize: '1.2em',\r\n    marginLeft: '.2em',\r\n  }\r\n};\r\n\r\nclass TemporaryDrawer extends React.Component {\r\n  state = {\r\n    top: false,\r\n    left: false,\r\n    bottom: false,\r\n    right: false,\r\n  };\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    if(nextProps.toggle !== this.state.toggle) {\r\n      this.setState({left: nextProps.toggle})\r\n    }\r\n  }\r\n\r\n  handleDrawerClose = () => {\r\n      this.setState({left: false})\r\n      this.setState({ toggle: false });\r\n  }\r\n\r\n  toggleDrawer = (side, open) => () => {\r\n    this.setState({\r\n      [side]: open,\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const { classes, toggle } = this.props;\r\n    const links = ['/home', '/addPatient', '/addAsset']\r\n    const links2 = ['/locationTracking', '/contactTracing']\r\n    const sideList = (\r\n      <div className={classes.list}>\r\n        <List>\r\n          {['Home', 'Add Patient', 'Add Asset'].map((text, index) => (\r\n            <ListItem button component={Link} to={links[index]} key={text}>\r\n              <ListItemIcon>{index === 0 ? <HomeIcon /> : index % 2 === 0 ?  <div className={classes.briefcaseIcon}><i className=\"fas fa-briefcase-medical\" /></div> : <PersonAddIcon />}</ListItemIcon>\r\n              <ListItemText primary={text} />\r\n            </ListItem>\r\n          ))}\r\n          <ListItem button component={Link} to='/addStaff' key={'Add Staff'}>\r\n            <ListItemIcon className={classes.addStaffIcon}><div><AddIcon className={classes.addIcon}/><div className={classes.mdIcon}><i className=\"fas fa-user-md fa-sm\"/></div></div></ListItemIcon>\r\n            <ListItemText primary={'Add Staff'}/>\r\n          </ListItem>\r\n        </List>\r\n        <Divider />\r\n        <List>\r\n          {['Location Tracking', 'Contact Tracing'].map((text, index) => (\r\n            <ListItem button component={Link} to={links2[index]} key={text}>\r\n              <ListItemIcon>{index % 2 === 0 ? <LocationOnIcon /> : <PeopleIcon />}</ListItemIcon>\r\n              <ListItemText primary={text} />\r\n            </ListItem>\r\n          ))}\r\n        </List>\r\n      </div>\r\n    );\r\n\r\n    const fullList = (\r\n      <div className={classes.fullList}>\r\n        <List>\r\n          {['Home', 'Add Patient', 'Add Asset', 'Add Staff'].map((text, index) => (\r\n            <ListItem button key={text}>\r\n              <ListItemIcon>{index % 2 === 0 ? <HomeIcon /> : <PersonAddIcon />}</ListItemIcon>\r\n              <ListItemText primary={text} />\r\n            </ListItem>\r\n          ))}\r\n        </List>\r\n        <Divider />\r\n        <List>\r\n          {['Location Tracking', 'Contact Tracing'].map((text, index) => (\r\n            <ListItem button key={text}>\r\n              <ListItemIcon>{index % 2 === 0 ? <LocationOnIcon /> : <div><AddIcon /><i className=\"fas fa-user-md fa-sm\" /></div>}</ListItemIcon>\r\n              <ListItemText primary={text} />\r\n            </ListItem>\r\n          ))}\r\n        </List>\r\n      </div>\r\n    );\r\n\r\n    return (\r\n      <div>\r\n      <ClickAwayListener onClickAway={this.handleDrawerClose}>\r\n      <div>\r\n        <Drawer open={this.state.left} onClose={this.toggleDrawer('left', false)}>\r\n          <div\r\n            tabIndex={0}\r\n            role=\"button\"\r\n            onClick={this.toggleDrawer('left', false)}\r\n            onKeyDown={this.toggleDrawer('left', false)}\r\n          >\r\n            {sideList}\r\n          </div>\r\n        </Drawer>\r\n        <Drawer anchor=\"top\" open={this.state.top} onClose={this.toggleDrawer('top', false)}>\r\n          <div\r\n            tabIndex={0}\r\n            role=\"button\"\r\n            onClick={this.toggleDrawer('top', false)}\r\n            onKeyDown={this.toggleDrawer('top', false)}\r\n          >\r\n            {fullList}\r\n          </div>\r\n        </Drawer>\r\n        <Drawer\r\n          anchor=\"bottom\"\r\n          open={this.state.bottom}\r\n          onClose={this.toggleDrawer('bottom', false)}\r\n        >\r\n          <div\r\n            tabIndex={0}\r\n            role=\"button\"\r\n            onClick={this.toggleDrawer('bottom', false)}\r\n            onKeyDown={this.toggleDrawer('bottom', false)}\r\n          >\r\n            {fullList}\r\n          </div>\r\n        </Drawer>\r\n        <Drawer anchor=\"right\" open={this.state.right} onClose={this.toggleDrawer('right', false)}>\r\n          <div\r\n            tabIndex={0}\r\n            role=\"button\"\r\n            onClick={this.toggleDrawer('right', false)}\r\n            onKeyDown={this.toggleDrawer('right', false)}\r\n          >\r\n            {sideList}\r\n          </div>\r\n        </Drawer>\r\n        </div>\r\n      </ClickAwayListener>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nTemporaryDrawer.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default withStyles(styles)(TemporaryDrawer);\r\n","import firebase from \"firebase/app\";\r\nimport 'firebase/storage';\r\nimport 'firebase/database';\r\nimport \"firebase/auth\";\r\n\r\n\r\n  // Initialize Firebase\r\n  // var config = {\r\n  //   apiKey: \"AIzaSyA8sQqEl1bnktzW0hgfnzYx0fmIJ310Ddc\",\r\n  //   authDomain: \"image-uploader-728a1.firebaseapp.com\",\r\n  //   databaseURL: \"https://image-uploader-728a1.firebaseio.com\",\r\n  //   projectId: \"image-uploader-728a1\",\r\n  //   storageBucket: \"image-uploader-728a1.appspot.com\",\r\n  //   messagingSenderId: \"944408595269\"\r\n  // };\r\n  // firebase.initializeApp(config);\r\n\r\n  let vitalsConfig = {\r\n    apiKey: \"AIzaSyC0TRzBu4_nZx7aHsXysIE9fxD-9Dh-JQo\",\r\n    authDomain: \"vital-simulator.firebaseapp.com\",\r\n    databaseURL: \"https://vital-simulator.firebaseio.com\",\r\n    projectId: \"vital-simulator\",\r\n    storageBucket: \"vital-simulator.appspot.com\",\r\n    messagingSenderId: \"657874416327\"\r\n  };\r\n\r\n  let medicalPortalConfig = {\r\n    apiKey: \"AIzaSyBhkxSRwaNi0JxGMiH_1eXITpz602Hvqp8\",\r\n    authDomain: \"medicalportal-62857.firebaseapp.com\",\r\n    databaseURL: \"https://medicalportal-62857.firebaseio.com\",\r\n    projectId: \"medicalportal-62857\",\r\n    storageBucket: \"\",\r\n    messagingSenderId: \"210169025710\"\r\n  }\r\n\r\n  let vitalFirebase = firebase.initializeApp(vitalsConfig);\r\n  let medicalPortalFirebase = firebase.initializeApp(medicalPortalConfig, \"medicalPortal\")\r\n\r\n\r\nvitalFirebase.auth().signInWithEmailAndPassword(\"admin@admin.com\", \"password\");\r\nconst storage = vitalFirebase.storage();\r\nconst databaseRef = vitalFirebase.database().ref();\r\nconst ecgRef = databaseRef.child(\"ecg\");\r\nconst heartrateRef = databaseRef.child(\"heartrate\");\r\nconst medicalPortalDatabaseRef = medicalPortalFirebase.database().ref();\r\n\r\nconst beaconCountRef = medicalPortalDatabaseRef.child(\"beaconCounter\")\r\nconst patientCountRef = medicalPortalDatabaseRef.child(\"patientCounter\")\r\nconst assetCountRef = medicalPortalDatabaseRef.child(\"assetCounter\")\r\nconst staffCountRef = medicalPortalDatabaseRef.child(\"staffCounter\")\r\nconst fakeDataRef = medicalPortalDatabaseRef.child(\"fakeData\")\r\n\r\n\r\n\r\nexport {\r\n  beaconCountRef, patientCountRef, assetCountRef, staffCountRef, fakeDataRef, storage, ecgRef, medicalPortalFirebase, heartrateRef, vitalFirebase as default\r\n}\r\n","import {\r\n  READ_PATIENTS,\r\n  READ_ASSETS,\r\n  READ_STAFF,\r\n  AUTH_USER,\r\n  AUTH_ERROR,\r\n  SIGN_OUT_USER,\r\n  ADD_USERNAME,\r\n  ASSIGN_BEACON,\r\n  ASSIGN_DEVICES,\r\n  CONFIRM_TYPE,\r\n  ADD_PATIENT,\r\n  EDIT_PATIENT,\r\n  REMOVE_PATIENT,\r\n  REMOVE_STAFF,\r\n  REMOVE_ASSET,\r\n  HIGHLIGHT_ASSET,\r\n  HIGHLIGHT_STAFF,\r\n  HIGHLIGHT_PATIENT,\r\n  ADD_STAFF,\r\n  ADD_ASSET,\r\n  FETCH_MAPS,\r\n  LOAD_MAP,\r\n  LOAD_INFO,\r\n  FETCH_DEVICES,\r\n  FETCH_DEVICE_LOCATIONS,\r\n  FETCH_SIMULATION_COORDINATES,\r\n  FETCH_NEW_BEACON,\r\n  FETCH_ECG_VITALS,\r\n  FETCH_HEARTRATE_VITALS,\r\n  FETCH_CONTACT_TRACE,\r\n  FETCHING_PROCESS,\r\n  FETCHING_DONE,\r\n  UPDATE_TRACE_DETAILS,\r\n  FETCH_FILTER_TRACE,\r\n  FETCH_PATIENT_COUNT,\r\n  FETCH_ASSET_COUNT,\r\n  FETCH_STAFF_COUNT,\r\n  UPDATE_PATIENT,\r\n  UPDATE_ASSET,\r\n  UPDATE_STAFF,\r\n } from \"../constants/action-types\";\r\n\r\n import { ecgRef, heartrateRef, beaconCountRef, patientCountRef, staffCountRef, assetCountRef, medicalPortalFirebase } from \"../firebase/index\"\r\n import axios from 'axios'\r\n\r\nexport const addUsername = username => ({ type: ADD_USERNAME,\r\n                                        payload: username });\r\n\r\nexport const assignBeacon = beacon => ({ type: ASSIGN_BEACON,\r\n                                          payload: beacon });\r\nexport const assignDevices = devices => ({ type: ASSIGN_DEVICES,\r\n                                          payload: devices });\r\n\r\nexport const confirmType = type => ({ type: CONFIRM_TYPE,\r\n                                          payload: type });\r\n\r\n\r\n\r\nexport const editPatient = patient => ({ type: EDIT_PATIENT,\r\n                                          payload: patient });\r\n\r\n\r\nexport const highlightPatient = patients => ({ type: HIGHLIGHT_PATIENT,\r\n                                          payload: patients });\r\n\r\n\r\nexport const highlightAsset = asset => ({ type: HIGHLIGHT_ASSET,\r\n                                            payload: asset });\r\n\r\nexport const highlightStaff = staff => ({ type: HIGHLIGHT_STAFF,\r\n                                            payload: staff });\r\nexport const fetchMaps = maps => ({ type: FETCH_MAPS,\r\n                                          payload: maps });\r\n\r\nexport const loadMap = map => ({ type: LOAD_MAP,\r\n                                          payload: map });\r\n\r\nexport const loadInfo = object => ({ type: LOAD_INFO,\r\n                                          payload: object });\r\n\r\nexport const fetchDevices = devices => ({ type: FETCH_DEVICES,\r\n                                          payload: devices });\r\n\r\nexport const fetchDeviceLocations = devices => ({ type: FETCH_DEVICE_LOCATIONS,\r\n                                          payload: devices });\r\n\r\nexport const fetchingProcess = () => ({ type: FETCHING_PROCESS\r\n                                               });\r\n\r\nexport const fetchingDone = () => ({ type: FETCHING_DONE\r\n                                               });\r\nexport const addPatient = (patient) => async dispatch => {\r\n\r\n  medicalPortalFirebase.database().ref().child('patients').push().set(patient)\r\n}\r\n\r\nexport const removePatient = (patient) => async dispatch => {\r\n  medicalPortalFirebase.database().ref().child(`patients/${patient.id}`).remove()\r\n}\r\n\r\n\r\nexport const updatePatient = (patient) => async dispatch => {\r\n  medicalPortalFirebase.database().ref().child(`patients/${patient.id}`).set(patient)\r\n}\r\n\r\nexport const readPatients = () => async dispatch => {\r\n  medicalPortalFirebase.database().ref().child('patients')\r\n  .on('value', querySnapshot => {\r\n\r\n      let patients = []\r\n      let snapshot = querySnapshot.val()\r\n      for(var id in snapshot) {\r\n        let item = snapshot[id]\r\n        item.id = id\r\n        patients.push(item)\r\n      }\r\n\r\n      dispatch({\r\n        type: READ_PATIENTS,\r\n        payload: patients\r\n      })\r\n\r\n  })\r\n}\r\n\r\nexport const addAsset = (asset) => async dispatch => {\r\n\r\n  medicalPortalFirebase.database().ref().child('assets').push().set(asset)\r\n}\r\n\r\nexport const removeAsset = (asset) => async dispatch => {\r\n  medicalPortalFirebase.database().ref().child(`assets/${asset.id}`).remove()\r\n}\r\n\r\n\r\nexport const updateAsset = (asset) => async dispatch => {\r\n  medicalPortalFirebase.database().ref().child(`assets/${asset.id}`).set(asset)\r\n}\r\n\r\nexport const readAssets = () => async dispatch => {\r\n  medicalPortalFirebase.database().ref().child('assets')\r\n  .on('value', querySnapshot => {\r\n\r\n      let assets = []\r\n      let snapshot = querySnapshot.val()\r\n      for(var id in snapshot) {\r\n        let item = snapshot[id]\r\n        item.id = id\r\n        assets.push(item)\r\n      }\r\n\r\n      dispatch({\r\n        type: READ_ASSETS,\r\n        payload: assets\r\n      })\r\n\r\n  })\r\n}\r\n\r\nexport const addStaff = (staff) => async dispatch => {\r\n\r\n  medicalPortalFirebase.database().ref().child('staff').push().set(staff)\r\n}\r\n\r\nexport const removeStaff = (staff) => async dispatch => {\r\n  medicalPortalFirebase.database().ref().child(`staff/${staff.id}`).remove()\r\n}\r\n\r\n\r\nexport const updateStaff = (staff) => async dispatch => {\r\n  medicalPortalFirebase.database().ref().child(`staff/${staff.id}`).set(staff)\r\n}\r\n\r\nexport const readStaff = () => async dispatch => {\r\n  medicalPortalFirebase.database().ref().child('staff')\r\n  .on('value', querySnapshot => {\r\n\r\n      let staff = []\r\n      let snapshot = querySnapshot.val()\r\n      for(var id in snapshot) {\r\n        let item = snapshot[id]\r\n        item.id = id\r\n        staff.push(item)\r\n      }\r\n\r\n      dispatch({\r\n        type: READ_STAFF,\r\n        payload: staff\r\n      })\r\n\r\n  })\r\n}\r\nexport const signOutUser = () => async dispatch => {\r\n  medicalPortalFirebase.auth().signOut()\r\n  .then(() => {\r\n    dispatch({ type: SIGN_OUT_USER})\r\n  })\r\n}\r\n\r\nexport const verifyAuth = () => async dispatch => {\r\n  medicalPortalFirebase.auth().onAuthStateChanged(user => {\r\n    if(user) {\r\n      let authuser = medicalPortalFirebase.auth().currentUser\r\n\r\n      dispatch({\r\n        type: ADD_USERNAME,\r\n        payload: authuser.email\r\n      })\r\n      dispatch({\r\n        type: AUTH_USER\r\n      })\r\n\r\n    } else {\r\n      dispatch({\r\n        type: SIGN_OUT_USER\r\n      })\r\n    }\r\n  })\r\n}\r\n\r\nexport const signInUser = (credentials) => async dispatch => {\r\n  medicalPortalFirebase.auth().signInWithEmailAndPassword(credentials.email, credentials.password)\r\n  .then(res => {\r\n    dispatch({\r\n      type: AUTH_USER\r\n    })\r\n  })\r\n  .catch(err => {\r\n    dispatch({\r\n      type: AUTH_ERROR,\r\n      payload: err\r\n    })\r\n  })\r\n}\r\nexport const fetchSimulationCoordinates = () => async dispatch => {\r\n  // let timeStart = Date.now()\r\n  // let timeEnd = Date.now()\r\n\r\n  let checkTime = new Date()\r\n  checkTime.setSeconds(checkTime.getSeconds() - 2)\r\n  checkTime = checkTime.toISOString().substr(0, 19);\r\n  let timeStart = checkTime\r\n  let timeEnd = checkTime\r\n\r\n  // let timeStart = '2019-04-06T16:55:00'\r\n  // let timeEnd = '2019-04-06T16:55:00'\r\n  let size = 10000\r\n  let coordinateQuery = {\r\n    \"size\": size,\r\n    \"sort\" : [{ \"timestamp\" : {\"order\" : \"asc\"}}],\r\n    \"query\": {\r\n      \"bool\": {\r\n        \"must\": [\r\n          {\r\n            \"range\" : {\r\n              \"@timestamp\" : {\r\n                \"gte\": timeStart,\r\n                \"lte\": timeEnd,\r\n              }\r\n            }\r\n          },\r\n        ]\r\n      }\r\n    }\r\n  }\r\n\r\n  axios.get(`http://137.132.165.139:9200/simulated-coordinates/_search?scroll=1m`, {\r\n    params: {\r\n        source: JSON.stringify(coordinateQuery),\r\n        source_content_type: 'application/json'\r\n      }\r\n  })\r\n  .then((res) => {\r\n    let fullTrace = res.data.hits.hits\r\n    if(fullTrace.length > 0) {\r\n    dispatch({\r\n      type: FETCH_SIMULATION_COORDINATES,\r\n      payload: res.data.hits.hits[0]._source\r\n    });\r\n    }\r\n  })\r\n\r\n}\r\n\r\n export const  fetchContactTrace = (traceDetails) => async dispatch => {\r\n  let timeStart = traceDetails.startTime;\r\n  let timeEnd = traceDetails.endTime;\r\n\r\n  timeStart = timeStart + ':00'\r\n  timeEnd = timeEnd + ':00'\r\n  const distance = traceDetails.contactDistance;\r\n  const beacon = traceDetails.name;\r\n  // let beacon = 51\r\n  // let distance = 10\r\n  let index = `precomputed-${beacon}`\r\n  //  let timeStart = `2019-04-06T16:47:55`\r\n  // let timeEnd = `2019-04-07T16:55:00`\r\n  let size = 10000\r\n\r\n  dispatch({\r\n    type: FETCHING_PROCESS\r\n  })\r\n\r\n  const query = {\r\n    \"size\": 10000,\r\n    \"sort\" : [{ \"timestamp\" : {\"order\" : \"asc\"}}],\r\n    \"query\": {\r\n      \"bool\": {\r\n        \"must\": [\r\n          {\r\n            \"range\" : {\r\n              \"@timestamp\" : {\r\n                \"gte\": timeStart,\r\n                \"lte\": timeEnd,\r\n                \"time_zone\": \"+08:00\"\r\n              }\r\n            }\r\n          },\r\n          {\r\n            \"range\" : {\r\n              \"distance\" : {\r\n                \"lte\": distance,\r\n              }\r\n            }\r\n          }\r\n        ]\r\n      }\r\n    }\r\n  };\r\n\r\n  let coordinateQuery = {\r\n    \"size\": size,\r\n    \"sort\" : [{ \"timestamp\" : {\"order\" : \"asc\"}}],\r\n    \"query\": {\r\n      \"bool\": {\r\n        \"must\": [\r\n          {\r\n            \"range\" : {\r\n              \"@timestamp\" : {\r\n                \"gte\": timeStart,\r\n                \"lte\": timeEnd,\r\n                \"time_zone\": \"+08:00\"\r\n              }\r\n            }\r\n          },\r\n        ]\r\n      }\r\n    }\r\n  }\r\n\r\n  axios.get(`http://137.132.165.139:9200/simulated-coordinates/_search?scroll=1m`, {\r\n    params: {\r\n        source: JSON.stringify(coordinateQuery),\r\n        source_content_type: 'application/json'\r\n      }\r\n  })\r\n  .then((res) => {\r\n    let fullTrace = res.data.hits.hits\r\n    let map = {}\r\n    let fullShot = []\r\n    let counter = 0\r\n    fullTrace.forEach( timestamp => {\r\n      let item = timestamp._source\r\n      item.key = timestamp._id;\r\n      // item.contact = []\r\n      fullShot.push(item)\r\n      map[timestamp._id] = counter\r\n      counter += 1\r\n    })\r\n\r\n    let scroll_size = res.data.hits.total\r\n\r\n    let scroll_id = res.data._scroll_id\r\n\r\n    let scrollQuery = {\r\n        'scroll' : '1m',\r\n        'scroll_id': scroll_id\r\n      }\r\n\r\n    getAPI(scrollQuery, fullShot)\r\n\r\n    timeStart = encodeURI(timeStart.replace('T', ' '));\r\n    timeEnd = encodeURI(timeEnd.replace('T', ' '));\r\n    let contactURL = `http://137.132.165.139:5001/contacts?beacon=${beacon}&distance=${distance}&startTime=${timeStart}&endTime=${timeEnd}`\r\n\r\n    axios.get(contactURL)\r\n    .then((res) => {\r\n\r\n      dispatch({\r\n          type: UPDATE_TRACE_DETAILS,\r\n          payload: traceDetails\r\n        })\r\n\r\n        dispatch({\r\n          type: FETCH_CONTACT_TRACE,\r\n          payload: fullShot\r\n        });\r\n\r\n        dispatch({\r\n          type: FETCH_FILTER_TRACE,\r\n          payload: res.data\r\n        });\r\n\r\n        dispatch({\r\n          type: FETCHING_DONE\r\n        })\r\n    }).catch(error => {\r\n\r\n    dispatch({\r\n      type: FETCHING_DONE\r\n    })\r\n    });\r\n\r\n\r\n  });\r\n\r\n}\r\n\r\nfunction getAPI(scrollQuery, fullShot) {\r\n\r\n       axios.get(`http://137.132.165.139:9200/_search/scroll`, {\r\n        params: {\r\n          source: JSON.stringify(scrollQuery),\r\n          source_content_type: 'application/json'\r\n        }\r\n    }).then((res) => {\r\n\r\n      res.data.hits.hits.forEach(timestamp => {\r\n        let item = timestamp._source\r\n        item.key = timestamp._id;\r\n        // item.contact = []\r\n        fullShot.push(item)\r\n\r\n      })\r\n\r\n      let scroll_id = res.data._scroll_id\r\n      let scrollQuery = {\r\n        'scroll' : '1m',\r\n        'scroll_id': scroll_id\r\n      }\r\n      let scroll_size = res.data.hits.hits.length\r\n\r\n      if(scroll_size > 0) {\r\n        getAPI(scrollQuery, fullShot)\r\n      }\r\n\r\n    })\r\n}\r\nexport const fetchNewBeacon = () => async dispatch => {\r\n  let precomputedPath = `beaconCounter/`\r\n  beaconCountRef.on(\"value\", querySnapshot => {\r\n    dispatch({\r\n      type: FETCH_NEW_BEACON,\r\n      payload: querySnapshot.val()\r\n    })\r\n  }, function (errorObject) {\r\n  console.log(\"The read failed: \" + errorObject.code);\r\n})\r\n}\r\n\r\nexport const updateBeaconCount = (count) => async dispatch => {\r\n  let newCount = count + 1;\r\n  beaconCountRef.set({\r\n    count: newCount\r\n  })\r\n}\r\n\r\nexport const fetchPatientCount = () => async dispatch => {\r\n  let precomputedPath = `patientCounter/`\r\n  patientCountRef.on(\"value\", querySnapshot => {\r\n    dispatch({\r\n      type: FETCH_PATIENT_COUNT,\r\n      payload: querySnapshot.val()\r\n    })\r\n  }, function (errorObject) {\r\n  console.log(\"The read failed: \" + errorObject.code);\r\n})\r\n}\r\n\r\nexport const updatePatientCount = (count) => async dispatch => {\r\n  let newCount = count + 1;\r\n  patientCountRef.set({\r\n    count: newCount\r\n  })\r\n}\r\n\r\nexport const updateStaffCount = (count) => async dispatch => {\r\n  let newCount = count + 1;\r\n  staffCountRef.set({\r\n    count: newCount\r\n  })\r\n}\r\n\r\nexport const updateAssetCount = (count) => async dispatch => {\r\n  let newCount = count + 1;\r\n  assetCountRef.set({\r\n    count: newCount\r\n  })\r\n}\r\n\r\nexport const fetchAssetCount = () => async dispatch => {\r\n  assetCountRef.on(\"value\", querySnapshot => {\r\n    dispatch({\r\n      type: FETCH_ASSET_COUNT,\r\n      payload: querySnapshot.val()\r\n    })\r\n  }, function (errorObject) {\r\n  console.log(\"The read failed: \" + errorObject.code);\r\n})\r\n}\r\n\r\nexport const fetchStaffCount = () => async dispatch => {\r\n  staffCountRef.on(\"value\", querySnapshot => {\r\n    dispatch({\r\n      type: FETCH_STAFF_COUNT,\r\n      payload: querySnapshot.val()\r\n    })\r\n  }, function (errorObject) {\r\n  console.log(\"The read failed: \" + errorObject.code);\r\n})\r\n}\r\n\r\nexport const fetchEcgVitals = () => async dispatch => {\r\n\r\n  ecgRef.on(\"value\", snapshot => {\r\n\r\n    dispatch({\r\n      type: FETCH_ECG_VITALS,\r\n      payload: snapshot.val()\r\n    });\r\n  });\r\n}\r\n\r\nexport const fetchSpecificEcgVitals = (uuid) => async dispatch => {\r\n\r\n  ecgRef.child(uuid).on(\"value\", snapshot => {\r\n    dispatch({\r\n      type: FETCH_ECG_VITALS,\r\n      payload: snapshot.val()\r\n    });\r\n  });\r\n}\r\nexport const removeListenerSpecificEcgVitals = (uuid) => async dispatch => {\r\n  ecgRef.child(uuid).off()\r\n}\r\nexport const fetchHeartrateVitals = () => async dispatch => {\r\n\r\n  heartrateRef.on(\"value\", snapshot => {\r\n    dispatch({\r\n      type: FETCH_HEARTRATE_VITALS,\r\n      payload: snapshot.val()\r\n    });\r\n  });\r\n\r\n}\r\n\r\nexport const fetchSpecificHeartrateVitals = (uuid) => async dispatch => {\r\n\r\n  heartrateRef.child(uuid).on(\"value\", snapshot => {\r\n    dispatch({\r\n      type: FETCH_HEARTRATE_VITALS,\r\n      payload: snapshot.val()\r\n    });\r\n  });\r\n}\r\n\r\nexport const removeListenerSpecificHeartrateVitals = (uuid) => async dispatch => {\r\n  heartrateRef.child(uuid).off()\r\n}\r\n","export const AUTH_USER = \"AUTH_USER\";\r\nexport const AUTH_ERROR = \"AUTH_ERROR\";\r\nexport const SIGN_OUT_USER = \"SIGN_OUT_USER\";\r\nexport const ADD_USERNAME = \"ADD_USERNAME\";\r\nexport const ASSIGN_BEACON = \"ASSIGN_BEACON\";\r\nexport const ASSIGN_DEVICES = \"ASSIGN_DEVICES\";\r\nexport const CONFIRM_TYPE = \"CONFIRM_TYPE\";\r\nexport const ADD_PATIENT = \"ADD_PATIENT\";\r\nexport const EDIT_PATIENT = \"EDIT_PATIENT\";\r\nexport const REMOVE_PATIENT = \"REMOVE_PATIENT\";\r\nexport const REMOVE_STAFF = \"REMOVE_STAFF\";\r\nexport const REMOVE_ASSET = \"REMOVE_ASSET\";\r\nexport const ADD_ASSET = \"ADD_ASSET\";\r\nexport const ADD_STAFF = \"ADD_STAFF\";\r\nexport const HIGHLIGHT_PATIENT = \"HIGHLIGHT_PATIENT\";\r\nexport const HIGHLIGHT_ASSET = \"HIGHLIGHT_ASSET\";\r\nexport const HIGHLIGHT_STAFF = \"HIGHLIGHT_STAFF\";\r\nexport const UPDATE_PATIENT = \"UPDATE_PATIENT\"\r\nexport const UPDATE_ASSET = \"UPDATE_ASSET\"\r\nexport const UPDATE_STAFF = \"UPDATE_STAFF\"\r\nexport const FETCH_MAPS = \"FETCH_MAPS\";\r\nexport const LOAD_MAP = \"LOAD_MAP\";\r\nexport const LOAD_INFO = \"LOAD_INFO\";\r\nexport const FETCH_DEVICES = \"FETCH_DEVICES\";\r\nexport const FETCH_ECG_VITALS = \"FETCH_ECG_VITALS\";\r\nexport const FETCH_HEARTRATE_VITALS = \"FETCH_HEARTRATE_VITALS\";\r\nexport const FETCH_DEVICE_LOCATIONS = \"FETCH_DEVICE_LOCATIONS\";\r\nexport const FETCH_CONTACT_TRACE = \"FETCH_CONTACT_TRACE\";\r\nexport const FETCH_FILTER_TRACE = \"FETCH_FILTER_TRACE\";\r\nexport const FETCH_SIMULATION_COORDINATES = \"FETCH_SIMULATION_COORDINATES\"\r\nexport const FETCH_NEW_BEACON = \"FETCH_NEW_BEACON\";\r\nexport const FETCHING_PROCESS = \"FETCHING_PROCESS\"\r\nexport const FETCHING_DONE = \"FETCHING_DONE\";\r\nexport const UPDATE_TRACE_DETAILS = \"UPDATE_TRACE_DETAILS\"\r\nexport const FETCH_PATIENT_COUNT = \"FETCH_PATIENT_COUNT\"\r\nexport const FETCH_ASSET_COUNT = \"FETCH_ASSET_COUNT\"\r\nexport const FETCH_STAFF_COUNT = \"FETCH_STAFF_COUNT\"\r\nexport const READ_PATIENTS = \"READ_PATIENTS\"\r\nexport const READ_ASSETS = \"READ_ASSETS\"\r\nexport const READ_STAFF = \"READ_STAFF\"\r\n","import React, { Component } from \"react\";\r\nimport Button from '@material-ui/core/Button';\r\nimport { Link } from 'react-router-dom';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardActionArea from '@material-ui/core/CardActionArea';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardMedia from '@material-ui/core/CardMedia';\r\nimport AccountCircle from '@material-ui/icons/AccountCircle';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport { connect } from \"react-redux\";\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport TemporaryDrawer from './TemporaryDrawer.js';\r\nimport LinearProgress from '@material-ui/core/LinearProgress';\r\nimport { verifyAuth, signOutUser } from \"./actions/index\";\r\n\r\nconst styles = {\r\n  root: {\r\n    flexGrow: 1,\r\n  },\r\n  grow: {\r\n    flexGrow: 1,\r\n  },\r\n  menuButton: {\r\n    marginLeft: -12,\r\n    marginRight: 20,\r\n    opacity : 0.4,\r\n    color: 'black',\r\n  },\r\n  buttons: {\r\n    display: 'flex',\r\n    width: '450px',\r\n    margin: 'auto',\r\n    marginTop: '1rem',\r\n    justifyContent: 'space-evenly',\r\n  },\r\n  addButton: {\r\n    paddingLeft: '8px'\r\n  },\r\n  card: {\r\n    maxWidth: 345,\r\n  },\r\n  lander: {\r\n    marginTop: '1.5rem'\r\n  },\r\n  media: {\r\n    // ⚠️ object-fit is not supported by IE 11.\r\n    objectFit: 'cover',\r\n  },\r\n  cardsFlex: {\r\n    paddingTop: '3em',\r\n  },\r\n  title: {\r\n    paddingBottom: '.3em',\r\n    paddingTop: '1em',\r\n  },\r\n  AppBar: {\r\n    borderBottom: '1px solid #f2f3f3',\r\n  }\r\n};\r\n\r\nconst mapStateToProps = state => {\r\n\r\n  return {\r\n    username: state.username,\r\n    authenticated: state.authenticated,\r\n    isAuthenticating: state.isAuthenticating,\r\n   };\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    signOutUser: username => dispatch(signOutUser(username)),\r\n    verifyAuth: credentials => dispatch(verifyAuth(credentials)),\r\n  };\r\n};\r\n\r\nclass Home extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      username: this.props.username,\r\n      anchorEl: null,\r\n      auth: true,\r\n      drawer: false,\r\n      isAuthenticating: true\r\n    };\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if(this.props.username != prevProps.username) {\r\n      this.setState({username: this.props.username})\r\n    }\r\n\r\n    if(this.props.isAuthenticating == false && this.props.authenticated == false) {\r\n      this.props.history.push('/');\r\n    }\r\n  }\r\n  toggleDrawer = () => {\r\n    this.setState({ drawer: true});\r\n  }\r\n  handleChange = event => {\r\n    this.setState({ auth: event.target.checked });\r\n  };\r\n\r\n  handleMenu = event => {\r\n    this.setState({ drawer: false });\r\n    this.setState({ anchorEl: event.currentTarget });\r\n  };\r\n\r\n  handleClose = () => {\r\n    this.setState({ anchorEl: null });\r\n  };\r\n\r\n  handleLogOut = () => {\r\n    this.setState({ anchorEl: null });\r\n    this.props.signOutUser()\r\n  }\r\n\r\nrenderUsername = () => {\r\n  let username = this.state.username;\r\n  if(username != null) {\r\n    username = username.charAt(0).toUpperCase() + username.slice(1);\r\n    let split = username.split(\"@\")\r\n    username = split[0]\r\n  }\r\n  return username\r\n}\r\n\r\nrender() {\r\n  const { classes } = this.props;\r\n  const { anchorEl, auth } = this.state;\r\n  const open = Boolean(anchorEl)\r\n  if(this.props.isAuthenticating) {\r\n    return <LinearProgress />\r\n  } else {\r\n    return (\r\n      <div className={classes.root}>\r\n        <AppBar position=\"static\" style={{boxShadow: \"none\", backgroundColor: \"white\"}} className={classes.AppBar}>\r\n          <Toolbar>\r\n            <IconButton className={classes.menuButton} color=\"inherit\" aria-label=\"Menu\" onClick={this.toggleDrawer}>\r\n              <MenuIcon />\r\n            </IconButton>\r\n            <Typography variant=\"title\" className={classes.grow} style={{color: \"black\"}}>\r\n              Home\r\n            </Typography>\r\n            {auth && (\r\n                <div>\r\n                  <IconButton\r\n                    aria-owns={open ? 'menu-appbar' : null}\r\n                    aria-haspopup=\"true\"\r\n                    onClick={this.handleMenu}\r\n                    color=\"inherit\"\r\n                  >\r\n                    <AccountCircle style={{color: \"black\"}} />\r\n                  </IconButton>\r\n                  <Menu\r\n                    id=\"menu-appbar\"\r\n                    anchorEl={anchorEl}\r\n                    anchorOrigin={{\r\n                      vertical: 'top',\r\n                      horizontal: 'right',\r\n                    }}\r\n                    transformOrigin={{\r\n                      vertical: 'top',\r\n                      horizontal: 'right',\r\n                    }}\r\n                    open={open}\r\n                    onClose={this.handleClose}\r\n                  >\r\n                    <MenuItem onClick={this.handleLogOut}>Logout</MenuItem>\r\n                  </Menu>\r\n                </div>\r\n              )}\r\n          </Toolbar>\r\n        </AppBar>\r\n        <TemporaryDrawer toggle={this.state.drawer} />\r\n        <Grid container className={classes.root}>\r\n          <Grid item xs={12}>\r\n            <Grid\r\n              className={classes.title}\r\n              container\r\n              spacing={16}\r\n              alignItems={'center'}\r\n              direction={'row'}\r\n              justify={'center'}\r\n            >\r\n              <Typography variant=\"h4\" gutterBottom className={classes.title}>\r\n                Welcome {this.renderUsername()}!\r\n              </Typography>\r\n            </Grid>\r\n          </Grid>\r\n          <Grid item xs={12}>\r\n            <Grid\r\n              container\r\n              spacing={40}\r\n              alignItems={'center'}\r\n              direction={'row'}\r\n              justify={'center'}\r\n            >\r\n              <Grid item>\r\n                <Button component={Link} to=\"/addPatient\" variant=\"outlined\" color=\"primary\" className={classes.addButton}>\r\n                  <AddIcon /> Patient\r\n                </Button>\r\n              </Grid>\r\n              <Grid item>\r\n                <Button component={Link} to=\"/addAsset\" variant=\"outlined\" color=\"primary\" className={classes.addButton}>\r\n                  <AddIcon /> Asset\r\n                </Button>\r\n              </Grid>\r\n              <Grid item>\r\n                <Button component={Link} to=\"/addStaff\" variant=\"outlined\" color=\"primary\" className={classes.addButton} >\r\n                  <AddIcon /> Staff\r\n                </Button>\r\n              </Grid>\r\n            </Grid>\r\n          </Grid>\r\n          <Grid item xs={12}>\r\n            <Grid\r\n              container\r\n              className={classes.cardsFlex}\r\n              spacing={40}\r\n              alignItems={'center'}\r\n              direction={'row'}\r\n              justify={'center'}\r\n            >\r\n              <Grid item>\r\n                <Card className={classes.card}>\r\n                  <CardActionArea\r\n                    component={Link}\r\n                    to=\"/locationTracking\">\r\n                    <CardMedia\r\n                      component=\"img\"\r\n                      alt=\"Contemplative Reptile\"\r\n                      className={classes.media}\r\n                      height=\"180\"\r\n                      image=\"img/LocationTracking.jpg\"\r\n                      title=\"Location Tracking\"\r\n                    />\r\n                    <CardContent>\r\n                      <Typography gutterBottom variant=\"h6\" component=\"h2\">\r\n                        Location & Status Tracking\r\n                      </Typography>\r\n                      <Typography component=\"p\">\r\n                        Shows locations and statuses of patients, assets and staff\r\n                      </Typography>\r\n                    </CardContent>\r\n                  </CardActionArea>\r\n                </Card>\r\n              </Grid>\r\n              <Grid item>\r\n                <Card className={classes.card}>\r\n                  <CardActionArea\r\n                    component={Link}\r\n                    to=\"/contactTracing\">\r\n                    <CardMedia\r\n                    component=\"img\"\r\n                    alt=\"Contemplative Reptile\"\r\n                    className={classes.media}\r\n                    height=\"180\"\r\n                    image=\"img/ContactTracing.jpg\"\r\n                    title=\"Contact Tracing\"\r\n                  />\r\n                    <CardContent>\r\n                      <Typography gutterBottom variant=\"h6\" component=\"h2\">\r\n                        Contact Tracing\r\n                      </Typography>\r\n                      <Typography component=\"p\">\r\n                        Identify contact between the infected and other patients\r\n                      </Typography>\r\n                    </CardContent>\r\n                  </CardActionArea>\r\n                </Card>\r\n              </Grid>\r\n            </Grid>\r\n          </Grid>\r\n        </Grid>\r\n      </div>\r\n    );\r\n  }\r\n  }\r\n}\r\nconst ConnectedHome = connect(mapStateToProps, mapDispatchToProps)(Home);\r\nexport default withStyles(styles)(ConnectedHome);\r\n","import React, { Component } from 'react';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport { connect } from \"react-redux\";\r\nimport { addUsername, signInUser, verifyAuth } from \"./actions/index\";\r\nimport Card from '@material-ui/core/Card';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport LockIcon from '@material-ui/icons/LockOutlined';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Visibility from '@material-ui/icons/Visibility';\r\nimport VisibilityOff from '@material-ui/icons/VisibilityOff';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport classNames from 'classnames';\r\nimport Input from '@material-ui/core/Input';\r\n import { medicalPortalFirebase } from \"./firebase/index\"\r\n\r\n\r\n\r\nconst styles = theme => ({\r\n  container: {\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n  },\r\n  layout: {\r\n    width: 'auto',\r\n    display: 'block', // Fix IE 11 issue.\r\n    marginLeft: theme.spacing.unit * 3,\r\n    marginRight: theme.spacing.unit * 3,\r\n    [theme.breakpoints.up(400 + theme.spacing.unit * 3 * 2)]: {\r\n      width: 400,\r\n      marginLeft: 'auto',\r\n      marginRight: 'auto',\r\n    },\r\n  },\r\n  card: {\r\n    minWidth: 275,\r\n    padding: '2rem'\r\n  },\r\n  textField: {\r\n    // marginLeft: theme.spacing.unit,\r\n    // marginRight: theme.spacing.unit,\r\n  },\r\n  borderBox: {\r\n    border: '1px solid',\r\n    padding: '2rem',\r\n    borderRadius: '16px',\r\n  },\r\n  menu: {\r\n    width: 200,\r\n  },\r\n  paper: {\r\n    marginTop: theme.spacing.unit * 8,\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n    padding: `${theme.spacing.unit * 2}px ${theme.spacing.unit * 3}px ${theme.spacing.unit * 3}px`,\r\n  },\r\n  form: {\r\n    width: '100%', // Fix IE 11 issue.\r\n    marginTop: theme.spacing.unit,\r\n  },\r\n  avatar: {\r\n   margin: theme.spacing.unit,\r\n   backgroundColor: theme.palette.secondary.main,\r\n },\r\n  background: {\r\n    backgroundImage: `url(/img/NUH.jpg)`,\r\n    backgroundSize: 'cover',\r\n    minHeight: '100vh',\r\n    backgroundPosition: 'center center'\r\n  },\r\n  overlay: {\r\n    backgroundColor: 'rgba(255, 255, 255, 0.1)',\r\n    minHeight: '100vh'\r\n  },\r\n  nuslogo: {\r\n    maxHeight: '7vh',\r\n    paddingRight: '1em',\r\n  },\r\n  nuhlogo: {\r\n    maxHeight: '7vh'\r\n  },\r\n  toolbar: {\r\n    paddingTop: '1em'\r\n  }\r\n});\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    authenticated: state.authenticated,\r\n    autherror: state.autherror,\r\n    isAuthenticating: state.isAuthenticating,\r\n  };\r\n};\r\n\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    addUsername: username => dispatch(addUsername(username)),\r\n    signInUser: credentials => dispatch(signInUser(credentials)),\r\n    verifyAuth: credentials => dispatch(verifyAuth(credentials)),\r\n  };\r\n};\r\n\r\nclass Login extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      username: \"\",\r\n      password: \"\",\r\n      loading: false,\r\n      query: 'idle',\r\n      error: '',\r\n      showPassword: false,\r\n    };\r\n  }\r\n  componentWillUnmount() {\r\n    clearTimeout(this.timer)\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if(this.props.authenticated) {\r\n      this.props.history.push('/home');\r\n    }\r\n  }\r\n  renderAuthenticationError = () => {\r\n    if(this.props.autherror) {\r\n      return <Typography variant=\"subtitle1\" style={{color: 'red'}}> {this.props.autherror} </Typography>\r\n    }\r\n    return <div/>\r\n  }\r\n  handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    clearTimeout(this.timer);\r\n    const { username } = this.state;\r\n\r\n    let credentials = {email: this.state.username, password: this.state.password }\r\n    this.props.signInUser(credentials)\r\n  }\r\n\r\n  handleLoading = () => {\r\n    this.setState(state => ({\r\n      loading: !state.loading,\r\n    }))\r\n  }\r\n\r\n  handleClickShowPassword = () => {\r\n    this.setState(state => ({ showPassword: !state.showPassword }));\r\n  };\r\n\r\n  render() {\r\n\r\n    const { classes } = this.props;\r\n\r\n    return (\r\n      <div className={classes.background}>\r\n        <div className={classes.overlay}>\r\n          <Toolbar className={classes.toolbar}>\r\n            <img src={'img/nuslogo.png'} className={classes.nuslogo} />\r\n            <img src={'img/nuhlogo.png'} className={classes.nuhlogo} />\r\n          </Toolbar>\r\n          <Grid container\r\n            justify=\"center\"\r\n            direction=\"column\"\r\n            spacing={0}\r\n            alignItems=\"center\"\r\n            style={{ minHeight: '75vh'}}>\r\n            <Grid item xs={12}>\r\n              <div className={classes.layout}>\r\n                <Paper className={classes.paper} elevation={10}>\r\n                  <Avatar className={classes.avatar}>\r\n                    <LockIcon />\r\n                  </Avatar>\r\n                  <Typography variant=\"h5\" gutterBottom>Login</Typography>\r\n                  <Typography variant=\"subtitle1\" gutterBottom>Medical Portal</Typography>\r\n                  {this.renderAuthenticationError()}\r\n                  <form className={classes.form} onSubmit={this.handleSubmit}>\r\n                    <FormControl margin=\"normal\" required fullWidth>\r\n                      <TextField\r\n                        label=\"Email\"\r\n                        placeholder=\"Email\"\r\n                        autoComplete=\"email\"\r\n                        required = {true}\r\n                        variant=\"outlined\"\r\n                        fullWidth\r\n                        className={classes.textField}\r\n                        onChange = {(e) => this.setState({username:e.target.value})}\r\n                      />\r\n                    </FormControl>\r\n                    <FormControl margin=\"normal\" required fullWidth>\r\n                      <TextField\r\n                        type={this.state.showPassword ? 'text' : 'password'}\r\n                        label=\"Password\"\r\n                        placeholder=\"Password\"\r\n                        required = {true}\r\n                        variant=\"outlined\"\r\n                        className={classNames(classes.margin, classes.textField)}\r\n                        onChange = {(e) => this.setState({password:e.target.value})}\r\n                        InputProps={{\r\n                          endAdornment: (\r\n                          <InputAdornment position=\"end\">\r\n                            <IconButton\r\n                              aria-label=\"Toggle password visibility\"\r\n                              onClick={this.handleClickShowPassword}\r\n                            >\r\n                              {this.state.showPassword ? <VisibilityOff /> : <Visibility />}\r\n                            </IconButton>\r\n                            </InputAdornment>\r\n                          ),\r\n                        }}\r\n                      />\r\n                    </FormControl>\r\n                    <br/>\r\n                    <div style={{ textAlign: 'center', paddingTop: '1rem'}}>\r\n                      <Button type='submit' variant=\"contained\" color=\"primary\">\r\n                        Submit\r\n                      </Button>\r\n                    </div>\r\n                  </form>\r\n                </Paper>\r\n              </div>\r\n            </Grid>\r\n          </Grid>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst ConnectedLogin = connect(mapStateToProps, mapDispatchToProps)(Login);\r\n\r\nexport default withStyles(styles)(ConnectedLogin);\r\n","import React from \"react\";\r\nimport Quagga from 'quagga';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nconst styles = theme => ({\r\n  container: {\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n  },\r\n  root: {\r\n    flexGrow: 1,\r\n  },\r\n  grow: {\r\n    flexGrow: 1,\r\n  },\r\n  drawingBuffer: {\r\n    display: 'none'\r\n  },\r\n  textField: {\r\n    // marginLeft: theme.spacing.unit,\r\n    // marginRight: theme.spacing.unit,\r\n  },\r\n  borderBox: {\r\n    border: '1px solid',\r\n    padding: '2rem',\r\n    borderRadius: '16px',\r\n  },\r\n  menu: {\r\n    width: 200,\r\n  },\r\n  menuButton: {\r\n    marginLeft: -12,\r\n    marginRight: 20,\r\n    opacity : 0.4,\r\n    color: 'black',\r\n  },\r\n  align: {\r\n    padding: `${theme.spacing.unit * 2}px ${theme.spacing.unit * 3}px ${theme.spacing.unit * 3}px`,\r\n  }\r\n});\r\n\r\nclass Scanner extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n          source: ''\r\n        }\r\n    }\r\n\r\n    handleVideo = (stream) => {\r\n   // this.setState({\r\n   //   source: stream\r\n   // })\r\n }\r\n\r\n videoError = (err) => {\r\n   console.log(err)\r\n }\r\n\r\n    render() {\r\n        return (\r\n            <div id=\"interactive\" className=\"viewport\" style={{textAlign: 'center'}}>\r\n              <video  className=\"videoCamera\" autoPlay={true} preload=\"auto\" src=\"\" muted=\"true\"\r\n             playsInLine ></video>\r\n\r\n             <canvas className=\"drawingBuffer\" style={{display: 'none'}}></canvas>\r\n           </div>\r\n        );\r\n    }\r\n\r\n    componentDidMount() {\r\n\r\n        Quagga.init({\r\n            inputStream: {\r\n                type : \"LiveStream\",\r\n                constraints: {\r\n                    width: 500,\r\n                    height: 480,\r\n                    facingMode: \"environment\", // or user\r\n                }\r\n            },\r\n            locator: {\r\n                patchSize: \"large\",\r\n                halfSample: true\r\n            },\r\n            numOfWorkers: 4,\r\n            decoder: {\r\n                readers : [\"code_128_reader\", \"code_39_reader\"]\r\n            },\r\n            locate: true\r\n        }, function(err) {\r\n            if (err) {\r\n                return console.log(err);\r\n            }\r\n\r\n\r\n            // const drawingCanvas = Quagga.canvas.dom.overlay;\r\n            // drawingCanvas.style.display = 'none';\r\n            Quagga.start();\r\n        });\r\n\r\n        Quagga.onDetected(this._onDetected);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        Quagga.offDetected(this._onDetected);\r\n        Quagga.stop();\r\n    }\r\n\r\n    _onDetected = (result) => {\r\n      const drawingCanvas = Quagga.canvas.dom.overlay;\r\n        drawingCanvas.style.display = 'none';\r\n        this.props.onDetected(result);\r\n    }\r\n};\r\n\r\nScanner.propTypes = {\r\n    onDetected: PropTypes.func.isRequired\r\n};\r\n\r\nexport default withStyles(styles)(Scanner);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\nclass Result extends React.Component {\r\n    render() {\r\n        const result = this.props.result;\r\n\r\n        if (!result) {\r\n            return null;\r\n        }\r\n        return (\r\n            <Typography variant=\"subtitle1\">\r\n            {result.codeResult.code}\r\n            </Typography>\r\n        );\r\n    }\r\n};\r\n\r\nResult.propTypes = {\r\n    result: PropTypes.object\r\n};\r\nexport default Result;\r\n","import React, { Component } from 'react';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport { connect } from \"react-redux\";\r\nimport { confirmType, addPatient, fetchMaps, editPatient, removePatient, fetchNewBeacon, fetchingProcess, fetchingDone, updateBeaconCount, assignBeacon } from \"./actions/index\";\r\nimport Card from '@material-ui/core/Card';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport TemporaryDrawer from './TemporaryDrawer';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport AccountCircle from '@material-ui/icons/AccountCircle';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport classNames from 'classnames';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport Radio from '@material-ui/core/Radio';\r\nimport RadioGroup from '@material-ui/core/RadioGroup';\r\nimport FormLabel from '@material-ui/core/FormLabel';\r\nimport BeaconTable from './BeaconTable';\r\nimport Scanner from './Scanner';\r\nimport Result from './Result';\r\nimport Select from 'react-select';\r\nimport axios from 'axios';\r\nimport NoSsr from '@material-ui/core/NoSsr';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Chip from '@material-ui/core/Chip';\r\nimport CancelIcon from '@material-ui/icons/Cancel';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Stepper from '@material-ui/core/Stepper';\r\nimport Step from '@material-ui/core/Step';\r\nimport StepLabel from '@material-ui/core/StepLabel';\r\nimport StepContent from '@material-ui/core/StepContent';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport LocationOnIcon from '@material-ui/icons/LocationOn';\r\n\r\n\r\nconst graphqlUrlHTTPS = 'http://137.132.165.139:3000/graphql';\r\n\r\n\r\nconst styles = theme => ({\r\n  container: {\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n  },\r\n  root: {\r\n    flexGrow: 1,\r\n  },\r\n  idPaper: {\r\n    float: 'left',\r\n    padding: '15px',\r\n    marginTop: '-20px',\r\n    marginRight: '15px',\r\n    borderRadius: '3px',\r\n    zIndex: 2,\r\n     backgroundColor: '#339af0',\r\n\r\n    //background: 'linear-gradient(60deg, #26c6da, #00acc1)',\r\n    boxShadow: '0 4px 20px 0 rgba(0, 0, 0,.14), 0 7px 10px -5px rgba(51, 154, 240,.4)',\r\n  },\r\n  grow: {\r\n    flexGrow: 1,\r\n  },\r\n  card: {\r\n    minWidth: 200,\r\n\r\n  },\r\n  title: {\r\n    fontSize: 14,\r\n  },\r\n  pos: {\r\n    marginBottom: 12,\r\n  },\r\n  textField: {\r\n    // marginLeft: theme.spacing.unit,\r\n    // marginRight: theme.spacing.unit,\r\n  },\r\n  borderBox: {\r\n    border: '1px solid',\r\n    padding: '2rem',\r\n    borderRadius: '16px',\r\n  },\r\n  menu: {\r\n    width: 200,\r\n  },\r\n  menuButton: {\r\n    marginLeft: -12,\r\n    marginRight: 20,\r\n    opacity : 0.4,\r\n    color: 'black',\r\n  },\r\n  align: {\r\n    padding: `${theme.spacing.unit * 2}px ${theme.spacing.unit * 3}px ${theme.spacing.unit * 3}px`,\r\n  },\r\n  input: {\r\n    display: 'flex',\r\n    padding: 0,\r\n  },\r\n  valueContainer: {\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n    flex: 1,\r\n    alignItems: 'center',\r\n    overflow: 'hidden',\r\n    padding: '18.5px 14px',\r\n  },\r\n  noOptionsMessage: {\r\n   padding: `${theme.spacing.unit}px ${theme.spacing.unit * 2}px`,\r\n },\r\n singleValue: {\r\n    fontSize: 16,\r\n  },\r\n  placeholder: {\r\n    position: 'absolute',\r\n    left: 2,\r\n    fontSize: 16,\r\n    padding: '18.5px 14px',\r\n  },\r\n  paper: {\r\n    position: 'absolute',\r\n    zIndex: 1,\r\n    marginTop: theme.spacing.unit,\r\n    left: 0,\r\n    right: 0,\r\n  },\r\n  card_actions: {\r\n  display: 'flex',\r\n  alignItems: 'center',\r\n  justifyContent: 'center',\r\n  marginTop: '16px',\r\n}\r\n});\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    beacon: state.beacon,\r\n    maps: state.maps,\r\n    edit: state.edit,\r\n    fetching: state.fetching,\r\n    beaconCounter: state.beaconCounter.count,\r\n    deviceLogs: state.deviceLogs,\r\n   };\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    confirmType: type => dispatch(confirmType(type)),\r\n    addPatient: patient => dispatch(addPatient(patient)),\r\n    editPatient: patient => dispatch(editPatient(patient)),\r\n    removePatient: patient => dispatch(removePatient(patient)),\r\n    fetchMaps: maps => dispatch(fetchMaps(maps)),\r\n    fetchNewBeacon: count => dispatch(fetchNewBeacon(count)),\r\n    fetchingProcess: fetch => dispatch(fetchingProcess(fetch)),\r\n    assignBeacon: beacon => dispatch(assignBeacon(beacon)),\r\n    fetchingDone: fetch => dispatch(fetchingDone(fetch)),\r\n    updateBeaconCount: count => dispatch(updateBeaconCount(count))\r\n  };\r\n};\r\n\r\nfunction NoOptionsMessage(props) {\r\n  return (\r\n    <Typography\r\n      color=\"textSecondary\"\r\n      className={props.selectProps.classes.noOptionsMessage}\r\n      {...props.innerProps}\r\n    >\r\n      {props.children}\r\n    </Typography>\r\n  );\r\n}\r\n\r\nfunction inputComponent({ inputRef, ...props }) {\r\n  return <div ref={inputRef} {...props} />;\r\n}\r\n\r\nfunction Control(props) {\r\n  return (\r\n    <TextField\r\n      fullWidth\r\n      variant=\"outlined\"\r\n      InputProps={{\r\n        inputComponent,\r\n        inputProps: {\r\n          className: props.selectProps.classes.input,\r\n          inputRef: props.innerRef,\r\n          children: props.children,\r\n          ...props.innerProps,\r\n        },\r\n      }}\r\n      {...props.selectProps.textFieldProps}\r\n    />\r\n  );\r\n}\r\n\r\nfunction Option(props) {\r\n  return (\r\n    <MenuItem\r\n      buttonRef={props.innerRef}\r\n      selected={props.isFocused}\r\n      component=\"div\"\r\n      style={{\r\n        fontWeight: props.isSelected ? 500 : 400,\r\n      }}\r\n      {...props.innerProps}\r\n    >\r\n      {props.children}\r\n    </MenuItem>\r\n  );\r\n}\r\n\r\nfunction Placeholder(props) {\r\n  return (\r\n    <Typography\r\n      color=\"textSecondary\"\r\n      className={props.selectProps.classes.placeholder}\r\n      {...props.innerProps}\r\n    >\r\n      {props.children}\r\n    </Typography>\r\n  );\r\n}\r\n\r\nfunction SingleValue(props) {\r\n  return (\r\n    <Typography className={props.selectProps.classes.singleValue} {...props.innerProps}>\r\n      {props.children}\r\n    </Typography>\r\n  );\r\n}\r\n\r\nfunction ValueContainer(props) {\r\n  return <div className={props.selectProps.classes.valueContainer}>{props.children}</div>;\r\n}\r\n\r\nfunction MultiValue(props) {\r\n  return (\r\n    <Chip\r\n      tabIndex={-1}\r\n      label={props.children}\r\n      className={classNames(props.selectProps.classes.chip, {\r\n        [props.selectProps.classes.chipFocused]: props.isFocused,\r\n      })}\r\n      onDelete={props.removeProps.onClick}\r\n      deleteIcon={<CancelIcon {...props.removeProps} />}\r\n    />\r\n  );\r\n}\r\n\r\nfunction SubMenu(props) {\r\n  return (\r\n    <Paper square className={props.selectProps.classes.paper} {...props.innerProps}>\r\n      {props.children}\r\n    </Paper>\r\n  );\r\n}\r\n\r\nconst components = {\r\n  Control,\r\n  SubMenu,\r\n  MultiValue,\r\n  NoOptionsMessage,\r\n  Option,\r\n  Placeholder,\r\n  SingleValue,\r\n  ValueContainer,\r\n};\r\n\r\nclass AddDeviceForm extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      anchorEl: null,\r\n      auth: true,\r\n      id: \"\",\r\n      beaconId: \"\",\r\n      measuredPower: \"-63\",\r\n      gattId: \"\",\r\n      gattProfile: \"\",\r\n      open: false,\r\n      beacon: this.props.beacon,\r\n      scanning: false,\r\n      results: [],\r\n      options: [],\r\n      edit: false,\r\n      step: 1,\r\n      fetchAttempts: -1,\r\n      errorMessage: \"\",\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.props.fetchNewBeacon()\r\n    if(this.props.open != \"\" && this.props.open != null) {\r\n      this.setState({open: this.props.open})\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if(this.props.open !== \"\" && this.props.open != null && this.props.open !== this.state.open ) {\r\n      this.setState({open: this.props.open})\r\n    }\r\n\r\n    if(this.props.beaconCounter !== \"\" && this.props.beaconCounter != null && this.props.beaconCounter !== prevProps.beaconCounter ) {\r\n      let beaconId = `3:${this.props.beaconCounter}`\r\n      let id = `b${this.props.beaconCounter}`\r\n      this.setState({beaconId})\r\n      this.setState({id})\r\n    }\r\n\r\n    if(this.props.fetching == true && this.state.fetchAttempts == 0) {\r\n     this.noConnection()\r\n     clearInterval(this.timer)\r\n     this.timer = null; // here...\r\n    }\r\n  }\r\n\r\n  noConnection = () => {\r\n    this.props.fetchingDone()\r\n    let errorMessage = <div style={{marginTop: '1em', textAlign: 'center'}}> Unable to connect to beacon. <br/>\r\n    Please check Gimbal if it is successfully activated </div>\r\n    this.setState({errorMessage})\r\n    this.deleteDevice()\r\n  }\r\n\r\n  verifyConnection = () => {\r\n    let found = false;\r\n    let checkId = `b${this.props.beaconCounter}`\r\n    let deviceLogs = this.props.deviceLogs\r\n    deviceLogs.map( (device) => {\r\n      if(device.id == checkId) {\r\n        found = true\r\n        this.props.assignBeacon([checkId])\r\n      }\r\n    })\r\n\r\n    if(found == true) {\r\n      this.setState({fetchAttempts: 0})\r\n      this.props.fetchingDone()\r\n      clearInterval(this.timer)\r\n      this.timer = null; // here...\r\n      this.props.updateBeaconCount(this.props.beaconCounter)\r\n\r\n      this.handleClose()\r\n    } else {\r\n      let fetchAttempts = this.state.fetchAttempts - 1\r\n      this.setState({fetchAttempts})\r\n    }\r\n  }\r\n\r\n  handleClickOpen = () => {\r\n     this.setState({ open: true });\r\n  };\r\n\r\n  handleClose = () => {\r\n     this.props.handleClose()\r\n  };\r\n\r\n  createOptions = (maps) => {\r\n    let options = maps.map((map) => ({\r\n      value: map.id,\r\n      label: map.id,\r\n    }))\r\n    this.setState({options})\r\n  }\r\n\r\n  fetch = (dispatch) => {\r\n    let query = `\r\n      query {\r\n        maps {\r\n          id\r\n          scale\r\n          coordinates\r\n          imageURL\r\n          navMesh\r\n          navPath\r\n          pois\r\n        }\r\n      }\r\n    `\r\n    this.request({query})\r\n    .then (data => {\r\n      this.props.fetchMaps(data.data.data.maps);\r\n      this.createOptions(data.data.data.maps);\r\n    })\r\n  }\r\n\r\n  request = ({query, variables}) => {\r\n    let promise = axios({\r\n      method:   'post',\r\n      url:      `${graphqlUrlHTTPS}`,\r\n      headers:  {'Content-Type': 'application/json'},\r\n      data:     JSON.stringify({query, variables})\r\n    })\r\n    return promise;\r\n  }\r\n\r\n  toggleDrawer = () => {\r\n    this.setState({ drawer: true});\r\n  }\r\n\r\n  handleMenu = event => {\r\n    this.setState({ drawer: false });\r\n    this.setState({ anchorEl: event.currentTarget });\r\n  };\r\n\r\n\r\n  packageDevice = () => {\r\n    let device = {}\r\n\r\n    if(this.state.id != \"\") {\r\n      device.device = {id: this.state.id, type: 'mobile'}\r\n    }\r\n\r\n    if(this.state.beaconId != \"\") {\r\n      device.beacon = {id: this.state.beaconId}\r\n      if(this.state.measuredPower != \"\") {\r\n        device.beacon.measuredPower = this.state.measuredPower\r\n      }\r\n    }\r\n\r\n    if(this.state.gattId != \"\") {\r\n      device.gatt = {id: this.state.gattId};\r\n      if (this.state.gattProfile != \"\") {\r\n        device.gatt.profile = JSON.parse(this.state.gattProfile );\r\n      }\r\n    }\r\n    return device\r\n  }\r\n\r\n  deleteDevice = () => {\r\n    let id = this.state.id\r\n    let variables = {id: id}\r\n    let query = `\r\n      mutation ($id: String!) {\r\n        deleteDevice(id: $id) { id }\r\n      }\r\n    `;\r\n    this.requestPost({query, variables})\r\n\r\n  }\r\n  createDevice = (device) => {\r\n    let variables  = {input: device}\r\n    let query = `\r\n        mutation ($input: CreateDeviceInput!) {\r\n          createDevice(input: $input) { id }\r\n        }\r\n      `;\r\n    this.requestPost({query, variables})\r\n  }\r\n\r\n  requestPost = ({query, variables}) => {\r\n    let graphqlUrl= \"http://137.132.165.139:3000/graphql\"\r\n    axios({\r\n        method:   'post',\r\n        url:      `${graphqlUrl}`,\r\n        headers:  {'Content-Type': 'application/json'},\r\n        data:     JSON.stringify({query, variables})\r\n      })\r\n  }\r\n\r\n\r\n\r\n  handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    this.props.fetchingProcess()\r\n    const { type } = this.state;\r\n    this.setState({fetchAttempts: 30})\r\n    let device = this.packageDevice()\r\n    this.createDevice(device);\r\n    this.timer = setInterval(()=> this.verifyConnection(), 1000);\r\n  }\r\n\r\n  handleLoading = () => {\r\n    this.setState(state => ({\r\n      loading: !state.loading,\r\n    }))\r\n  }\r\n\r\n  handleChange = prop => event => {\r\n    if(prop == \"ward\")\r\n      this.setState({ [prop]: event });\r\n    else {\r\n      this.setState({ [prop]: event.target.value });\r\n    }\r\n  };\r\n\r\n  checkGimbal = () => {\r\n    let gimbalUrl= \"https://manager.gimbal.com/api/beacons\"\r\n    window.open(\"https://manager.gimbal.com/login/users/sign_in\");\r\n  }\r\n\r\n\r\n  cancel = () => {\r\n    this.props.history.push('/home');\r\n  }\r\n\r\n  _scan = (e) => {\r\n        e.preventDefault();\r\n        this.setState({scanning: !this.state.scanning});\r\n    }\r\n\r\n    _onDetected = (result) => {\r\n        let results = this.state.results;\r\n        if(results.indexOf(result) < 0)\r\n          this.setState({results: this.state.results.concat([result])});\r\n    }\r\n\r\n  renderLoading = () => {\r\n    let loading = <div style={{textAlign: 'center', marginTop: '1em'}}> <CircularProgress />  <Typography variant=\"subtitle2\"> Verifying ... </Typography></div>\r\n\r\n    return loading;\r\n  }\r\n  render() {\r\n\r\n    const { classes, theme } = this.props;\r\n    const { anchorEl, auth } = this.state;\r\n    const open = Boolean(anchorEl)\r\n\r\n    const selectStyles = {\r\n      input: base => ({\r\n        ...base,\r\n        color: theme.palette.text.primary,\r\n        '& input': {\r\n          font: 'inherit',\r\n        },\r\n      }),\r\n    };\r\n\r\n    return (\r\n      <div>\r\n        <Dialog\r\n          open={this.state.open}\r\n          onClose={this.handleClose}\r\n          aria-labelledby=\"form-dialog-title\"\r\n        >\r\n          <DialogTitle id=\"form-dialog-title\">Add Beacon</DialogTitle>\r\n          <DialogContent>\r\n            <Grid\r\n              container\r\n              spacing={0}\r\n              direction=\"column\"\r\n              alignItems=\"center\"\r\n              justify=\"center\"\r\n            >\r\n              <Grid item xs={12}>\r\n                <Card className={classes.card} style={{display: 'inline-block'}}>\r\n                  <CardContent style={{textAlign: 'center'}}>\r\n                    <Paper className={classes.idPaper} elevation={10}>\r\n                      <span>\r\n                        <LocationOnIcon style={{fontSize: '30px', color: 'white'}} />\r\n                      </span>\r\n                    </Paper>\r\n                    <Typography color=\"textSecondary\">\r\n                      Beacon ID\r\n                    </Typography>\r\n                    <Typography variant=\"h5\" component=\"h2\" style={{fontSize: '1.825em'}} >\r\n                      3:{this.props.beaconCounter != \"\" ? this.props.beaconCounter : null}\r\n                    </Typography>\r\n                    {this.props.fetching ? this.renderLoading() : null}\r\n                  </CardContent>\r\n                {this.props.fetching ? null :\r\n                  <CardActions className={classes.card_actions}>\r\n                    <Grid\r\n                      justify=\"center\"\r\n                      container\r\n                      spacing={24}\r\n                    >\r\n                      <Button size=\"small\" onClick={this.checkGimbal}>Gimbal Site</Button>\r\n                    </Grid>\r\n                  </CardActions> }\r\n                </Card>\r\n              </Grid>\r\n            </Grid>\r\n\r\n            <Typography variant=\"subtitle1\" style={{color: 'red'}}> {this.state.errorMessage }  </Typography>\r\n\r\n            <Typography variant=\"body1\" component='p' paragraph style={{marginTop: '16px'}}>\r\n              1. Copy the Beacon ID provided and open the Gimbal Site by clicking on the 'Gimbal Site' button.\r\n            </Typography>\r\n\r\n            <Typography variant=\"body1\" component='p' paragraph>\r\n              2. Login to the Gimbal Site and navigate to <b> Beacons > Beacons Management </b>\r\n            </Typography>\r\n\r\n            <Typography variant=\"body1\" component='p' paragraph>\r\n              3. Click on <b>+ Activate Beacon</b> on the top of the table of beacons\r\n            </Typography>\r\n\r\n            <Typography variant=\"body1\" component='p' paragraph>\r\n              4. Fill in the Beacon ID under the Beacon Name and the Factory ID can be found in the Beacon itself.\r\n              Submit the form and wait and once successfully activated, return to this application.\r\n            </Typography>\r\n\r\n            <br/>\r\n            {/*\r\n              <FormControl margin=\"normal\" required fullWidth>\r\n                <TextField\r\n                  label=\"id\"\r\n                  placeholder=\"id\"\r\n                  variant=\"outlined\"\r\n                  value={this.state.id}\r\n                  fullWidth\r\n                  className={classes.textField}\r\n                  onChange = {(e) => this.setState({id:e.target.value})}\r\n                />\r\n              </FormControl>\r\n\r\n            <FormControl margin=\"normal\" required fullWidth>\r\n              <TextField\r\n                label=\"Beacon ID\"\r\n                placeholder=\"Beacon ID\"\r\n                variant=\"outlined\"\r\n                value={this.state.beaconId}\r\n                fullWidth\r\n                className={classes.textField}\r\n                onChange = {(e) => this.setState({beaconId:e.target.value})}\r\n              />\r\n            </FormControl>\r\n\r\n            <FormControl margin=\"normal\" required fullWidth>\r\n              <TextField\r\n                label=\"Measured Power\"\r\n                placeholder=\"Measured Power\"\r\n                variant=\"outlined\"\r\n                value={this.state.measuredPower}\r\n                fullWidth\r\n                className={classes.textField}\r\n                onChange = {(e) => this.setState({measuredPower:e.target.value})}\r\n              />\r\n            </FormControl>\r\n\r\n            <FormControl margin=\"normal\" required fullWidth>\r\n              <TextField\r\n                label=\"Gatt ID\"\r\n                placeholder=\"Gatt ID\"\r\n                variant=\"outlined\"\r\n                value={this.state.gattId}\r\n                fullWidth\r\n                className={classes.textField}\r\n                onChange = {(e) => this.setState({gattId:e.target.value})}\r\n              />\r\n            </FormControl>\r\n\r\n            <FormControl margin=\"normal\" required fullWidth>\r\n              <TextField\r\n                label=\"Gatt Profile\"\r\n                placeholder=\"Gatt Profile\"\r\n                variant=\"outlined\"\r\n                value={this.state.gattProfile}\r\n                fullWidth\r\n                className={classes.textField}\r\n                onChange = {(e) => this.setState({gattProfile:e.target.value})}\r\n              />\r\n            </FormControl>\r\n          */}\r\n          </DialogContent>\r\n          <DialogActions>\r\n           <Button onClick={this.handleClose} color=\"primary\">\r\n            Cancel\r\n           </Button>\r\n           <Button onClick={this.handleSubmit} color=\"primary\">\r\n            Next\r\n           </Button>\r\n          </DialogActions>\r\n        </Dialog>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst ConnectedAddDeviceForm = connect(mapStateToProps, mapDispatchToProps)(AddDeviceForm);\r\n\r\nexport default withStyles(styles, {withTheme: true})(ConnectedAddDeviceForm);\r\n","import React from 'react';\r\nimport classNames from 'classnames';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TablePagination from '@material-ui/core/TablePagination';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport TableSortLabel from '@material-ui/core/TableSortLabel';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport FilterListIcon from '@material-ui/icons/FilterList';\r\nimport AddIcon from '@material-ui/icons/Add'\r\nimport { lighten } from '@material-ui/core/styles/colorManipulator';\r\nimport { connect } from \"react-redux\";\r\nimport { assignBeacon, fetchDeviceLocations } from \"./actions/index\";\r\nimport ConnectedAddDeviceForm from \"./AddDeviceForm\"\r\nimport axios from 'axios'\r\n\r\n\r\nconst restUrlHTTPS = `http://137.132.165.139:3000/api`;\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    assignBeacon: beacon => dispatch(assignBeacon(beacon)),\r\n    fetchDeviceLocations: devices => dispatch(fetchDeviceLocations(devices)),\r\n  };\r\n};\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    patients: state.patients,\r\n    assets: state.assets,\r\n    staff: state.staff,\r\n    deviceLogs: state.deviceLogs,\r\n    edit: state.edit,\r\n    beacon: state.beacon,\r\n  };\r\n};\r\n\r\n\r\n\r\nlet counter = 0;\r\nfunction createData(serialno, battery) {\r\n  counter += 1;\r\n  return { id: counter, serialno, battery };\r\n}\r\n\r\nfunction desc(a, b, orderBy) {\r\n  if (b[orderBy] < a[orderBy]) {\r\n    return -1;\r\n  }\r\n  if (b[orderBy] > a[orderBy]) {\r\n    return 1;\r\n  }\r\n  return 0;\r\n}\r\n\r\nfunction stableSort(array, cmp) {\r\n  const stabilizedThis = array.map((el, index) => [el, index]);\r\n  stabilizedThis.sort((a, b) => {\r\n    const order = cmp(a[0], b[0]);\r\n    if (order !== 0) return order;\r\n    return a[1] - b[1];\r\n  });\r\n  return stabilizedThis.map(el => el[0]);\r\n}\r\n\r\nfunction getSorting(order, orderBy) {\r\n  return order === 'desc' ? (a, b) => desc(a, b, orderBy) : (a, b) => -desc(a, b, orderBy);\r\n}\r\n\r\n// { id: 'battery', numeric: false, disablePadding: false, label: 'Battery Life (%)' },\r\nconst rows = [\r\n  { id: 'serialno', numeric: false, disablePadding: true, label: 'Serial No' },\r\n\r\n];\r\n\r\nclass EnhancedTableHead extends React.Component {\r\n  createSortHandler = property => event => {\r\n    this.props.onRequestSort(event, property);\r\n  };\r\n\r\n  render() {\r\n    const { onSelectAllClick, order, orderBy, numSelected, rowCount } = this.props;\r\n\r\n    return (\r\n      <TableHead>\r\n        <TableRow>\r\n          <TableCell padding=\"checkbox\">\r\n            {/*<Checkbox\r\n              indeterminate={numSelected > 0 && numSelected < rowCount}\r\n              checked={numSelected === rowCount}\r\n              onChange={onSelectAllClick}\r\n            /> */}\r\n          </TableCell>\r\n          {rows.map(row => {\r\n            return (\r\n              <TableCell\r\n                key={row.id}\r\n                numeric={row.numeric}\r\n                padding={row.disablePadding ? 'none' : 'default'}\r\n                sortDirection={orderBy === row.id ? order : false}\r\n              >\r\n                <Tooltip\r\n                  title=\"Sort\"\r\n                  placement={row.numeric ? 'bottom-end' : 'bottom-start'}\r\n                  enterDelay={300}\r\n                >\r\n                  <TableSortLabel\r\n                    active={orderBy === row.id}\r\n                    direction={order}\r\n                    onClick={this.createSortHandler(row.id)}\r\n                  >\r\n                    {row.label}\r\n                  </TableSortLabel>\r\n                </Tooltip>\r\n              </TableCell>\r\n            );\r\n          }, this)}\r\n        </TableRow>\r\n      </TableHead>\r\n    );\r\n  }\r\n}\r\n\r\nEnhancedTableHead.propTypes = {\r\n  numSelected: PropTypes.number.isRequired,\r\n  onRequestSort: PropTypes.func.isRequired,\r\n  onSelectAllClick: PropTypes.func.isRequired,\r\n  order: PropTypes.string.isRequired,\r\n  orderBy: PropTypes.string.isRequired,\r\n  rowCount: PropTypes.number.isRequired,\r\n};\r\n\r\nconst toolbarStyles = theme => ({\r\n  root: {\r\n    paddingRight: theme.spacing.unit,\r\n  },\r\n  highlight:\r\n    theme.palette.type === 'light'\r\n      ? {\r\n          color: theme.palette.secondary.main,\r\n          backgroundColor: lighten(theme.palette.secondary.light, 0.85),\r\n        }\r\n      : {\r\n          color: theme.palette.text.primary,\r\n          backgroundColor: theme.palette.secondary.dark,\r\n        },\r\n  spacer: {\r\n    flex: '1 1 100%',\r\n  },\r\n  actions: {\r\n    color: theme.palette.text.secondary,\r\n  },\r\n  title: {\r\n    paddingTop: '.5em',\r\n    flex: '0 0 auto',\r\n  },\r\n});\r\n\r\nclass EnhancedTableToolbar extends React.Component {\r\n\r\nhandleOpen = () => {\r\n  this.props.handleOpen()\r\n}\r\nrender() {\r\n  const { numSelected, classes } = this.props;\r\n\r\n  return (\r\n    <Toolbar\r\n      className={classNames(classes.root, {\r\n        [classes.highlight]: numSelected > 0,\r\n      })}\r\n    >\r\n      <div className={classes.title}>\r\n        {numSelected > 0 ? (\r\n          <Typography color=\"inherit\" variant=\"subtitle1\">\r\n            {numSelected} selected\r\n          </Typography>\r\n        ) : ([\r\n          <Typography variant=\"h6\" id=\"tableTitle\">\r\n            Available Beacons\r\n          </Typography>,\r\n          <Typography variant=\"caption\" id=\"tableSubtitle\">\r\n            Optional\r\n          </Typography>\r\n        ]\r\n        )}\r\n      </div>\r\n      <div className={classes.spacer} />\r\n      <div className={classes.actions}>\r\n        {numSelected > 0 ? (\r\n          null\r\n        ) : (\r\n          <Tooltip title=\"Add Beacon\">\r\n            <IconButton aria-label=\"Add\" onClick={this.handleOpen}>\r\n              <AddIcon />\r\n            </IconButton>\r\n          </Tooltip>\r\n        )}\r\n      </div>\r\n    </Toolbar>\r\n  );\r\n}\r\n};\r\n\r\nEnhancedTableToolbar.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n  numSelected: PropTypes.number.isRequired,\r\n};\r\n\r\nEnhancedTableToolbar = withStyles(toolbarStyles)(EnhancedTableToolbar);\r\n\r\nconst styles = theme => ({\r\n  root: {\r\n    width: '100%',\r\n    marginTop: theme.spacing.unit * 3,\r\n  },\r\n  table: {\r\n    minWidth: 500,\r\n  },\r\n  tableWrapper: {\r\n    overflowX: 'auto',\r\n  },\r\n});\r\n\r\nclass BeaconTable extends React.Component {\r\n  state = {\r\n    order: 'asc',\r\n    orderBy: 'serialno',\r\n    selected: [],\r\n    data: [\r\n    ],\r\n    page: 0,\r\n    rowsPerPage: 5,\r\n    open: false,\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.timer = setInterval(()=> this.getDeviceLogs(), 1000);\r\n    if(this.props.edit != \"\") {\r\n      let selected = this.props.edit.beacon;\r\n      if (selected != null && selected != \"None\") {\r\n        this.props.assignBeacon( selected )\r\n        this.setState({selected: [selected]})\r\n      }\r\n      this.setState({edit: true})\r\n    }\r\n  }\r\n\r\n  getDeviceLogs = (dispatch) => {\r\n    let promise = axios({\r\n      method:   'get',\r\n      url:      `${restUrlHTTPS}/Devices/logs`,\r\n      headers:  {'Content-Type': 'application/json'},\r\n    }).then (data => {\r\n        this.props.fetchDeviceLocations(data.data)\r\n      }\r\n    )\r\n    return promise;\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    clearInterval(this.timer)\r\n    this.timer = null; // here...\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if(this.props.beacon != prevProps.beacon) {\r\n      this.setState({selected: this.props.beacon})\r\n      this.forceUpdate()\r\n    }\r\n    if(this.props.deviceLogs !== prevProps.deviceLogs) {\r\n      this.filterLogs()\r\n    }\r\n    if(this.state.edit == true && this.props.edit == \"\") {\r\n      this.setState({selected : []})\r\n      this.props.assignBeacon( \"None\" )\r\n      this.setState({edit : false})\r\n    }\r\n  }\r\n\r\n  filterLogs = () => {\r\n    let filteredLogs = this.props.deviceLogs\r\n    let mobileDevices = []\r\n    filteredLogs.map(device => {\r\n      let checkBeacon = false\r\n      this.props.patients.forEach(patient => {\r\n        if(device.id == patient.beacon) {\r\n          checkBeacon = true\r\n        }\r\n      })\r\n\r\n      this.props.assets.forEach(asset => {\r\n        if(device.id == asset.beacon) {\r\n          checkBeacon = true\r\n        }\r\n      })\r\n\r\n      this.props.staff.forEach(staff => {\r\n        if(device.id == staff.beacon) {\r\n          checkBeacon = true\r\n        }\r\n      })\r\n      if(checkBeacon == false && device.id.charAt(0) == 'b') {\r\n        mobileDevices.push(device)\r\n\r\n      }\r\n\r\n      if(checkBeacon == true && this.props.edit.beacon == device.id) {\r\n        mobileDevices.push(device)\r\n      }\r\n    })\r\n\r\n    mobileDevices = this.createData(mobileDevices)\r\n    this.setState({data: mobileDevices})\r\n\r\n  }\r\n\r\n  createData = (devices) => {\r\n    let data = []\r\n    let counter = 0\r\n    devices.forEach(device => {\r\n      let item = {id: counter, serialno: device.id }\r\n      data.push(item)\r\n      counter += 1;\r\n    })\r\n\r\n    return data;\r\n  }\r\n\r\n  handleRequestSort = (event, property) => {\r\n    const orderBy = property;\r\n    let order = 'desc';\r\n\r\n    if (this.state.orderBy === property && this.state.order === 'desc') {\r\n      order = 'asc';\r\n    }\r\n\r\n    this.setState({ order, orderBy });\r\n  };\r\n\r\n  handleSelectAllClick = event => {\r\n    if (event.target.checked) {\r\n      this.setState(state => ({ selected: state.data.map(n => n.id) }));\r\n      return;\r\n    }\r\n    this.setState({ selected: [] });\r\n  };\r\n\r\n  handleClick = (event, id, serialno) => {\r\n    const { selected } = this.state;\r\n    let selectedIndex = selected.indexOf(id);\r\n    if(selectedIndex === -1)\r\n      selectedIndex = selected.indexOf(serialno)\r\n    let newSelected = [];\r\n\r\n    if (selectedIndex === -1) {\r\n      newSelected[0] = id;\r\n    } else if (selectedIndex === 0) {\r\n      newSelected = newSelected.concat(selected.slice(1));\r\n    } else if (selectedIndex === selected.length - 1) {\r\n      newSelected = newSelected.concat(selected.slice(0, -1));\r\n    } else if (selectedIndex > 0) {\r\n      newSelected = newSelected.concat(\r\n        selected.slice(0, selectedIndex),\r\n        selected.slice(selectedIndex + 1),\r\n      );\r\n    }\r\n\r\n    this.setState({ selected: newSelected });\r\n    if(newSelected.length === 1) {\r\n      let data = this.state.data;\r\n      let chosenBeacon = [data[newSelected[0]].serialno]\r\n\r\n      this.props.assignBeacon( chosenBeacon );\r\n\r\n    } else {\r\n      let chosenBeacon = []\r\n      this.props.assignBeacon( chosenBeacon );\r\n    }\r\n\r\n  };\r\n\r\n  handleChangePage = (event, page) => {\r\n    this.setState({ page });\r\n  };\r\n\r\n  handleChangeRowsPerPage = event => {\r\n    this.setState({ rowsPerPage: event.target.value });\r\n  };\r\n\r\n  handleOpen = () => {\r\n    this.setState({open: true})\r\n  }\r\n\r\n  handleClose = () => {\r\n    this.setState({open: false})\r\n  }\r\n\r\n\r\n\r\n  isSelected = id => this.state.selected.indexOf(id) !== -1;\r\n\r\n  render() {\r\n    const { classes } = this.props;\r\n    const { data, order, orderBy, selected, rowsPerPage, page } = this.state;\r\n    const emptyRows = rowsPerPage - Math.min(rowsPerPage, data.length - page * rowsPerPage);\r\n\r\n    return (\r\n      <Paper className={classes.root}>\r\n        <ConnectedAddDeviceForm open={this.state.open} handleClose={this.handleClose} />\r\n        <EnhancedTableToolbar numSelected={selected.length}  handleOpen={this.handleOpen}/>\r\n        <div className={classes.tableWrapper}>\r\n          <Table className={classes.table} aria-labelledby=\"tableTitle\">\r\n            <EnhancedTableHead\r\n              numSelected={selected.length}\r\n              order={order}\r\n              orderBy={orderBy}\r\n              onSelectAllClick={this.handleSelectAllClick}\r\n              onRequestSort={this.handleRequestSort}\r\n              rowCount={data.length}\r\n            />\r\n            <TableBody>\r\n              {stableSort(data, getSorting(order, orderBy))\r\n                .slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\r\n                .map(n => {\r\n                  let isSelected = this.isSelected(n.id);\r\n                  if(isSelected == false) {\r\n                    isSelected = this.isSelected(n.serialno)\r\n                  }\r\n\r\n                  return (\r\n                    <TableRow\r\n                      hover\r\n                      onClick={event => this.handleClick(event, n.id, n.serialno)}\r\n                      role=\"checkbox\"\r\n                      aria-checked={isSelected}\r\n                      tabIndex={-1}\r\n                      key={n.id}\r\n                      selected={isSelected}\r\n                    >\r\n                      <TableCell style={{width: '1.5rem'}} padding=\"checkbox\">\r\n                        <Checkbox checked={isSelected} />\r\n                      </TableCell>\r\n                      <TableCell component=\"th\" scope=\"row\" padding=\"none\">\r\n                        {n.serialno}\r\n                      </TableCell>\r\n                      {/*<TableCell padding=\"default\">{n.battery}</TableCell>*/}\r\n                    </TableRow>\r\n                  );\r\n                })}\r\n              {emptyRows > 0 && (\r\n                <TableRow style={{ height: 49 * emptyRows }}>\r\n                  <TableCell colSpan={6} />\r\n                </TableRow>\r\n              )}\r\n            </TableBody>\r\n          </Table>\r\n        </div>\r\n        <TablePagination\r\n          component=\"div\"\r\n          count={data.length}\r\n          rowsPerPage={rowsPerPage}\r\n          page={page}\r\n          rowsPerPageOptions={[5, 10, 15]}\r\n          backIconButtonProps={{\r\n            'aria-label': 'Previous Page',\r\n          }}\r\n          nextIconButtonProps={{\r\n            'aria-label': 'Next Page',\r\n          }}\r\n          onChangePage={this.handleChangePage}\r\n          onChangeRowsPerPage={this.handleChangeRowsPerPage}\r\n        />\r\n      </Paper>\r\n    );\r\n  }\r\n}\r\n\r\nBeaconTable.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n};\r\n\r\nconst ConnectedBeaconTable = connect(mapStateToProps, mapDispatchToProps)(BeaconTable);\r\n\r\nexport default withStyles(styles)(ConnectedBeaconTable);\r\n","import React from 'react';\r\nimport classNames from 'classnames';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TablePagination from '@material-ui/core/TablePagination';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport TableSortLabel from '@material-ui/core/TableSortLabel';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport FilterListIcon from '@material-ui/icons/FilterList';\r\nimport AddIcon from '@material-ui/icons/Add'\r\nimport { lighten } from '@material-ui/core/styles/colorManipulator';\r\nimport { connect } from \"react-redux\";\r\nimport { assignBeacon, fetchDeviceLocations, fetchDevices, assignDevices} from \"./actions/index\";\r\nimport ConnectedAddDeviceForm from \"./AddDeviceForm\"\r\nimport axios from 'axios'\r\n\r\n\r\nconst restUrlHTTPS = `http://137.132.165.139:3000/api`;\r\nconst graphqlUrlHTTPS = 'http://137.132.165.139:3000/graphql';\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    assignBeacon: beacon => dispatch(assignBeacon(beacon)),\r\n    assignDevices: devices => dispatch(assignDevices(devices)),\r\n    fetchDevices: devices => dispatch(fetchDevices(devices)),\r\n    fetchDeviceLocations: devices => dispatch(fetchDeviceLocations(devices)),\r\n  };\r\n};\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    patients: state.patients,\r\n    deviceLogs: state.deviceLogs,\r\n    edit: state.edit,\r\n    devices: state.devices,\r\n  };\r\n};\r\n\r\n\r\n\r\nlet counter = 0;\r\nfunction createData(serialno, battery) {\r\n  counter += 1;\r\n  return { id: counter, serialno, battery };\r\n}\r\n\r\nfunction desc(a, b, orderBy) {\r\n  if (b[orderBy] < a[orderBy]) {\r\n    return -1;\r\n  }\r\n  if (b[orderBy] > a[orderBy]) {\r\n    return 1;\r\n  }\r\n  return 0;\r\n}\r\n\r\nfunction stableSort(array, cmp) {\r\n  const stabilizedThis = array.map((el, index) => [el, index]);\r\n  stabilizedThis.sort((a, b) => {\r\n    const order = cmp(a[0], b[0]);\r\n    if (order !== 0) return order;\r\n    return a[1] - b[1];\r\n  });\r\n  return stabilizedThis.map(el => el[0]);\r\n}\r\n\r\nfunction getSorting(order, orderBy) {\r\n  return order === 'desc' ? (a, b) => desc(a, b, orderBy) : (a, b) => -desc(a, b, orderBy);\r\n}\r\n\r\n// { id: 'battery', numeric: false, disablePadding: false, label: 'Battery Life (%)' },\r\nconst rows = [\r\n  { id: 'serialno', numeric: false, disablePadding: true, label: 'Serial No' },\r\n\r\n];\r\n\r\nclass EnhancedTableHead extends React.Component {\r\n  createSortHandler = property => event => {\r\n    this.props.onRequestSort(event, property);\r\n  };\r\n\r\n  render() {\r\n    const { onSelectAllClick, order, orderBy, numSelected, rowCount } = this.props;\r\n\r\n    return (\r\n      <TableHead>\r\n        <TableRow>\r\n          <TableCell padding=\"checkbox\">\r\n            {/*<Checkbox\r\n              indeterminate={numSelected > 0 && numSelected < rowCount}\r\n              checked={numSelected === rowCount}\r\n              onChange={onSelectAllClick}\r\n            /> */}\r\n          </TableCell>\r\n          {rows.map(row => {\r\n            return (\r\n              <TableCell\r\n                key={row.id}\r\n                numeric={row.numeric}\r\n                padding={row.disablePadding ? 'none' : 'default'}\r\n                sortDirection={orderBy === row.id ? order : false}\r\n              >\r\n                <Tooltip\r\n                  title=\"Sort\"\r\n                  placement={row.numeric ? 'bottom-end' : 'bottom-start'}\r\n                  enterDelay={300}\r\n                >\r\n                  <TableSortLabel\r\n                    active={orderBy === row.id}\r\n                    direction={order}\r\n                    onClick={this.createSortHandler(row.id)}\r\n                  >\r\n                    {row.label}\r\n                  </TableSortLabel>\r\n                </Tooltip>\r\n              </TableCell>\r\n            );\r\n          }, this)}\r\n        </TableRow>\r\n      </TableHead>\r\n    );\r\n  }\r\n}\r\n\r\nEnhancedTableHead.propTypes = {\r\n  numSelected: PropTypes.number.isRequired,\r\n  onRequestSort: PropTypes.func.isRequired,\r\n  onSelectAllClick: PropTypes.func.isRequired,\r\n  order: PropTypes.string.isRequired,\r\n  orderBy: PropTypes.string.isRequired,\r\n  rowCount: PropTypes.number.isRequired,\r\n};\r\n\r\nconst toolbarStyles = theme => ({\r\n  root: {\r\n    paddingRight: theme.spacing.unit,\r\n  },\r\n  highlight:\r\n    theme.palette.type === 'light'\r\n      ? {\r\n          color: theme.palette.secondary.main,\r\n          backgroundColor: lighten(theme.palette.secondary.light, 0.85),\r\n        }\r\n      : {\r\n          color: theme.palette.text.primary,\r\n          backgroundColor: theme.palette.secondary.dark,\r\n        },\r\n  spacer: {\r\n    flex: '1 1 100%',\r\n  },\r\n  actions: {\r\n    color: theme.palette.text.secondary,\r\n  },\r\n  title: {\r\n    paddingTop: '.5em',\r\n    flex: '0 0 auto',\r\n  },\r\n});\r\n\r\nclass EnhancedTableToolbar extends React.Component {\r\n\r\nhandleOpen = () => {\r\n  this.props.handleOpen()\r\n}\r\nrender() {\r\n  const { numSelected, classes } = this.props;\r\n\r\n  return (\r\n    <Toolbar\r\n      className={classNames(classes.root, {\r\n        [classes.highlight]: numSelected > 0,\r\n      })}\r\n    >\r\n      <div className={classes.title}>\r\n        {numSelected > 0 ? (\r\n          <Typography color=\"inherit\" variant=\"subtitle1\">\r\n            {numSelected} selected\r\n          </Typography>\r\n        ) : ([\r\n          <Typography variant=\"h6\" id=\"tableTitle\">\r\n            Available Devices\r\n          </Typography>,\r\n          <Typography variant=\"caption\" id=\"tableSubtitle\">\r\n            Optional\r\n          </Typography>\r\n        ]\r\n        )}\r\n      </div>\r\n      <div className={classes.spacer} />\r\n    </Toolbar>\r\n  );\r\n}\r\n};\r\n\r\nEnhancedTableToolbar.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n  numSelected: PropTypes.number.isRequired,\r\n};\r\n\r\nEnhancedTableToolbar = withStyles(toolbarStyles)(EnhancedTableToolbar);\r\n\r\nconst styles = theme => ({\r\n  root: {\r\n    width: '100%',\r\n    marginTop: theme.spacing.unit * 3,\r\n  },\r\n  table: {\r\n    minWidth: 500,\r\n  },\r\n  tableWrapper: {\r\n    overflowX: 'auto',\r\n  },\r\n});\r\n\r\nclass DevicesTable extends React.Component {\r\n  state = {\r\n    order: 'asc',\r\n    orderBy: 'serialno',\r\n    selected: [],\r\n    data: [\r\n    ],\r\n    page: 0,\r\n    rowsPerPage: 5,\r\n    open: false,\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.getDevices();\r\n    //this.timer = setInterval(()=> this.getDeviceLogs(), 1000);\r\n    if(this.props.edit != \"\") {\r\n      let selected = this.props.edit.devices;\r\n      if (selected != null && selected[0] != \"None\") {\r\n        this.props.assignDevices( selected )\r\n        this.setState({selected: selected})\r\n      }\r\n      this.setState({edit: true})\r\n    }\r\n  }\r\n\r\n  request = ({query, variables}) => {\r\n    let promise = axios({\r\n      method:   'post',\r\n      url:      `${graphqlUrlHTTPS}`,\r\n      headers:  {'Content-Type': 'application/json'},\r\n      data:     JSON.stringify({query, variables})\r\n    })\r\n    return promise;\r\n  }\r\n\r\n  getDevices = (dispatch) => {\r\n    let query = `\r\n      query {\r\n        devices {\r\n          id\r\n          type\r\n          location\r\n          anchor {\r\n            id\r\n            device {\r\n              id\r\n            }\r\n            sensitivity\r\n          }\r\n          beacon {\r\n            id\r\n            device {\r\n              id\r\n            }\r\n            measuredPower\r\n          }\r\n          gatt {\r\n            id\r\n            device {\r\n              id\r\n            }\r\n            profile\r\n            connect\r\n          }\r\n        }\r\n      }\r\n    `\r\n    this.request({query})\r\n    .then (data =>\r\n      this.props.fetchDevices(data.data.data.devices),\r\n    )\r\n  }\r\n\r\n  getDeviceLogs = (dispatch) => {\r\n\r\n    let promise = axios({\r\n      method:   'get',\r\n      url:      `${restUrlHTTPS}/Devices/logs`,\r\n      headers:  {'Content-Type': 'application/json'},\r\n    }).then (data => {\r\n        this.props.fetchDeviceLocations(data.data)\r\n      }\r\n    )\r\n    return promise;\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    clearInterval(this.timer)\r\n    this.timer = null; // here...\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if(this.props.devices !== prevProps.devices) {\r\n      this.filterLogs()\r\n    }\r\n    if(this.state.edit == true && this.props.edit == \"\") {\r\n      this.setState({selected : []})\r\n      this.props.assignDevices( [\"None\"] )\r\n      this.setState({edit : false})\r\n    }\r\n  }\r\n\r\n  filterLogs = () => {\r\n    let filteredLogs = this.props.devices\r\n    let mobileDevices = []\r\n    filteredLogs.map(device => {\r\n      let checkBeacon = false\r\n      this.props.patients.forEach(patient => {\r\n        if(patient.devices[0] != \"None\") {\r\n          patient.devices.map(check => {\r\n            if(check.id == device.id) {\r\n              checkBeacon = true\r\n            }\r\n          })\r\n        }\r\n      })\r\n\r\n      if(checkBeacon == false && device.gatt != null) {\r\n        mobileDevices.push(device)\r\n\r\n      }\r\n\r\n      if(checkBeacon == true && this.props.edit.devices != null) {\r\n        this.props.edit.devices.map(check => {\r\n          if(check.id == device.id) {\r\n            mobileDevices.push(device)\r\n          }\r\n        })\r\n      }\r\n    })\r\n\r\n    mobileDevices = this.createData(mobileDevices)\r\n    this.setState({data: mobileDevices})\r\n\r\n  }\r\n\r\n  createData = (devices) => {\r\n    let data = []\r\n    let counter = 0\r\n    devices.forEach(device => {\r\n      let item = {id: counter, serialno: device.id, uuid: device.beacon.id }\r\n      data.push(item)\r\n      counter += 1;\r\n    })\r\n\r\n    return data;\r\n  }\r\n\r\n  handleRequestSort = (event, property) => {\r\n    const orderBy = property;\r\n    let order = 'desc';\r\n\r\n    if (this.state.orderBy === property && this.state.order === 'desc') {\r\n      order = 'asc';\r\n    }\r\n\r\n    this.setState({ order, orderBy });\r\n  };\r\n\r\n  handleSelectAllClick = event => {\r\n    if (event.target.checked) {\r\n      this.setState(state => ({ selected: state.data.map(n => n.id) }));\r\n      return;\r\n    }\r\n    this.setState({ selected: [] });\r\n  };\r\n\r\n  handleClick = (event, id, serialno) => {\r\n    const { selected } = this.state;\r\n    let selectedIndex = selected.indexOf(id);\r\n    if(selectedIndex === -1) {\r\n      let index = 0\r\n      selected.map(check => {\r\n        if(typeof check === 'object') {\r\n          if(serialno == check.id) {\r\n            selectedIndex = index\r\n          }\r\n        }\r\n        index += 1\r\n      })\r\n    }\r\n    //  selectedIndex = selected.indexOf(serialno)\r\n    let newSelected = [];\r\n\r\n    if (selectedIndex === -1) {\r\n      newSelected = newSelected.concat(selected, id);\r\n    } else if (selectedIndex === 0) {\r\n      newSelected = newSelected.concat(selected.slice(1));\r\n    } else if (selectedIndex === selected.length - 1) {\r\n      newSelected = newSelected.concat(selected.slice(0, -1));\r\n    } else if (selectedIndex > 0) {\r\n      newSelected = newSelected.concat(\r\n        selected.slice(0, selectedIndex),\r\n        selected.slice(selectedIndex + 1),\r\n      );\r\n    }\r\n\r\n    this.setState({ selected: newSelected });\r\n    if(newSelected.length > 0) {\r\n      let data = this.state.data;\r\n      let chosen = []\r\n      newSelected.map(select => {\r\n        if(typeof select === 'object'  | select == \"None\") {\r\n          chosen.push(select)\r\n        } else {\r\n          let item = {id: data[select].serialno, uuid: data[select].uuid}\r\n          chosen.push(item)\r\n        }\r\n      })\r\n\r\n      this.props.assignDevices( chosen );\r\n\r\n    } else {\r\n      let chosenBeacon = [\"None\"]\r\n      this.props.assignDevices( chosenBeacon );\r\n    }\r\n\r\n  };\r\n\r\n  handleChangePage = (event, page) => {\r\n    this.setState({ page });\r\n  };\r\n\r\n  handleChangeRowsPerPage = event => {\r\n    this.setState({ rowsPerPage: event.target.value });\r\n  };\r\n\r\n  handleOpen = () => {\r\n    this.setState({open: true})\r\n  }\r\n\r\n  handleClose = () => {\r\n    this.setState({open: false})\r\n  }\r\n\r\n\r\n\r\n  isSelected = id => this.state.selected.indexOf(id) !== -1;\r\n\r\n  render() {\r\n    const { classes } = this.props;\r\n    const { data, order, orderBy, selected, rowsPerPage, page } = this.state;\r\n    const emptyRows = rowsPerPage - Math.min(rowsPerPage, data.length - page * rowsPerPage);\r\n\r\n    return (\r\n      <Paper className={classes.root}>\r\n        <ConnectedAddDeviceForm open={this.state.open} handleClose={this.handleClose} />\r\n        <EnhancedTableToolbar numSelected={selected.length}  handleOpen={this.handleOpen}/>\r\n        <div className={classes.tableWrapper}>\r\n          <Table className={classes.table} aria-labelledby=\"tableTitle\">\r\n            <EnhancedTableHead\r\n              numSelected={selected.length}\r\n              order={order}\r\n              orderBy={orderBy}\r\n              onSelectAllClick={this.handleSelectAllClick}\r\n              onRequestSort={this.handleRequestSort}\r\n              rowCount={data.length}\r\n            />\r\n            <TableBody>\r\n              {stableSort(data, getSorting(order, orderBy))\r\n                .slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\r\n                .map(n => {\r\n                  let isSelected = this.isSelected(n.id);\r\n                  if(isSelected == false) {\r\n                    this.state.selected.map(check => {\r\n                      if(typeof check === 'object') {\r\n                        if(n.serialno == check.id) {\r\n                          isSelected = true\r\n                        }\r\n                      }\r\n                    })\r\n\r\n                  }\r\n\r\n                  return (\r\n                    <TableRow\r\n                      hover\r\n                      onClick={event => this.handleClick(event, n.id, n.serialno)}\r\n                      role=\"checkbox\"\r\n                      aria-checked={isSelected}\r\n                      tabIndex={-1}\r\n                      key={n.id}\r\n                      selected={isSelected}\r\n                    >\r\n                      <TableCell style={{width: '1.5rem'}} padding=\"checkbox\">\r\n                        <Checkbox checked={isSelected} />\r\n                      </TableCell>\r\n                      <TableCell component=\"th\" scope=\"row\" padding=\"none\">\r\n                        {n.serialno}\r\n                      </TableCell>\r\n                      {/*<TableCell padding=\"default\">{n.battery}</TableCell>*/}\r\n                    </TableRow>\r\n                  );\r\n                })}\r\n              {emptyRows > 0 && (\r\n                <TableRow style={{ height: 49 * emptyRows }}>\r\n                  <TableCell colSpan={6} />\r\n                </TableRow>\r\n              )}\r\n            </TableBody>\r\n          </Table>\r\n        </div>\r\n        <TablePagination\r\n          component=\"div\"\r\n          count={data.length}\r\n          rowsPerPage={rowsPerPage}\r\n          page={page}\r\n          rowsPerPageOptions={[5, 10, 15]}\r\n          backIconButtonProps={{\r\n            'aria-label': 'Previous Page',\r\n          }}\r\n          nextIconButtonProps={{\r\n            'aria-label': 'Next Page',\r\n          }}\r\n          onChangePage={this.handleChangePage}\r\n          onChangeRowsPerPage={this.handleChangeRowsPerPage}\r\n        />\r\n      </Paper>\r\n    );\r\n  }\r\n}\r\n\r\nDevicesTable.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n};\r\n\r\nconst ConnectedDevicesTable = connect(mapStateToProps, mapDispatchToProps)(DevicesTable);\r\n\r\nexport default withStyles(styles)(ConnectedDevicesTable);\r\n","import React, { Component } from 'react';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport { connect } from \"react-redux\";\r\nimport { confirmType, addPatient, fetchMaps, editPatient, updatePatient, fetchPatientCount, updatePatientCount, removePatient, signOutUser, assignBeacon, assignDevices } from \"./actions/index\";\r\nimport Card from '@material-ui/core/Card';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport TemporaryDrawer from './TemporaryDrawer';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport AccountCircle from '@material-ui/icons/AccountCircle';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport classNames from 'classnames';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport Radio from '@material-ui/core/Radio';\r\nimport RadioGroup from '@material-ui/core/RadioGroup';\r\nimport FormLabel from '@material-ui/core/FormLabel';\r\nimport BeaconTable from './BeaconTable';\r\nimport DevicesTable from './DevicesTable';\r\nimport Scanner from './Scanner';\r\nimport Result from './Result';\r\nimport Select from 'react-select';\r\nimport axios from 'axios';\r\nimport NoSsr from '@material-ui/core/NoSsr';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Chip from '@material-ui/core/Chip';\r\nimport CancelIcon from '@material-ui/icons/Cancel';\r\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\r\nimport { fakeDataRef } from \"./firebase/index\"\r\nimport LinearProgress from '@material-ui/core/LinearProgress';\r\n\r\nconst graphqlUrlHTTPS = 'http://137.132.165.139:3000/graphql';\r\n\r\n\r\nconst styles = theme => ({\r\n  container: {\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n  },\r\n  root: {\r\n    flexGrow: 1,\r\n  },\r\n  grow: {\r\n    flexGrow: 1,\r\n  },\r\n  card: {\r\n    minWidth: 275,\r\n    padding: '2rem'\r\n  },\r\n  textField: {\r\n    // marginLeft: theme.spacing.unit,\r\n    // marginRight: theme.spacing.unit,\r\n  },\r\n  borderBox: {\r\n    border: '1px solid',\r\n    padding: '2rem',\r\n    borderRadius: '16px',\r\n  },\r\n  menu: {\r\n    width: 200,\r\n  },\r\n  menuButton: {\r\n    marginLeft: -12,\r\n    marginRight: 20,\r\n    opacity : 0.4,\r\n    color: 'black',\r\n  },\r\n  align: {\r\n    padding: `${theme.spacing.unit * 2}px ${theme.spacing.unit * 3}px ${theme.spacing.unit * 3}px`,\r\n  },\r\n  input: {\r\n    display: 'flex',\r\n    padding: 0,\r\n  },\r\n  valueContainer: {\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n    flex: 1,\r\n    alignItems: 'center',\r\n    overflow: 'hidden',\r\n    padding: '18.5px 14px',\r\n  },\r\n  noOptionsMessage: {\r\n   padding: `${theme.spacing.unit}px ${theme.spacing.unit * 2}px`,\r\n },\r\n singleValue: {\r\n    fontSize: 16,\r\n  },\r\n  placeholder: {\r\n    position: 'absolute',\r\n    left: 2,\r\n    fontSize: 16,\r\n    padding: '18.5px 14px',\r\n  },\r\n  paper: {\r\n    position: 'absolute',\r\n    zIndex: 1,\r\n    marginTop: theme.spacing.unit,\r\n    left: 0,\r\n    right: 0,\r\n  },\r\n  error: {\r\n    borderColor: 'red !important',\r\n  }\r\n});\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    beacon: state.beacon,\r\n    maps: state.maps,\r\n    edit: state.edit,\r\n    devices: state.assignDevices,\r\n    isAuthenticating: state.isAuthenticating,\r\n    authenticated: state.authenticated,\r\n    patientCounter: state.patientCounter\r\n   };\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    confirmType: type => dispatch(confirmType(type)),\r\n    addPatient: patient => dispatch(addPatient(patient)),\r\n    assignDevices: devices => dispatch(assignDevices(devices)),\r\n    editPatient: patient => dispatch(editPatient(patient)),\r\n    removePatient: patient => dispatch(removePatient(patient)),\r\n    fetchMaps: maps => dispatch(fetchMaps(maps)),\r\n    assignBeacon: beacon => dispatch(assignBeacon(beacon)),\r\n    signOutUser: credentials => dispatch(signOutUser(credentials)),\r\n    fetchPatientCount: count => dispatch(fetchPatientCount(count)),\r\n    updatePatientCount: count => dispatch(updatePatientCount(count)),\r\n    updatePatient: patient => dispatch(updatePatient(patient)),\r\n  };\r\n};\r\n\r\nfunction NoOptionsMessage(props) {\r\n  return (\r\n    <Typography\r\n      color=\"textSecondary\"\r\n      className={props.selectProps.classes.noOptionsMessage}\r\n      {...props.innerProps}\r\n    >\r\n      {props.children}\r\n    </Typography>\r\n  );\r\n}\r\n\r\nfunction inputComponent({ inputRef, ...props }) {\r\n  return <div ref={inputRef} {...props} />;\r\n}\r\n\r\nfunction Control(props, state) {\r\n  return (\r\n    <TextField\r\n      fullWidth\r\n      variant=\"outlined\"\r\n      style={{borderColor: 'red !important'}}\r\n      InputProps={{\r\n        inputComponent,\r\n        inputProps: {\r\n          className: props.selectProps.classes.input,\r\n          inputRef: props.innerRef,\r\n          children: props.children,\r\n          ...props.innerProps,\r\n        },\r\n      }}\r\n      required={true}\r\n      error={props.selectProps.error}\r\n      helperText={ props.selectProps.error ? \"This field is required\" : null}\r\n      {...props.selectProps.textFieldProps}\r\n    />\r\n  );\r\n}\r\n\r\nfunction Option(props) {\r\n  return (\r\n    <MenuItem\r\n      buttonRef={props.innerRef}\r\n      selected={props.isFocused}\r\n      component=\"div\"\r\n      style={{\r\n        fontWeight: props.isSelected ? 500 : 400,\r\n      }}\r\n      {...props.innerProps}\r\n    >\r\n      {props.children}\r\n    </MenuItem>\r\n  );\r\n}\r\n\r\nfunction Placeholder(props) {\r\n  return (\r\n    <Typography\r\n      color=\"textSecondary\"\r\n      className={props.selectProps.classes.placeholder}\r\n      {...props.innerProps}\r\n    >\r\n      {props.children}\r\n    </Typography>\r\n  );\r\n}\r\n\r\nfunction SingleValue(props) {\r\n  return (\r\n    <Typography className={props.selectProps.classes.singleValue} {...props.innerProps}>\r\n      {props.children}\r\n    </Typography>\r\n  );\r\n}\r\n\r\nfunction ValueContainer(props) {\r\n  return <div className={props.selectProps.classes.valueContainer}>{props.children}</div>;\r\n}\r\n\r\nfunction MultiValue(props) {\r\n  return (\r\n    <Chip\r\n      tabIndex={-1}\r\n      label={props.children}\r\n      className={classNames(props.selectProps.classes.chip, {\r\n        [props.selectProps.classes.chipFocused]: props.isFocused,\r\n      })}\r\n      onDelete={props.removeProps.onClick}\r\n      deleteIcon={<CancelIcon {...props.removeProps} />}\r\n    />\r\n  );\r\n}\r\n\r\nfunction SubMenu(props) {\r\n  return (\r\n    <Paper square className={props.selectProps.classes.paper} {...props.innerProps}>\r\n      {props.children}\r\n    </Paper>\r\n  );\r\n}\r\n\r\nconst components = {\r\n  Control,\r\n  SubMenu,\r\n  MultiValue,\r\n  NoOptionsMessage,\r\n  Option,\r\n  Placeholder,\r\n  SingleValue,\r\n  ValueContainer,\r\n};\r\n\r\nclass AddPatient extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      anchorEl: null,\r\n      auth: true,\r\n      name: \"\",\r\n      age: \"\",\r\n      race: \"\",\r\n      gender: \"\",\r\n      ward: \"\",\r\n      type: \"Patient\",\r\n      beacon: this.props.beacon,\r\n      scanning: false,\r\n      results: [],\r\n      options: [],\r\n      edit: false,\r\n      editSuccess: false,\r\n      nameError: false,\r\n    };\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if(this.state.editSuccess == false) {\r\n      this.props.editPatient('')\r\n    }\r\n  }\r\n  componentDidMount() {\r\n    this.fetch();\r\n    this.props.fetchPatientCount();\r\n    if(this.props.edit != \"\" && this.props.edit != null) {\r\n      let edit = this.props.edit;\r\n      this.setState({\r\n        name: edit.name,\r\n        age: edit.age,\r\n        race: edit.race,\r\n        gender: edit.gender,\r\n        ward: {value: edit.ward, label: edit.ward},\r\n        edit: true,\r\n      })\r\n    } else {\r\n      this.flushData()\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if(this.state.edit == true && this.props.edit == \"\") {\r\n      this.flushData()\r\n    }\r\n\r\n    if(this.props.isAuthenticating == false && this.props.authenticated == false) {\r\n      this.props.history.push('/');\r\n    }\r\n  }\r\n\r\n  flushData = () => {\r\n    this.setState({\r\n      name: \"\",\r\n      age: \"\",\r\n      race: \"\",\r\n      gender: \"\",\r\n      ward: \"\",\r\n      edit: false,\r\n    })\r\n\r\n    let chosen = \"\"\r\n    this.props.assignBeacon( chosen );\r\n  }\r\n\r\n  createOptions = (maps) => {\r\n\r\n    let options = maps.map((map) => ({\r\n      value: map.id,\r\n      label: map.id,\r\n    }))\r\n\r\n    this.setState({options})\r\n  }\r\n\r\n  fetch = (dispatch) => {\r\n    let query = `\r\n      query {\r\n        maps {\r\n          id\r\n          scale\r\n          coordinates\r\n          imageURL\r\n          navMesh\r\n          navPath\r\n          pois\r\n        }\r\n      }\r\n    `\r\n    this.request({query})\r\n    .then (data => {\r\n      this.props.fetchMaps(data.data.data.maps);\r\n      this.createOptions(data.data.data.maps);\r\n    })\r\n  }\r\n\r\n  crossReferenceData = (result) => {\r\n    fakeDataRef.on(\"value\", snapshot => {\r\n\r\n    let fullShot = snapshot.val()\r\n\r\n    for (const key of Object.keys(fullShot)) {\r\n\r\n      if(key == result.codeResult.code) {\r\n        let name = fullShot[key].name\r\n        let race = fullShot[key].race\r\n        let age = fullShot[key].age\r\n        let gender = fullShot[key].gender\r\n\r\n        this.setState({name, gender, race, age})\r\n        this.forceUpdate()\r\n      }\r\n    }\r\n    });\r\n  }\r\n\r\n  request = ({query, variables}) => {\r\n    let promise = axios({\r\n      method:   'post',\r\n      url:      `${graphqlUrlHTTPS}`,\r\n      headers:  {'Content-Type': 'application/json'},\r\n      data:     JSON.stringify({query, variables})\r\n    })\r\n    return promise;\r\n  }\r\n\r\n  toggleDrawer = () => {\r\n    this.setState({ drawer: true});\r\n  }\r\n\r\n  toggleCloseDrawer = () => {\r\n    this.setState({ drawer: false });\r\n  }\r\n\r\n  handleMenu = event => {\r\n    this.setState({ drawer: false });\r\n    this.setState({ anchorEl: event.currentTarget });\r\n  };\r\n\r\n  handleClose = () => {\r\n    this.setState({ drawer: false });\r\n    this.setState({ anchorEl: null });\r\n  };\r\n\r\n  handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    this.handleClose()\r\n    let errorCheck = false\r\n    const { type } = this.state;\r\n    if(this.state.name == \"\") {\r\n      this.setState({nameError: true})\r\n      errorCheck = true\r\n    }\r\n\r\n    if(this.state.ward.value == null) {\r\n      this.setState({wardError: true})\r\n      errorCheck = true\r\n    }\r\n\r\n    let devices = this.props.devices\r\n    if(devices != null) {\r\n      if(devices[0] != \"None\" && devices.length > 0) {\r\n        let imuCount = 0\r\n        let ecgCount = 0\r\n        let hrCount = 0\r\n        devices.map(device => {\r\n          if(device.id.charAt(0) == 'e') {\r\n            ecgCount += 1\r\n          }\r\n\r\n          if(device.id.charAt(0) == 'h') {\r\n            hrCount += 1\r\n          }\r\n          if(device.id.charAt(0)== 'i') {\r\n            imuCount += 1\r\n          }\r\n        })\r\n\r\n        if(imuCount > 1 | ecgCount > 1 | hrCount > 1) {\r\n          errorCheck = true\r\n        }\r\n      }\r\n    }\r\n    if(errorCheck)\r\n      return\r\n\r\n    if(devices == null) {\r\n      devices = [\"None\"]\r\n    }\r\n    let patient = {\r\n      name: this.state.name,\r\n      age: this.state.age,\r\n      race: this.state.race,\r\n      gender: this.state.gender,\r\n      ward: this.state.ward.value,\r\n      beacon: this.props.beacon,\r\n      devices: devices,\r\n      highlight: false,\r\n    }\r\n    let confirm = {\r\n      name: this.state.name,\r\n      age: this.state.age,\r\n      race: this.state.race,\r\n      gender: this.state.gender,\r\n      ward: this.state.ward.value,\r\n      beacon: this.props.beacon,\r\n      devices: devices,\r\n      type: type}\r\n      if(this.state.edit) {\r\n        patient.id = this.props.edit.id\r\n        this.props.updatePatient(patient)\r\n        this.setState({editSuccess: true})\r\n      } else {\r\n        this.props.updatePatientCount(this.props.patientCounter.count)\r\n        this.props.addPatient(patient);\r\n      }\r\n\r\n    this.props.confirmType({ confirm })\r\n\r\n\r\n    let chosenBeacon = \"None\"\r\n    let chosen = [\"None\"]\r\n    this.props.assignBeacon( chosenBeacon );\r\n    this.props.assignDevices(chosen);\r\n    this.props.history.push('/addConfirmation');\r\n\r\n  }\r\n\r\n  handleLoading = () => {\r\n    this.setState(state => ({\r\n      loading: !state.loading,\r\n    }))\r\n  }\r\n  removePatient = () => {\r\n    this.props.removePatient(this.props.edit)\r\n    this.props.history.push('/locationTracking')\r\n  }\r\n  handleLogOut = () => {\r\n    this.handleClose()\r\n    this.props.signOutUser()\r\n  }\r\n\r\n  handleChange = prop => event => {\r\n    if(prop == \"ward\")\r\n      this.setState({ [prop]: event });\r\n    else {\r\n      this.setState({ [prop]: event.target.value });\r\n    }\r\n  };\r\n\r\n  cancel = () => {\r\n    this.props.editPatient('')\r\n    if(this.state.edit) {\r\n      this.props.history.push('/locationTracking')\r\n    } else\r\n      this.props.history.push('/home');\r\n\r\n  }\r\n\r\n  _scan = () => {\r\n\r\n        this.setState({scanning: !this.state.scanning});\r\n    }\r\n\r\n    _onDetected = (result) => {\r\n        let results = this.state.results;\r\n        if(results.indexOf(result) < 0) {\r\n          this.setState({results: [result]});\r\n          this.crossReferenceData(result)\r\n          this._scan()\r\n        }\r\n    }\r\n\r\n\r\n  render() {\r\n\r\n    const { classes, theme } = this.props;\r\n    const { anchorEl, auth } = this.state;\r\n    const open = Boolean(anchorEl)\r\n    const races = ['Chinese', 'Malay', 'Indian', 'Others'];\r\n\r\n    const selectStyles = {\r\n      input: base => ({\r\n        ...base,\r\n        color: theme.palette.text.primary,\r\n        cursor: 'pointer',\r\n        '& input': {\r\n          font: 'inherit',\r\n        },\r\n      }),\r\n    };\r\n\r\n    if(this.props.isAuthenticating) {\r\n      return <LinearProgress />\r\n    } else\r\n    return (\r\n      <div className={classes.root}>\r\n        <AppBar position=\"static\" style={{boxShadow: \"none\", backgroundColor: \"white\"}}>\r\n          <Toolbar>\r\n            <IconButton className={classes.menuButton} color=\"inherit\" aria-label=\"Menu\" onClick={this.toggleDrawer}>\r\n              <MenuIcon />\r\n            </IconButton>\r\n            <Typography variant=\"title\" className={classes.grow} style={{color: \"black\"}}>\r\n              {this.state.edit ? 'Edit': 'Add'} Patient\r\n            </Typography>\r\n            {auth && (\r\n                <div>\r\n                  <IconButton\r\n                    aria-owns={open ? 'menu-appbar' : null}\r\n                    aria-haspopup=\"true\"\r\n                    onClick={this.handleMenu}\r\n                    color=\"inherit\"\r\n                  >\r\n                    <AccountCircle style={{color: \"black\"}} />\r\n                  </IconButton>\r\n                  <Menu\r\n                    id=\"menu-appbar\"\r\n                    anchorEl={anchorEl}\r\n                    anchorOrigin={{\r\n                      vertical: 'top',\r\n                      horizontal: 'right',\r\n                    }}\r\n                    transformOrigin={{\r\n                      vertical: 'top',\r\n                      horizontal: 'right',\r\n                    }}\r\n                    open={open}\r\n                    onClose={this.handleClose}\r\n                  >\r\n                    <MenuItem onClick={this.handleLogOut}>Logout</MenuItem>\r\n                  </Menu>\r\n                </div>\r\n              )}\r\n          </Toolbar>\r\n        </AppBar>\r\n        <ClickAwayListener onClickAway={this.toggleCloseDrawer}>\r\n          <TemporaryDrawer toggle={this.state.drawer} />\r\n        </ClickAwayListener>\r\n        <form className={classes.align} onSubmit={this.handleSubmit}>\r\n          <Grid container\r\n            direction=\"column\"\r\n            spacing={0}\r\n            alignItems=\"center\"\r\n            style={{ minHeight: '75vh'}}>\r\n            <Grid item xs={12}>\r\n              <div className={classes.layout}>\r\n              <Grid container>\r\n                <Grid item xs={6}>\r\n                  <Typography variant=\"h4\" gutterBottom>Patient</Typography>\r\n                </Grid>\r\n                <Grid item xs={6} style={{margin: 'auto'}}>\r\n                  {this.state.edit ? <Button variant=\"outlined\" onClick={this.removePatient} style={{float: 'right'}}> Delete </Button> : null}\r\n                </Grid>\r\n              </Grid>\r\n              <Typography variant=\"h6\" gutterBottom>Barcode Scan</Typography>\r\n              <Button variant=\"outlined\" onClick={this._scan}>{this.state.scanning ? 'Stop' : 'Start'}</Button>\r\n                {this.state.results.map((result) => (<Result key={result.codeResult.code} result={result} />))}\r\n                {this.state.scanning ? <Scanner onDetected={this._onDetected}/> : null}\r\n              <FormControl margin=\"normal\" required fullWidth>\r\n                <TextField\r\n                  label=\"Name\"\r\n                  placeholder=\"Name\"\r\n                  autoComplete=\"name\"\r\n                  variant=\"outlined\"\r\n                  autoFocus = {this.state.results[0] != null ? true : false}\r\n                  value={this.state.name}\r\n                  fullWidth\r\n                  className={classes.textField}\r\n                  onChange = {(e) => this.setState({name:e.target.value})}\r\n                  required = {true}\r\n                  error={this.state.nameError}\r\n                  helperText={this.state.nameError ? \"This field is required\" : null}\r\n                />\r\n              </FormControl>\r\n            </div>\r\n            <Grid container\r\n              direction=\"row\"\r\n              spacing={24}\r\n              alignItems=\"center\"\r\n            >\r\n              <Grid item xs={6}>\r\n                <FormControl margin=\"normal\" required>\r\n                  <TextField\r\n                    id=\"outlined-adornment-age\"\r\n                    className={classNames(classes.margin, classes.textField)}\r\n                    variant=\"outlined\"\r\n                    label=\"Age\"\r\n                    value={this.state.age}\r\n                    onChange={this.handleChange('age')}\r\n                    InputProps={{\r\n                      endAdornment: <InputAdornment position=\"end\">Years Old</InputAdornment>,\r\n                    }}\r\n                  />\r\n                </FormControl>\r\n              </Grid>\r\n              <Grid item xs={6} style={{textAlign: 'center'}}>\r\n                <FormControl component=\"fieldset\" margin=\"normal\" className={classes.formControl}>\r\n                  <FormLabel component=\"legend\">Gender</FormLabel>\r\n                  <RadioGroup\r\n                    aria-label=\"Gender\"\r\n                    name=\"gender1\"\r\n                    row ={true}\r\n                    className={classNames(classes.margin, classes.textField, classes.group)}\r\n                    value={this.state.gender}\r\n                    onChange={this.handleChange('gender')}\r\n                    >\r\n                    <FormControlLabel value=\"male\" control={<Radio />} label=\"Male\" />\r\n                    <FormControlLabel value=\"female\" control={<Radio />} label=\"Female\" />\r\n                  </RadioGroup>\r\n                </FormControl>\r\n              </Grid>\r\n            </Grid>\r\n            <Grid container\r\n              direction=\"row\"\r\n              spacing={0}\r\n              alignItems=\"center\"\r\n            >\r\n              <Grid item xs={12}>\r\n                <FormControl required fullWidth>\r\n                  <TextField\r\n                    id=\"outlined-select-race\"\r\n                    select\r\n                    label=\"Race\"\r\n                    className={classes.textField}\r\n                    value={this.state.race}\r\n                    onChange={this.handleChange('race')}\r\n                    SelectProps={{\r\n                      MenuProps: {\r\n                        className: classes.menu,\r\n                      },\r\n                    }}\r\n                    margin=\"normal\"\r\n                    variant=\"outlined\"\r\n                  >\r\n                    {races.map(race => (\r\n                      <MenuItem key={race} value={race}>\r\n                        {race}\r\n                      </MenuItem>\r\n                    ))}\r\n                  </TextField>\r\n                </FormControl>\r\n                <FormControl margin=\"normal\" required fullWidth>\r\n                  <NoSsr>\r\n                    <Select\r\n                      classes={classes}\r\n                      styles={selectStyles}\r\n                      options={this.state.options}\r\n                      components={components}\r\n                      value={this.state.ward}\r\n                      onChange={this.handleChange('ward')}\r\n                      placeholder=\"Ward*\"\r\n                      isClearable\r\n                      error={this.state.wardError}\r\n                    />\r\n                  </NoSsr>\r\n                </FormControl>\r\n                <BeaconTable />\r\n                <DevicesTable />\r\n              </Grid>\r\n            </Grid>\r\n\r\n            <br/>\r\n            <div style={{ textAlign: 'center', paddingTop: '1rem'}}>\r\n              <Button type='submit' variant=\"contained\" color=\"primary\">\r\n                Submit\r\n              </Button>\r\n              <Button style={{marginLeft: '3em'}} onClick={this.cancel}>\r\n                Cancel\r\n              </Button>\r\n            </div>\r\n            </Grid>\r\n          </Grid>\r\n        </form>\r\n      </div>\r\n\r\n    )\r\n\r\n  }\r\n}\r\n\r\nconst ConnectedAddPatient = connect(mapStateToProps, mapDispatchToProps)(AddPatient);\r\n\r\nexport default withStyles(styles, {withTheme: true})(ConnectedAddPatient);\r\n","import React, { Component } from 'react';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport { connect } from \"react-redux\";\r\nimport { addAsset, confirmType, fetchMaps, updateAsset, updateAssetCount, fetchAssetCount, removeAsset, assignBeacon, editPatient, signOutUser } from \"./actions/index\";\r\nimport Card from '@material-ui/core/Card';\r\nimport CardMedia from '@material-ui/core/CardMedia';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport TemporaryDrawer from './TemporaryDrawer';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport AccountCircle from '@material-ui/icons/AccountCircle';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport classNames from 'classnames';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport Radio from '@material-ui/core/Radio';\r\nimport RadioGroup from '@material-ui/core/RadioGroup';\r\nimport FormLabel from '@material-ui/core/FormLabel';\r\nimport BeaconTable from './BeaconTable';\r\nimport CameraIcon from '@material-ui/icons/PhotoCamera';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport Select from 'react-select';\r\nimport axios from 'axios';\r\nimport NoSsr from '@material-ui/core/NoSsr';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Chip from '@material-ui/core/Chip';\r\nimport LinearProgress from '@material-ui/core/LinearProgress';\r\nimport CancelIcon from '@material-ui/icons/Cancel';\r\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\r\n\r\nconst graphqlUrlHTTPS = 'http://137.132.165.139:3000/graphql';\r\n\r\nconst styles = theme => ({\r\n  container: {\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n  },\r\n  root: {\r\n    flexGrow: 1,\r\n  },\r\n  grow: {\r\n    flexGrow: 1,\r\n  },\r\n  card: {\r\n    minWidth: 275,\r\n    padding: '2rem'\r\n  },\r\n  textField: {\r\n    // marginLeft: theme.spacing.unit,\r\n    // marginRight: theme.spacing.unit,\r\n  },\r\n  borderBox: {\r\n    border: '1px solid',\r\n    padding: '2rem',\r\n    borderRadius: '16px',\r\n  },\r\n  menu: {\r\n    width: 200,\r\n  },\r\n  menuButton: {\r\n    marginLeft: -12,\r\n    marginRight: 20,\r\n    opacity : 0.4,\r\n    color: 'black',\r\n  },\r\n  align: {\r\n    padding: `${theme.spacing.unit * 2}px ${theme.spacing.unit * 3}px ${theme.spacing.unit * 3}px`,\r\n  },\r\n  label: {\r\n    textTransform: 'capitalize',\r\n  },\r\n  cameraIcon: {\r\n    opacity: '0.5',\r\n    paddingLeft: '10px'\r\n  },\r\n  cardContent: {\r\n    paddingBottom: '16px'\r\n  },\r\n  input: {\r\n    display: 'flex',\r\n    padding: 0,\r\n  },\r\n  valueContainer: {\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n    flex: 1,\r\n    alignItems: 'center',\r\n    overflow: 'hidden',\r\n    padding: '18.5px 14px',\r\n  },\r\n  noOptionsMessage: {\r\n   padding: `${theme.spacing.unit}px ${theme.spacing.unit * 2}px`,\r\n },\r\n singleValue: {\r\n    fontSize: 16,\r\n  },\r\n  placeholder: {\r\n    position: 'absolute',\r\n    left: 2,\r\n    fontSize: 16,\r\n    padding: '18.5px 14px',\r\n  },\r\n  paper: {\r\n    position: 'absolute',\r\n    zIndex: 1,\r\n    marginTop: theme.spacing.unit,\r\n    left: 0,\r\n    right: 0,\r\n  },\r\n});\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    beacon: state.beacon,\r\n    maps: state.maps,\r\n    edit: state.edit,\r\n    isAuthenticating: state.isAuthenticating,\r\n    authenticated: state.authenticated,\r\n    assetCounter: state.assetCounter\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    confirmType: type => dispatch(confirmType(type)),\r\n    addAsset: asset => dispatch(addAsset(asset)),\r\n    removeAsset: asset => dispatch(removeAsset(asset)),\r\n    fetchMaps: maps => dispatch(fetchMaps(maps)),\r\n    assignBeacon: beacon => dispatch(assignBeacon(beacon)),\r\n    editPatient: patient => dispatch(editPatient(patient)),\r\n    signOutUser: credentials => dispatch(signOutUser(credentials)),\r\n    fetchAssetCount: count => dispatch(fetchAssetCount(count)),\r\n    updateAssetCount: count => dispatch(updateAssetCount(count)),\r\n    updateAsset: asset => dispatch(updateAsset(asset)),\r\n  };\r\n};\r\n\r\nfunction NoOptionsMessage(props) {\r\n  return (\r\n    <Typography\r\n      color=\"textSecondary\"\r\n      className={props.selectProps.classes.noOptionsMessage}\r\n      {...props.innerProps}\r\n    >\r\n      {props.children}\r\n    </Typography>\r\n  );\r\n}\r\n\r\nfunction inputComponent({ inputRef, ...props }) {\r\n  return <div ref={inputRef} {...props} />;\r\n}\r\n\r\nfunction Control(props) {\r\n  return (\r\n    <TextField\r\n      fullWidth\r\n      variant=\"outlined\"\r\n      required={true}\r\n      error={props.selectProps.error}\r\n      helperText={ props.selectProps.error ? \"This field is required\" : null}\r\n      InputProps={{\r\n        inputComponent,\r\n        inputProps: {\r\n          className: props.selectProps.classes.input,\r\n          inputRef: props.innerRef,\r\n          children: props.children,\r\n          ...props.innerProps,\r\n        },\r\n      }}\r\n      {...props.selectProps.textFieldProps}\r\n    />\r\n  );\r\n}\r\n\r\nfunction Option(props) {\r\n  return (\r\n    <MenuItem\r\n      buttonRef={props.innerRef}\r\n      selected={props.isFocused}\r\n      component=\"div\"\r\n      style={{\r\n        fontWeight: props.isSelected ? 500 : 400,\r\n      }}\r\n      {...props.innerProps}\r\n    >\r\n      {props.children}\r\n    </MenuItem>\r\n  );\r\n}\r\n\r\nfunction Placeholder(props) {\r\n  return (\r\n    <Typography\r\n      color=\"textSecondary\"\r\n      className={props.selectProps.classes.placeholder}\r\n      {...props.innerProps}\r\n    >\r\n      {props.children}\r\n    </Typography>\r\n  );\r\n}\r\n\r\nfunction SingleValue(props) {\r\n  return (\r\n    <Typography className={props.selectProps.classes.singleValue} {...props.innerProps}>\r\n      {props.children}\r\n    </Typography>\r\n  );\r\n}\r\n\r\nfunction ValueContainer(props) {\r\n  return <div className={props.selectProps.classes.valueContainer}>{props.children}</div>;\r\n}\r\n\r\nfunction MultiValue(props) {\r\n  return (\r\n    <Chip\r\n      tabIndex={-1}\r\n      label={props.children}\r\n      className={classNames(props.selectProps.classes.chip, {\r\n        [props.selectProps.classes.chipFocused]: props.isFocused,\r\n      })}\r\n      onDelete={props.removeProps.onClick}\r\n      deleteIcon={<CancelIcon {...props.removeProps} />}\r\n    />\r\n  );\r\n}\r\n\r\nfunction SubMenu(props) {\r\n  return (\r\n    <Paper square className={props.selectProps.classes.paper} {...props.innerProps}>\r\n      {props.children}\r\n    </Paper>\r\n  );\r\n}\r\n\r\nconst components = {\r\n  Control,\r\n  SubMenu,\r\n  MultiValue,\r\n  NoOptionsMessage,\r\n  Option,\r\n  Placeholder,\r\n  SingleValue,\r\n  ValueContainer,\r\n};\r\n\r\nclass AddAsset extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      anchorEl: null,\r\n      auth: true,\r\n      name: \"\",\r\n      owner: \"\",\r\n      image: \"\",\r\n      imagePreview: \"\",\r\n      imageName: \"\",\r\n      ward: \"\",\r\n      type: \"Asset\",\r\n      beacon: this.props.beacon,\r\n      nameError: false,\r\n      wardError: false,\r\n      editSuccess: false,\r\n    };\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if(this.state.editSuccess == false) {\r\n      this.props.editPatient('')\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.fetch();\r\n    this.props.fetchAssetCount()\r\n    if(this.props.edit != \"\" && this.props.edit != null) {\r\n      let edit = this.props.edit;\r\n      this.setState({\r\n        name: edit.name,\r\n        owner: edit.owner,\r\n        image: edit.image,\r\n        imageName: edit.imageName,\r\n        ward: {value: edit.ward, label: edit.ward},\r\n        edit: true,\r\n      })\r\n    } else {\r\n      this.flushData()\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if(this.state.edit == true && this.props.edit == \"\") {\r\n      this.flushData()\r\n    }\r\n\r\n    if(this.props.isAuthenticating == false && this.props.authenticated == false) {\r\n      this.props.history.push('/');\r\n    }\r\n  }\r\n\r\n  flushData = () => {\r\n    this.setState({\r\n      name: \"\",\r\n      owner: \"\",\r\n      image: \"\",\r\n      imageName: \"\",\r\n      ward: \"\",\r\n      edit: false,\r\n    })\r\n    let chosen = \"\"\r\n    this.props.assignBeacon( chosen );\r\n  }\r\n  createOptions = (maps) => {\r\n    let options = maps.map((map) => ({\r\n      value: map.id,\r\n      label: map.id,\r\n    }))\r\n\r\n    this.setState({options})\r\n  }\r\n\r\n  fetch = (dispatch) => {\r\n    let query = `\r\n      query {\r\n        maps {\r\n          id\r\n          scale\r\n          coordinates\r\n          imageURL\r\n          navMesh\r\n          navPath\r\n          pois\r\n        }\r\n      }\r\n    `\r\n    this.request({query})\r\n    .then (data => {\r\n      this.props.fetchMaps(data.data.data.maps);\r\n      this.createOptions(data.data.data.maps);\r\n    })\r\n  }\r\n\r\n  request = ({query, variables}) => {\r\n    let promise = axios({\r\n      method:   'post',\r\n      url:      `${graphqlUrlHTTPS}`,\r\n      headers:  {'Content-Type': 'application/json'},\r\n      data:     JSON.stringify({query, variables})\r\n    })\r\n    return promise;\r\n  }\r\n\r\n  toggleDrawer = () => {\r\n    this.setState({ drawer: true});\r\n  }\r\n\r\n  toggleCloseDrawer = () => {\r\n    this.setState({drawer: false})\r\n  }\r\n\r\n  handleMenu = event => {\r\n    this.setState({ drawer: false });\r\n    this.setState({ anchorEl: event.currentTarget });\r\n  };\r\n\r\n  handleClose = () => {\r\n    this.setState({ drawer: false });\r\n    this.setState({ anchorEl: null });\r\n  };\r\n\r\n  handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    const { type } = this.state;\r\n    this.handleClose()\r\n    let errorCheck = false\r\n\r\n    if(this.state.name == \"\") {\r\n      this.setState({nameError: true})\r\n      errorCheck = true\r\n    }\r\n\r\n    if(this.state.ward.value == null) {\r\n      this.setState({wardError: true})\r\n      errorCheck = true\r\n    }\r\n\r\n    if(errorCheck)\r\n      return\r\n    let asset = {\r\n      name: this.state.name,\r\n      image: this.state.image,\r\n      imageName: this.state.imageName,\r\n      owner: this.state.owner,\r\n      ward: this.state.ward.value,\r\n      beacon: this.props.beacon,\r\n      highlight: false,\r\n     }\r\n    let confirm = {\r\n      name: this.state.name,\r\n      image: this.state.image,\r\n      imageName: this.state.imageName,\r\n      owner: this.state.owner,\r\n      ward: this.state.ward.value,\r\n      beacon: this.props.beacon,\r\n      type: type}\r\n    if(this.state.edit) {\r\n      asset.id = this.props.edit.id\r\n      this.props.updateAsset(asset)\r\n      this.setState({editSuccess: true})\r\n    } else {\r\n      this.props.updateAssetCount(this.props.assetCounter.count)\r\n      this.props.addAsset(asset);\r\n    }\r\n    this.props.confirmType({ confirm })\r\n\r\n    let chosenBeacon = \"None\"\r\n    this.props.assignBeacon( chosenBeacon );\r\n    this.props.history.push('/addConfirmation');\r\n\r\n  }\r\n\r\n  removeAsset = () => {\r\n    this.props.removeAsset(this.props.edit)\r\n    this.props.history.push('/locationTracking')\r\n  }\r\n\r\n  handleLoading = () => {\r\n    this.setState(state => ({\r\n      loading: !state.loading,\r\n    }))\r\n  }\r\n\r\n  handleChange = prop => event => {\r\n    if(prop == \"ward\")\r\n      this.setState({ [prop]: event });\r\n    else\r\n      this.setState({ [prop]: event.target.value });\r\n  };\r\n\r\n  imageUpload = (e) => {\r\n\r\n    if(e.target.files[0]) {\r\n      const image = e.target.files[0];\r\n      this.setState({image})\r\n      this.setState({imagePreview : URL.createObjectURL(e.target.files[0])})\r\n      this.setState({imageName : image.name})\r\n    }\r\n\r\n  }\r\n\r\n  removeImage = () => {\r\n    this.setState({image : \"\"});\r\n    this.setState({imagePreview : \"\"});\r\n    this.setState({imageName: \"\"});\r\n  }\r\n\r\n  handleLogOut = () => {\r\n    this.handleClose()\r\n    this.props.signOutUser()\r\n  }\r\n\r\n  cancel = () => {\r\n    if(this.state.edit) {\r\n      this.props.history.push('/locationTracking')\r\n    } else\r\n      this.props.history.push('/home');\r\n  }\r\n  render() {\r\n\r\n    const { classes, theme } = this.props;\r\n    const { anchorEl, auth } = this.state;\r\n    const open = Boolean(anchorEl)\r\n    const races = ['Chinese', 'Malay', 'Indian', 'Others'];\r\n    let imagePreview = this.state.imagePreview;\r\n    let imageName = this.state.imageName;\r\n\r\n    const selectStyles = {\r\n      input: base => ({\r\n        ...base,\r\n        color: theme.palette.text.primary,\r\n        '& input': {\r\n          font: 'inherit',\r\n        },\r\n      }),\r\n    };\r\n    // <CardMedia style={{height:'40vh'}} image={imagePreview} />\r\n    // <CardContent>\r\n    // <Typography component=\"p\">{imageName}</Typography>\r\n    // </CardContent>\r\n    if(this.props.isAuthenticating) {\r\n      return <LinearProgress />\r\n    } else\r\n    return (\r\n      <div className={classes.root}>\r\n        <AppBar position=\"static\" style={{boxShadow: \"none\", backgroundColor: \"white\"}}>\r\n          <Toolbar>\r\n            <IconButton className={classes.menuButton} color=\"inherit\" aria-label=\"Menu\" onClick={this.toggleDrawer}>\r\n              <MenuIcon />\r\n            </IconButton>\r\n            <Typography variant=\"title\" className={classes.grow} style={{color: \"black\"}}>\r\n              {this.state.edit ? 'Edit' : 'Add'} Asset\r\n            </Typography>\r\n            {auth && (\r\n                <div>\r\n                  <IconButton\r\n                    aria-owns={open ? 'menu-appbar' : null}\r\n                    aria-haspopup=\"true\"\r\n                    onClick={this.handleMenu}\r\n                    color=\"inherit\"\r\n                  >\r\n                    <AccountCircle style={{color: \"black\"}} />\r\n                  </IconButton>\r\n                  <Menu\r\n                    id=\"menu-appbar\"\r\n                    anchorEl={anchorEl}\r\n                    anchorOrigin={{\r\n                      vertical: 'top',\r\n                      horizontal: 'right',\r\n                    }}\r\n                    transformOrigin={{\r\n                      vertical: 'top',\r\n                      horizontal: 'right',\r\n                    }}\r\n                    open={open}\r\n                    onClose={this.handleClose}\r\n                  >\r\n                    <MenuItem onClick={this.handleLogOut}>Logout</MenuItem>\r\n                  </Menu>\r\n                </div>\r\n              )}\r\n          </Toolbar>\r\n        </AppBar>\r\n        <ClickAwayListener onClickAway={this.toggleCloseDrawer}>\r\n          <TemporaryDrawer toggle={this.state.drawer} />\r\n        </ClickAwayListener>\r\n          <form className={classes.align}>\r\n          <Grid container\r\n            direction=\"column\"\r\n            spacing={0}\r\n            alignItems=\"center\"\r\n            style={{ minHeight: '75vh'}}>\r\n            <Grid item xs={12}>\r\n              <div className={classes.layout}>\r\n                <Grid container>\r\n                  <Grid item xs={6}>\r\n                    <Typography variant=\"h4\" gutterBottom>Asset</Typography>\r\n                  </Grid>\r\n                  <Grid item xs={6} style={{margin: 'auto'}}>\r\n                    {this.state.edit ? <Button variant=\"outlined\" onClick={this.removeAsset} style={{float: 'right'}}> Delete </Button> : null}\r\n                  </Grid>\r\n                </Grid>\r\n                <FormControl margin=\"normal\" required fullWidth>\r\n                  <TextField\r\n                    label=\"Name\"\r\n                    placeholder=\"Name\"\r\n                    autoComplete=\"name\"\r\n                    variant=\"outlined\"\r\n                    fullWidth\r\n                    value={this.state.name}\r\n                    className={classes.textField}\r\n                    required = {true}\r\n                    error={this.state.nameError}\r\n                    helperText={this.state.nameError ? \"This field is required\" : null}\r\n                    onChange = {(e) => this.setState({name:e.target.value})}\r\n                  />\r\n                </FormControl>\r\n                <Typography variant=\"h6\" gutterBottom>Photo</Typography>\r\n                { this.state.image == \"\" ?\r\n                <Card style={{width: '100%'}}>\r\n                  <label htmlFor=\"raised-button-file\">\r\n                    <Button raised=\"true\" component=\"span\" style={{height:'35vh', width: '100%'}}className={classes.button}>\r\n                      <Typography variant=\"h5\" gutterBottom className={classes.label}>  Take A Photo </Typography>\r\n                      <CameraIcon className={classes.cameraIcon}/>\r\n                    </Button>\r\n                  </label>\r\n                </Card> :\r\n                <Card>\r\n                  <CardMedia style={{height:'35vh', backgroundSize:'contain'}} image={imagePreview} />\r\n                  <CardContent className={classes.cardContent}>\r\n                    <Grid container\r\n                      direction=\"row\"\r\n                      alignItems=\"center\"\r\n                    >\r\n                      <Grid item xs={9}>\r\n                        <Typography variant=\"subtitle2\">{imageName}</Typography>\r\n                      </Grid>\r\n                      <Grid item xs={3}>\r\n                        <label htmlFor=\"raised-button-file\">\r\n                          <IconButton color=\"primary\" className={classes.button} component=\"span\">\r\n                            <CameraIcon />\r\n                          </IconButton>\r\n                        </label>\r\n\r\n                        <IconButton className={classes.button} aria-label=\"Delete\" onClick={this.removeImage}>\r\n                          <DeleteIcon />\r\n                        </IconButton>\r\n                      </Grid>\r\n                    </Grid>\r\n                  </CardContent>\r\n                  <CardActions style={{display: 'none'}}/>\r\n                </Card>\r\n                }\r\n\r\n                <input\r\n                  accept=\"image/*\"\r\n                  className={classes.input}\r\n                  style={{display: 'none'}}\r\n                  id=\"raised-button-file\"\r\n                  type=\"file\"\r\n                  onChange={this.imageUpload}\r\n                  onClick={(event)=> {\r\n                    event.target.value = null\r\n                  }}\r\n                />\r\n              </div>\r\n            <Grid container\r\n              direction=\"row\"\r\n              spacing={0}\r\n              alignItems=\"center\"\r\n            >\r\n              <Grid item xs={12}>\r\n                <FormControl margin=\"normal\" required fullWidth>\r\n                  <TextField\r\n                    label=\"Owner\"\r\n                    placeholder=\"Owner\"\r\n                    variant=\"outlined\"\r\n                    fullWidth\r\n                    value={this.state.owner}\r\n                    className={classes.textField}\r\n                    onChange = {this.handleChange('owner')}\r\n                  />\r\n                </FormControl>\r\n                <FormControl margin=\"normal\" required fullWidth>\r\n                  <NoSsr>\r\n                    <Select\r\n                      classes={classes}\r\n                      styles={selectStyles}\r\n                      options={this.state.options}\r\n                      components={components}\r\n                      value={this.state.ward}\r\n                      onChange={this.handleChange('ward')}\r\n                      error={this.state.wardError}\r\n                      placeholder=\"Ward*\"\r\n                      isClearable\r\n                    />\r\n                  </NoSsr>\r\n                </FormControl>\r\n                <BeaconTable />\r\n              </Grid>\r\n            </Grid>\r\n            <br/>\r\n            <div style={{ textAlign: 'center', paddingTop: '1rem'}}>\r\n              <Button variant=\"contained\" color=\"primary\" onClick={(event) => this.handleSubmit(event)}>\r\n                Submit\r\n              </Button>\r\n              <Button style={{marginLeft: '3em'}} onClick={this.cancel}>\r\n                Cancel\r\n              </Button>\r\n            </div>\r\n            </Grid>\r\n          </Grid>\r\n          </form>\r\n        </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst ConnectedAddAsset = connect(mapStateToProps, mapDispatchToProps)(AddAsset);\r\n\r\nexport default withStyles(styles, {withTheme: true})(ConnectedAddAsset);\r\n","import React, { Component } from 'react';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport { connect } from \"react-redux\";\r\nimport { addStaff, confirmType, fetchMaps, updateStaff, updateStaffCount, fetchStaffCount, editPatient, removeStaff, signOutUser, assignBeacon } from \"./actions/index\";\r\nimport Card from '@material-ui/core/Card';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport TemporaryDrawer from './TemporaryDrawer';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport AccountCircle from '@material-ui/icons/AccountCircle';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport classNames from 'classnames';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport Radio from '@material-ui/core/Radio';\r\nimport RadioGroup from '@material-ui/core/RadioGroup';\r\nimport FormLabel from '@material-ui/core/FormLabel';\r\nimport BeaconTable from './BeaconTable';\r\nimport Select from 'react-select';\r\nimport axios from 'axios';\r\nimport NoSsr from '@material-ui/core/NoSsr';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Chip from '@material-ui/core/Chip';\r\nimport CancelIcon from '@material-ui/icons/Cancel';\r\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\r\nimport LinearProgress from '@material-ui/core/LinearProgress';\r\n\r\nconst graphqlUrlHTTPS = 'http://137.132.165.139:3000/graphql';\r\n\r\n\r\nconst styles = theme => ({\r\n  container: {\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n  },\r\n  root: {\r\n    flexGrow: 1,\r\n  },\r\n  grow: {\r\n    flexGrow: 1,\r\n  },\r\n  card: {\r\n    minWidth: 275,\r\n    padding: '2rem'\r\n  },\r\n  textField: {\r\n    // marginLeft: theme.spacing.unit,\r\n    // marginRight: theme.spacing.unit,\r\n  },\r\n  borderBox: {\r\n    border: '1px solid',\r\n    padding: '2rem',\r\n    borderRadius: '16px',\r\n  },\r\n  menu: {\r\n    width: 200,\r\n  },\r\n  menuButton: {\r\n    marginLeft: -12,\r\n    marginRight: 20,\r\n    opacity : 0.4,\r\n    color: 'black',\r\n  },\r\n  align: {\r\n    padding: `${theme.spacing.unit * 2}px ${theme.spacing.unit * 3}px ${theme.spacing.unit * 3}px`,\r\n  },\r\n  input: {\r\n    display: 'flex',\r\n    padding: 0,\r\n  },\r\n  valueContainer: {\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n    flex: 1,\r\n    alignItems: 'center',\r\n    overflow: 'hidden',\r\n    padding: '18.5px 14px',\r\n  },\r\n  noOptionsMessage: {\r\n   padding: `${theme.spacing.unit}px ${theme.spacing.unit * 2}px`,\r\n },\r\n singleValue: {\r\n    fontSize: 16,\r\n  },\r\n  placeholder: {\r\n    position: 'absolute',\r\n    left: 2,\r\n    fontSize: 16,\r\n    padding: '18.5px 14px',\r\n  },\r\n  paper: {\r\n    position: 'absolute',\r\n    zIndex: 1,\r\n    marginTop: theme.spacing.unit,\r\n    left: 0,\r\n    right: 0,\r\n  },\r\n});\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    beacon: state.beacon,\r\n    maps: state.maps,\r\n    edit: state.edit,\r\n    isAuthenticating: state.isAuthenticating,\r\n    authenticated: state.authenticated,\r\n    staffCounter: state.staffCounter\r\n   };\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    confirmType: type => dispatch(confirmType(type)),\r\n    addStaff: staff => dispatch(addStaff(staff)),\r\n    fetchMaps: maps => dispatch(fetchMaps(maps)),\r\n    assignBeacon: beacon => dispatch(assignBeacon(beacon)),\r\n    removeStaff: staff => dispatch(removeStaff(staff)),\r\n    editPatient: patient => dispatch(editPatient(patient)),\r\n    signOutUser: credentials => dispatch(signOutUser(credentials)),\r\n    fetchStaffCount: count => dispatch(fetchStaffCount(count)),\r\n    updateStaffCount: count => dispatch(updateStaffCount(count)),\r\n    updateStaff: staff => dispatch(updateStaff(staff)),\r\n  };\r\n};\r\n\r\nfunction NoOptionsMessage(props) {\r\n  return (\r\n    <Typography\r\n      color=\"textSecondary\"\r\n      className={props.selectProps.classes.noOptionsMessage}\r\n      {...props.innerProps}\r\n    >\r\n      {props.children}\r\n    </Typography>\r\n  );\r\n}\r\n\r\nfunction inputComponent({ inputRef, ...props }) {\r\n  return <div ref={inputRef} {...props} />;\r\n}\r\n\r\nfunction Control(props) {\r\n  return (\r\n    <TextField\r\n      fullWidth\r\n      variant=\"outlined\"\r\n      required={true}\r\n      error={props.selectProps.error}\r\n      helperText={ props.selectProps.error ? \"This field is required\" : null}\r\n      InputProps={{\r\n        inputComponent,\r\n        inputProps: {\r\n          className: props.selectProps.classes.input,\r\n          inputRef: props.innerRef,\r\n          children: props.children,\r\n          ...props.innerProps,\r\n        },\r\n      }}\r\n      {...props.selectProps.textFieldProps}\r\n    />\r\n  );\r\n}\r\n\r\nfunction Option(props) {\r\n  return (\r\n    <MenuItem\r\n      buttonRef={props.innerRef}\r\n      selected={props.isFocused}\r\n      component=\"div\"\r\n      style={{\r\n        fontWeight: props.isSelected ? 500 : 400,\r\n      }}\r\n      {...props.innerProps}\r\n    >\r\n      {props.children}\r\n    </MenuItem>\r\n  );\r\n}\r\n\r\nfunction Placeholder(props) {\r\n  return (\r\n    <Typography\r\n      color=\"textSecondary\"\r\n      className={props.selectProps.classes.placeholder}\r\n      {...props.innerProps}\r\n    >\r\n      {props.children}\r\n    </Typography>\r\n  );\r\n}\r\n\r\nfunction SingleValue(props) {\r\n  return (\r\n    <Typography className={props.selectProps.classes.singleValue} {...props.innerProps}>\r\n      {props.children}\r\n    </Typography>\r\n  );\r\n}\r\n\r\nfunction ValueContainer(props) {\r\n  return <div className={props.selectProps.classes.valueContainer}>{props.children}</div>;\r\n}\r\n\r\nfunction MultiValue(props) {\r\n  return (\r\n    <Chip\r\n      tabIndex={-1}\r\n      label={props.children}\r\n      className={classNames(props.selectProps.classes.chip, {\r\n        [props.selectProps.classes.chipFocused]: props.isFocused,\r\n      })}\r\n      onDelete={props.removeProps.onClick}\r\n      deleteIcon={<CancelIcon {...props.removeProps} />}\r\n    />\r\n  );\r\n}\r\n\r\nfunction SubMenu(props) {\r\n  return (\r\n    <Paper square className={props.selectProps.classes.paper} {...props.innerProps}>\r\n      {props.children}\r\n    </Paper>\r\n  );\r\n}\r\n\r\nconst components = {\r\n  Control,\r\n  SubMenu,\r\n  MultiValue,\r\n  NoOptionsMessage,\r\n  Option,\r\n  Placeholder,\r\n  SingleValue,\r\n  ValueContainer,\r\n};\r\n\r\nclass AddStaff extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      anchorEl: null,\r\n      auth: true,\r\n      name: \"\",\r\n      age: \"\",\r\n      race: \"\",\r\n      gender: \"\",\r\n      ward: \"\",\r\n      type: \"Staff\",\r\n      nameError: false,\r\n      wardError: false,\r\n      beacon: this.props.beacon,\r\n      editSuccess: false,\r\n    };\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if(this.state.editSuccess == false) {\r\n      this.props.editPatient('')\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.fetch();\r\n    this.props.fetchStaffCount()\r\n    if(this.props.edit != \"\" && this.props.edit != null) {\r\n      let edit = this.props.edit;\r\n      this.setState({\r\n        name: edit.name,\r\n        age: edit.age,\r\n        race: edit.race,\r\n        gender: edit.gender,\r\n        ward: {value: edit.ward, label: edit.ward},\r\n        edit: true,\r\n      })\r\n    } else {\r\n      this.flushData()\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if(this.state.edit == true && this.props.edit == \"\") {\r\n      this.flushData()\r\n\r\n    }\r\n\r\n    if(this.props.isAuthenticating == false && this.props.authenticated == false) {\r\n      this.props.history.push('/');\r\n    }\r\n  }\r\n\r\n  flushData = () => {\r\n    this.setState({\r\n      name: \"\",\r\n      age: \"\",\r\n      race: \"\",\r\n      gender: \"\",\r\n      ward: \"\",\r\n      edit: false,\r\n    })\r\n\r\n    let chosen = \"\"\r\n    this.props.assignBeacon( chosen );\r\n  }\r\n\r\n  handleLogOut = () => {\r\n    this.handleClose()\r\n    this.props.signOutUser()\r\n  }\r\n\r\n  createOptions = (maps) => {\r\n\r\n    let options = maps.map((map) => ({\r\n      value: map.id,\r\n      label: map.id,\r\n    }))\r\n\r\n    this.setState({options})\r\n  }\r\n\r\n  fetch = (dispatch) => {\r\n    let query = `\r\n      query {\r\n        maps {\r\n          id\r\n          scale\r\n          coordinates\r\n          imageURL\r\n          navMesh\r\n          navPath\r\n          pois\r\n        }\r\n      }\r\n    `\r\n    this.request({query})\r\n    .then (data => {\r\n      this.props.fetchMaps(data.data.data.maps);\r\n      this.createOptions(data.data.data.maps);\r\n    })\r\n  }\r\n\r\n  request = ({query, variables}) => {\r\n    let promise = axios({\r\n      method:   'post',\r\n      url:      `${graphqlUrlHTTPS}`,\r\n      headers:  {'Content-Type': 'application/json'},\r\n      data:     JSON.stringify({query, variables})\r\n    })\r\n    return promise;\r\n  }\r\n\r\n  toggleDrawer = () => {\r\n    this.setState({ drawer: true});\r\n  }\r\n\r\n  toggleCloseDrawer = () => {\r\n    this.setState({drawer: false})\r\n  }\r\n\r\n  handleMenu = event => {\r\n    this.setState({ drawer: false });\r\n    this.setState({ anchorEl: event.currentTarget });\r\n  };\r\n\r\n  handleClose = () => {\r\n    this.setState({ anchorEl: null });\r\n  };\r\n\r\n  handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    const { type } = this.state;\r\n    this.handleClose()\r\n    let errorCheck = false\r\n    if(this.state.name == \"\") {\r\n      this.setState({nameError: true})\r\n      errorCheck = true\r\n    }\r\n\r\n    if(this.state.ward.value == null) {\r\n      this.setState({wardError: true})\r\n      errorCheck = true\r\n    }\r\n\r\n    if(errorCheck)\r\n      return\r\n    let staff = {\r\n      name: this.state.name,\r\n      age: this.state.age,\r\n      race: this.state.race,\r\n      gender: this.state.gender,\r\n      ward: this.state.ward.value,\r\n      beacon: this.props.beacon,\r\n      highlight: false,\r\n     }\r\n    let confirm = {\r\n      name: this.state.name,\r\n      age: this.state.age,\r\n      race: this.state.race,\r\n      gender: this.state.gender,\r\n      ward: this.state.ward.value,\r\n      beacon: this.props.beacon,\r\n      type: type}\r\n\r\n      if(this.state.edit) {\r\n        staff.id = this.props.edit.id\r\n        this.props.updateStaff(staff)\r\n\r\n        this.setState({editSuccess: true})\r\n      } else {\r\n        this.props.updateStaffCount(this.props.staffCounter.count)\r\n        this.props.addStaff(staff);\r\n      }\r\n    this.props.confirmType({ confirm });\r\n\r\n    let chosenBeacon = \"None\"\r\n    this.props.assignBeacon( chosenBeacon );\r\n    this.props.history.push('/addConfirmation');\r\n\r\n  }\r\n\r\n  handleLoading = () => {\r\n    this.setState(state => ({\r\n      loading: !state.loading,\r\n    }))\r\n  }\r\n\r\n  removeStaff = () => {\r\n    this.props.removeStaff(this.props.edit)\r\n    this.props.history.push('/locationTracking')\r\n  }\r\n\r\n  handleChange = prop => event => {\r\n    if(prop == \"ward\")\r\n      this.setState({ [prop]: event });\r\n    else\r\n      this.setState({ [prop]: event.target.value });\r\n  };\r\n\r\n  cancel = () => {\r\n    if(this.state.edit) {\r\n      this.props.history.push('/locationTracking')\r\n    } else\r\n      this.props.history.push('/home');\r\n  }\r\n\r\n  render() {\r\n\r\n    const { classes, theme } = this.props;\r\n    const { anchorEl, auth } = this.state;\r\n    const open = Boolean(anchorEl)\r\n    const races = ['Chinese', 'Malay', 'Indian', 'Others'];\r\n\r\n    const selectStyles = {\r\n      input: base => ({\r\n        ...base,\r\n        color: theme.palette.text.primary,\r\n        '& input': {\r\n          font: 'inherit',\r\n        },\r\n      }),\r\n    };\r\n  if(this.props.isAuthenticating) {\r\n    return <LinearProgress />\r\n  } else\r\n    return (\r\n      <div className={classes.root}>\r\n        <AppBar position=\"static\" style={{boxShadow: \"none\", backgroundColor: \"white\"}}>\r\n          <Toolbar>\r\n            <IconButton className={classes.menuButton} color=\"inherit\" aria-label=\"Menu\" onClick={this.toggleDrawer}>\r\n              <MenuIcon />\r\n            </IconButton>\r\n            <Typography variant=\"title\" className={classes.grow} style={{color: \"black\"}}>\r\n              {this.state.edit ? 'Edit': 'Add'} Staff\r\n            </Typography>\r\n            {auth && (\r\n                <div>\r\n                  <IconButton\r\n                    aria-owns={open ? 'menu-appbar' : null}\r\n                    aria-haspopup=\"true\"\r\n                    onClick={this.handleMenu}\r\n                    color=\"inherit\"\r\n                  >\r\n                    <AccountCircle style={{color: \"black\"}} />\r\n                  </IconButton>\r\n                  <Menu\r\n                    id=\"menu-appbar\"\r\n                    anchorEl={anchorEl}\r\n                    anchorOrigin={{\r\n                      vertical: 'top',\r\n                      horizontal: 'right',\r\n                    }}\r\n                    transformOrigin={{\r\n                      vertical: 'top',\r\n                      horizontal: 'right',\r\n                    }}\r\n                    open={open}\r\n                    onClose={this.handleClose}\r\n                  >\r\n                    <MenuItem onClick={this.handleLogOut}>Logout</MenuItem>\r\n                  </Menu>\r\n                </div>\r\n              )}\r\n          </Toolbar>\r\n        </AppBar>\r\n        <ClickAwayListener onClickAway={this.toggleCloseDrawer}>\r\n          <TemporaryDrawer toggle={this.state.drawer} />\r\n        </ClickAwayListener>\r\n        <form className={classes.align}>\r\n          <Grid container\r\n            direction=\"column\"\r\n            spacing={0}\r\n            alignItems=\"center\"\r\n            style={{ minHeight: '75vh'}}>\r\n            <Grid item xs={12}>\r\n              <div className={classes.layout}>\r\n                <Grid container>\r\n                  <Grid item xs={6}>\r\n                    <Typography variant=\"h4\" gutterBottom>Staff</Typography>\r\n                  </Grid>\r\n                  <Grid item xs={6} style={{margin: 'auto'}}>\r\n                    {this.state.edit ? <Button variant=\"outlined\" onClick={this.removeStaff} style={{float: 'right'}}> Delete </Button> : null}\r\n                  </Grid>\r\n                </Grid>\r\n\r\n                <FormControl margin=\"normal\" required fullWidth>\r\n                  <TextField\r\n                    label=\"Name\"\r\n                    placeholder=\"Name\"\r\n                    autoComplete=\"name\"\r\n                    variant=\"outlined\"\r\n                    required = {true}\r\n                    value={this.state.name}\r\n                    error={this.state.nameError}\r\n                    helperText={this.state.nameError ? \"This field is required\" : null}\r\n                    fullWidth\r\n                    className={classes.textField}\r\n                    onChange = {(e) => this.setState({name:e.target.value})}\r\n                  />\r\n                </FormControl>\r\n              </div>\r\n              <Grid container\r\n                direction=\"row\"\r\n                spacing={24}\r\n                alignItems=\"center\"\r\n              >\r\n                <Grid item xs={6}>\r\n                  <FormControl margin=\"normal\" required>\r\n                    <TextField\r\n                    id=\"outlined-adornment-age\"\r\n                    className={classNames(classes.margin, classes.textField)}\r\n                    variant=\"outlined\"\r\n                    label=\"Age\"\r\n                    value={this.state.age}\r\n                    onChange={this.handleChange('age')}\r\n                    InputProps={{\r\n                      endAdornment: <InputAdornment position=\"end\">Years Old</InputAdornment>,\r\n                    }}\r\n                    />\r\n                  </FormControl>\r\n                </Grid>\r\n                <Grid item xs={6} style={{textAlign: 'center'}}>\r\n                  <FormControl component=\"fieldset\" margin=\"normal\" className={classes.formControl}>\r\n                    <FormLabel component=\"legend\">Gender</FormLabel>\r\n                    <RadioGroup\r\n                    aria-label=\"Gender\"\r\n                    name=\"gender1\"\r\n                    row ={true}\r\n                    className={classNames(classes.margin, classes.textField, classes.group)}\r\n                    value={this.state.gender}\r\n                    onChange={this.handleChange('gender')}\r\n                    >\r\n                      <FormControlLabel value=\"male\" control={<Radio />} label=\"Male\" />\r\n                      <FormControlLabel value=\"female\" control={<Radio />} label=\"Female\" />\r\n                    </RadioGroup>\r\n                  </FormControl>\r\n                </Grid>\r\n              </Grid>\r\n              <Grid container\r\n                direction=\"row\"\r\n                spacing={0}\r\n                alignItems=\"center\"\r\n                >\r\n                <Grid item xs={12}>\r\n                  <FormControl required fullWidth>\r\n                    <TextField\r\n                    id=\"outlined-select-race\"\r\n                    select\r\n                    label=\"Race\"\r\n                    className={classes.textField}\r\n                    value={this.state.race}\r\n                    onChange={this.handleChange('race')}\r\n                    SelectProps={{\r\n                      MenuProps: {\r\n                        className: classes.menu,\r\n                      },\r\n                    }}\r\n                    margin=\"normal\"\r\n                    variant=\"outlined\"\r\n                    >\r\n                    {races.map(race => (\r\n                      <MenuItem key={race} value={race}>\r\n                        {race}\r\n                      </MenuItem>\r\n                    ))}\r\n                    </TextField>\r\n                  </FormControl>\r\n                  <FormControl margin=\"normal\" required fullWidth>\r\n                    <NoSsr>\r\n                      <Select\r\n                      classes={classes}\r\n                      styles={selectStyles}\r\n                      options={this.state.options}\r\n                      components={components}\r\n                      value={this.state.ward}\r\n                      onChange={this.handleChange('ward')}\r\n                      placeholder=\"Ward*\"\r\n                      isClearable\r\n                      error={this.state.wardError}\r\n                      />\r\n                    </NoSsr>\r\n                  </FormControl>\r\n                  <BeaconTable />\r\n                </Grid>\r\n              </Grid>\r\n              <br/>\r\n              <div style={{ textAlign: 'center', paddingTop: '1rem'}}>\r\n                <Button variant=\"contained\" color=\"primary\" onClick={(event) => this.handleSubmit(event)}>\r\n                  Submit\r\n                </Button>\r\n                <Button style={{marginLeft: '3em'}} onClick={this.cancel}>\r\n                  Cancel\r\n                </Button>\r\n              </div>\r\n            </Grid>\r\n          </Grid>\r\n        </form>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst ConnectedAddStaff = connect(mapStateToProps, mapDispatchToProps)(AddStaff);\r\n\r\nexport default withStyles(styles,  {withTheme: true})(ConnectedAddStaff);\r\n","import React, {Component} from 'react';\r\nimport { connect } from \"react-redux\";\r\nimport { fetchMaps, confirmType, fetchSimulationCoordinates } from \"./actions/index\";\r\nimport MapGL, {Marker, Popup, NavigationControl} from 'react-map-gl';\r\nimport ReactMapboxGl from 'react-mapbox-gl';\r\nimport { Source, Layer, Feature } from \"react-mapbox-gl\";\r\nimport mapboxgl from 'mapbox-gl';\r\n// import StatePin from './StatePin'\r\nimport { withStyles } from '@material-ui/core/styles';\r\nconst e             = React.createElement;\r\n\r\n\r\nconst TOKEN = 'pk.eyJ1IjoiZnlwZW5nIiwiYSI6ImNqcmFlazM4YjAxejkzeW1wbWg2Zmp2aWsifQ.obOnEjbqcpEWu9HIh6zPlw'; // Set your mapbox token here\r\nconst graphqlUrlHTTPS = 'http://137.132.165.139:3000/graphql';\r\n\r\nconst ReactMap = ReactMapboxGl({\r\n  accessToken: `${TOKEN}`,\r\n  maxZoom:    13,\r\n  minZoom:    8,\r\n})\r\nconst navStyle = {\r\n  position: 'absolute',\r\n  top: 0,\r\n  left: 0,\r\n  padding: '10px'\r\n};\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    maps: state.maps,\r\n    map: state.map,\r\n    devices: state.devices,\r\n    deviceLogs: state.deviceLogs,\r\n    patients: state.patients,\r\n    staff: state.staff,\r\n    assets: state.assets,\r\n    simulation: state.simulation,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    confirmType: type => dispatch(confirmType(type)),\r\n    fetchMaps: maps => dispatch(fetchMaps(maps)),\r\n    fetchSimulationCoordinates: coord => dispatch(fetchSimulationCoordinates(coord))\r\n  };\r\n};\r\n\r\nclass Map extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      viewport: {\r\n        latitude: 37.785164,\r\n        longitude: -100,\r\n        zoom: 2.8,\r\n        bearing: 0,\r\n        pitch: 0,\r\n        width: 500,\r\n        height: 500,\r\n      },\r\n      popupInfo: null,\r\n      map: '',\r\n      sourceOptions: {},\r\n      center: [-0.2416815, 51.5285582 ],\r\n      staticDevices: \"\",\r\n      mobileDevices: [],\r\n      staffDevices: [],\r\n      assetDevices: [],\r\n      circleRadius: 30,\r\n      simulation: false,\r\n\r\n    };\r\n    // this.mapLocation = React.createRef(),\r\n    // this.inputNew = React.createRef()\r\n  }\r\n\r\n  componentDidMount() {\r\n    window.addEventListener('resize', this._resize);\r\n    //this._resize();\r\n    if(this.props.map != null) {\r\n      this.initializeMap(this.props.map);\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('resize', this._resize);\r\n    clearInterval(this.timer)\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if(this.props.map !== prevProps.map) {\r\n      this.setState({simulation: false})\r\n      clearInterval(this.timer)\r\n      this.initializeMap(this.props.map)\r\n    }\r\n\r\n    if(this.props.deviceLogs !== prevProps.deviceLogs) {\r\n      this.createBeaconMarkers()\r\n    }\r\n  }\r\n\r\n  //\r\n  // mapgl = () => {\r\n  //   return this.refs.map.getChildContext().map;\r\n  // }\r\n\r\n  // getChildContext = () => {\r\n  //   return { map: this.map };\r\n  // };\r\n\r\n  static getDerivedStateFromProps(props, state) {\r\n    if(props.map != state.map && props.map != null) {\r\n      return {\r\n        map: props.map\r\n      }\r\n    }\r\n  }\r\n\r\n  createBeaconMarkers = () => {\r\n\r\n    let map = this.props.map\r\n    if(map != \"\") {\r\n      let filteredLogs = this.props.deviceLogs.filter(device => device.map.id == map.id);\r\n      let mobileDevices = []\r\n      let staffDevices = []\r\n      let assetDevices = []\r\n\r\n      filteredLogs.map(device => {\r\n        this.props.patients.forEach(patient => {\r\n          if(patient.beacon != null) {\r\n          if(device.id == patient.beacon[0]) {\r\n            let newObj = JSON.parse(JSON.stringify(device))\r\n            newObj.id = patient.name\r\n            mobileDevices.push(newObj)\r\n          }\r\n        }\r\n        })\r\n\r\n        this.props.staff.forEach(staffmem => {\r\n          if(staffmem.beacon != null) {\r\n          if(device.id == staffmem.beacon[0]) {\r\n            let newObj = JSON.parse(JSON.stringify(device))\r\n            newObj.id = staffmem.name\r\n\r\n            staffDevices.push(newObj)\r\n          }\r\n        }\r\n        })\r\n\r\n        this.props.assets.forEach(asset => {\r\n          if(asset.beacon != null) {\r\n            if(device.id == asset.beacon[0]) {\r\n              let newObj = JSON.parse(JSON.stringify(device))\r\n              newObj.id = asset.name\r\n\r\n              assetDevices.push(newObj)\r\n            }\r\n          }\r\n        })\r\n\r\n\r\n      })\r\n      this.setState({mobileDevices})\r\n      this.setState({staffDevices})\r\n      this.setState({assetDevices})\r\n    }\r\n\r\n  }\r\n  initializeMap = (map, jump) => {\r\n\r\n    if(map != null) {\r\n      if(map.id == \"simulation_ward\") {\r\n        map = JSON.parse(JSON.stringify(map))\r\n        map.coordinates = [[0, 0.114], [0.6217262964, 0.114], [0.6217262964, 0],[0,0]]\r\n        this.setState({map})\r\n        this.timer = setInterval(()=> this.props.fetchSimulationCoordinates(), 1000);\r\n        this.setState({simulation: true})\r\n      }\r\n    }\r\n\r\n    let sourceOptions = {\r\n      coordinates: (map != null ? map.coordinates : undefined),\r\n      type:         'image',\r\n      url:          (map != null ? map.imageURL : undefined)\r\n    }\r\n    this.setState({sourceOptions})\r\n\r\n    if(map != \"\") {\r\n      const bounds = new mapboxgl.LngLatBounds(this.__guard__(map != null ? map.coordinates : undefined, x => x[3]), this.__guard__(map != null ? map.coordinates : undefined, x1 => x1[1]));\r\n      let center = bounds.getCenter();\r\n      this.setState({center});\r\n      if(this.state.simulation == false) {\r\n        this.createBeaconMarkers()\r\n        let staticDevices = this.props.devices.filter(device => device.type == 'static');\r\n        staticDevices = staticDevices.filter(device => device.location != null)\r\n        staticDevices = staticDevices.filter(device => device.location.map.id == map.id)\r\n        this.setState({staticDevices})\r\n      } else {\r\n        if(this.props.simulation != \"\" && this.props.simulation != null) {\r\n          let simulation = this.props.simulation\r\n          let devices = []\r\n          const entries = Object.values(simulation)\r\n\r\n          entries.map((contact) => {\r\n              if(typeof contact === 'object' && contact !== null && contact.beacon != null) {\r\n                devices.push(\r\n                <Feature\r\n                  key={contact.beacon}\r\n                  coordinates={[contact.latitude, contact.longitude]}\r\n                  properties={{\r\n                    title:  contact.beacon,\r\n                    id:     contact.beacon\r\n                  }}\r\n                />)\r\n              }\r\n              })\r\n              this.setState({mobileDevices: devices})\r\n        }\r\n      }\r\n\r\n    }\r\n  }\r\n\r\n  onStyleLoad = (mapgl) => {\r\n    const { onLoad, map } = this.props;\r\n    if (map != null) { this.initializeMap(map); }\r\n  }\r\n\r\n  getCirclePaint = () => ({\r\n    'circle-radius': this.state.circleRadius,\r\n    'circle-color': '#FFFF00',\r\n    'circle-opacity': 0.4\r\n  });\r\n\r\n  _resize = () => {\r\n    this.setState({\r\n      viewport: {\r\n        ...this.state.viewport,\r\n        width: window.innerWidth,\r\n        height: '70vh'\r\n      }\r\n    });\r\n  };\r\n\r\n  _updateViewport = (viewport) => {\r\n    this.setState({viewport});\r\n  }\r\n\r\n  __guard__ = (value, transform) => {\r\n    return (typeof value !== 'undefined' && value !== null) ? transform(value) : undefined;\r\n  }\r\n\r\n  renderHighlightDevices = () => {\r\n    let patients = this.props.patients;\r\n    let staff = this.props.staff;\r\n    let assets = this.props.assets;\r\n    let beacons = this.state.mobileDevices;\r\n    let devices = []\r\n\r\n    for(let i = 0 ; i < patients.length; i++) {\r\n\r\n      beacons.map((device) => {\r\n        if(patients[i].name == device.id && patients[i].highlight == true) {\r\n        devices.push(\r\n        <Feature\r\n          key={device.id}\r\n          coordinates={[device.lng, device.lat]}\r\n          properties={{\r\n            title:  device.id,\r\n            id:     device.id\r\n          }}\r\n        />)\r\n      }})\r\n    }\r\n\r\n    for(let i = 0 ; i < staff.length; i++) {\r\n\r\n      this.state.staffDevices.map((device) => {\r\n        if(staff[i].name == device.id && staff[i].highlight == true) {\r\n        devices.push(\r\n        <Feature\r\n          key={device.id}\r\n          coordinates={[device.lng, device.lat]}\r\n          properties={{\r\n            title:  device.id,\r\n            id:     device.id\r\n          }}\r\n        />)\r\n      }})\r\n    }\r\n\r\n    for(let i = 0 ; i < assets.length; i++) {\r\n\r\n      this.state.assetDevices.map((device) => {\r\n        if(assets[i].name == device.id && assets[i].highlight == true) {\r\n        devices.push(\r\n        <Feature\r\n          key={device.id}\r\n          coordinates={[device.lng, device.lat]}\r\n          properties={{\r\n            title:  device.id,\r\n            id:     device.id\r\n          }}\r\n        />)\r\n      }})\r\n    }\r\n\r\n    return devices;\r\n  }\r\n\r\n  renderStaffDevices = () => {\r\n    let devices = []\r\n    this.state.staffDevices.map((device) => {\r\n      devices.push(\r\n      <Feature\r\n        key={device.id}\r\n        coordinates={[device.lng, device.lat]}\r\n        properties={{\r\n          title:  device.id,\r\n          id:     device.id\r\n        }}\r\n      />)\r\n    })\r\n\r\n    return devices\r\n  }\r\n\r\n  renderAssetDevices = () => {\r\n    let devices = []\r\n    this.state.assetDevices.map((device) => {\r\n      devices.push(\r\n      <Feature\r\n        key={device.id}\r\n        coordinates={[device.lng, device.lat]}\r\n        properties={{\r\n          title:  device.id,\r\n          id:     device.id\r\n        }}\r\n      />)\r\n    })\r\n\r\n    return devices\r\n  }\r\n  renderDevices = (type) => {\r\n    let devices = []\r\n    let createDevices = []\r\n    if(type == 'static')\r\n      createDevices = this.state.staticDevices.map ((device) => {\r\n        devices.push(\r\n        <Feature\r\n          key={device.id}\r\n          coordinates={[device.location.lng, device.location.lat]}\r\n          properties={{\r\n            title:  device.id,\r\n            id:     device.id\r\n          }}\r\n        />)\r\n      })\r\n    else {\r\n\r\n      if(this.state.simulation) {\r\n        if(this.props.simulation != \"\" && this.props.simulation != null) {\r\n          let simulation = this.props.simulation\r\n          const entries = Object.values(simulation)\r\n\r\n            createDevices = entries.map((contact) => {\r\n              if(typeof contact === 'object' && contact !== null && contact.beacon != null) {\r\n                devices.push(\r\n                <Feature\r\n                  key={contact.beacon}\r\n                  coordinates={[contact.latitude, contact.longitude]}\r\n                  properties={{\r\n                    title:  contact.beacon,\r\n                    id:     contact.beacon\r\n                  }}\r\n                />)\r\n              }\r\n              })\r\n\r\n        }\r\n      } else {\r\n        createDevices = this.state.mobileDevices.map((device) => {\r\n          devices.push(\r\n          <Feature\r\n            key={device.id}\r\n            coordinates={[device.lng, device.lat]}\r\n            properties={{\r\n              title:  device.id,\r\n              id:     device.id\r\n            }}\r\n          />)\r\n        })\r\n      }\r\n    }\r\n    return devices;\r\n  }\r\n  renderPopup = () => {\r\n    return this.state.popupInfo && (\r\n      <Popup tipSize={5}\r\n        anchor=\"bottom-right\"\r\n        longitude={this.state.popupInfo.state.longitude}\r\n        latitude={this.state.popupInfo.state.latitude}\r\n        onClose={() => this.setState({popupInfo: null})}\r\n        closeOnClick={true}>\r\n        <h4>{this.state.popupInfo.state.fullName}</h4>\r\n        <p>{this.state.popupInfo.incidentNumber} {this.state.popupInfo.disaster} incident(s)</p>\r\n        <div class=\"text-center\">\r\n        <img src={this.state.popupInfo.icon.imgUrl} style={{height: \"50px\"}} />\r\n        </div>\r\n      </Popup>\r\n\r\n      )\r\n  }\r\n\r\n  render() {\r\n\r\n    const {viewport} = this.state;\r\n    let sourceOptions = this.state.sourceOptions\r\n    let imageURL = \"mapbox://styles/mapbox/dark-v9\";\r\n    let center = this.state.center\r\n    if(this.props.map != \"\") {\r\n\r\n    }\r\n    const { children, onLoad, map, height, width } = this.props;\r\n    let locationOrigin = window.location.origin\r\n\r\n    let style = {\r\n        version:  8,\r\n        name:     'custom',\r\n        sources:  {},\r\n        sprite:   `${locationOrigin}/mapbox-styles/maki`,\r\n        glyphs:   `${locationOrigin}/mapbox-styles/font/{fontstack}/{range}.pbf`,\r\n        layers:   []\r\n    }\r\n\r\n    return (\r\n      <div>\r\n      <ReactMap\r\n        style={style}\r\n        center={center}\r\n        movingMethod={'jumpTo'}\r\n        ref={this.mapLocation}\r\n        containerStyle={{\r\n          height: '70vh',\r\n          width: '100vw'}}\r\n        onStyleLoad={this.onStyleLoad}\r\n      >\r\n\r\n      <Layer type=\"symbol\"\r\n      id=\"staticDevices\"\r\n      layout={{\r\n        'icon-image':             'triangle-15',\r\n        'icon-allow-overlap':     true,\r\n        'icon-ignore-placement':  true,\r\n        'text-allow-overlap':     true,\r\n        'text-ignore-placement':  true,\r\n        'text-field':             '{title}',\r\n        'text-font':              ['Open Sans Semibold'],\r\n        'text-offset':            [0, 0.8],\r\n        'text-anchor':            'top',\r\n      }}>\r\n\r\n      {\r\n      //  this.state.staticDevices != \"\" ? this.renderDevices('static') : null\r\n      }\r\n      </Layer>\r\n\r\n      <Layer type=\"circle\"  paint={this.getCirclePaint()}>\r\n      {\r\n        this.renderHighlightDevices()\r\n      }\r\n      </Layer>\r\n      <Layer type=\"symbol\"\r\n      id=\"patientDevices\"\r\n      layout={{\r\n        'icon-image':             'marker-15',\r\n        'icon-allow-overlap':     true,\r\n        'icon-ignore-placement':  true,\r\n        'text-allow-overlap':     true,\r\n        'text-ignore-placement':  true,\r\n        'text-field':             '{title}',\r\n        'text-font':              ['Open Sans Semibold'],\r\n        'text-offset':            [0, 0.8],\r\n        'text-anchor':            'top',\r\n      }}>\r\n\r\n      {\r\n        this.renderDevices('mobile')\r\n      }\r\n      </Layer>\r\n\r\n      <Layer type=\"symbol\"\r\n      id=\"staffDevices\"\r\n      layout={{\r\n        'icon-image':             'hospital-15',\r\n        'icon-allow-overlap':     true,\r\n        'icon-ignore-placement':  true,\r\n        'text-allow-overlap':     true,\r\n        'text-ignore-placement':  true,\r\n        'text-field':             '{title}',\r\n        'text-font':              ['Open Sans Semibold'],\r\n        'text-offset':            [0, 0.8],\r\n        'text-anchor':            'top',\r\n      }}>\r\n\r\n      {\r\n        this.renderStaffDevices()\r\n      }\r\n      </Layer>\r\n\r\n      <Layer type=\"symbol\"\r\n      id=\"assetDevices\"\r\n      layout={{\r\n        'icon-image':             'suitcase-15',\r\n        'icon-allow-overlap':     true,\r\n        'icon-ignore-placement':  true,\r\n        'text-allow-overlap':     true,\r\n        'text-ignore-placement':  true,\r\n        'text-field':             '{title}',\r\n        'text-font':              ['Open Sans Semibold'],\r\n        'text-offset':            [0, 0.8],\r\n        'text-anchor':            'top',\r\n      }}>\r\n\r\n      {\r\n        this.renderAssetDevices()\r\n      }\r\n      </Layer>\r\n      {this.state.map != \"\" && sourceOptions.url != null ?\r\n      <Source id=\"image_source\" tileJsonSource={sourceOptions} />\r\n      : null}\r\n      {this.state.map != \"\" && sourceOptions.url != null ?\r\n      <Layer id=\"image_layer\" before=\"staticDevices\" type=\"raster\" sourceId=\"image_source\"/>\r\n      : null}\r\n    </ReactMap>\r\n    </div>\r\n  )\r\n  }\r\n\r\n}\r\nconst ConnectedMap = connect(mapStateToProps, mapDispatchToProps)(Map);\r\n\r\nexport default ConnectedMap;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\nimport Button from '@material-ui/core/Button';\r\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\r\nimport ErrorIcon from '@material-ui/icons/Error';\r\nimport InfoIcon from '@material-ui/icons/Info';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport green from '@material-ui/core/colors/green';\r\nimport amber from '@material-ui/core/colors/amber';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport SnackbarContent from '@material-ui/core/SnackbarContent';\r\nimport WarningIcon from '@material-ui/icons/Warning';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nconst variantIcon = {\r\n  success: CheckCircleIcon,\r\n  warning: WarningIcon,\r\n  error: ErrorIcon,\r\n  info: InfoIcon,\r\n};\r\n\r\nconst styles1 = theme => ({\r\n  success: {\r\n    backgroundColor: green[600],\r\n  },\r\n  error: {\r\n    backgroundColor: theme.palette.error.dark,\r\n  },\r\n  info: {\r\n    backgroundColor: theme.palette.primary.dark,\r\n  },\r\n  warning: {\r\n    backgroundColor: amber[700],\r\n  },\r\n  icon: {\r\n    fontSize: 20,\r\n  },\r\n  iconVariant: {\r\n    opacity: 0.9,\r\n    marginRight: theme.spacing.unit,\r\n  },\r\n  message: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n  },\r\n});\r\n\r\nfunction MySnackbarContent(props) {\r\n  const { classes, className, message, onClose, variant, ...other } = props;\r\n  const Icon = variantIcon[variant];\r\n\r\n  return (\r\n    <SnackbarContent\r\n      className={classNames(classes[variant], className)}\r\n      aria-describedby=\"client-snackbar\"\r\n      message={\r\n        <span id=\"client-snackbar\" className={classes.message}>\r\n          <Icon className={classNames(classes.icon, classes.iconVariant)} />\r\n          {message}\r\n        </span>\r\n      }\r\n      action={[\r\n        <IconButton\r\n          key=\"close\"\r\n          aria-label=\"Close\"\r\n          color=\"inherit\"\r\n          className={classes.close}\r\n          onClick={onClose}\r\n        >\r\n          <CloseIcon className={classes.icon} />\r\n        </IconButton>,\r\n      ]}\r\n      {...other}\r\n    />\r\n  );\r\n}\r\n\r\nMySnackbarContent.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n  className: PropTypes.string,\r\n  message: PropTypes.node,\r\n  onClose: PropTypes.func,\r\n  variant: PropTypes.oneOf(['success', 'warning', 'error', 'info']).isRequired,\r\n};\r\n\r\nconst MySnackbarContentWrapper = withStyles(styles1)(MySnackbarContent);\r\n\r\nconst styles2 = theme => ({\r\n  margin: {\r\n    margin: theme.spacing.unit,\r\n  },\r\n});\r\n\r\nclass CustomizedSnackbars extends React.Component {\r\n  state = {\r\n    open: false,\r\n  };\r\n\r\n  handleClick = () => {\r\n    this.setState({ open: true });\r\n  };\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if(this.props.warning == true && prevProps.warning == false)\r\n      this.setState({open: true})\r\n  }\r\n  handleClose = (event, reason) => {\r\n    if (reason === 'clickaway') {\r\n      return;\r\n    }\r\n\r\n    this.setState({ open: false });\r\n    this.props.onOffWarning();\r\n  };\r\n\r\n  render() {\r\n    const { classes } = this.props;\r\n\r\n    return (\r\n      <div>\r\n\r\n        <Snackbar\r\n          anchorOrigin={{\r\n            vertical: 'top',\r\n            horizontal: 'center',\r\n          }}\r\n          open={this.state.open}\r\n          onClose={this.handleClose}\r\n        >\r\n          <MySnackbarContentWrapper\r\n            variant=\"error\"\r\n            className={classes.margin}\r\n            onClose={this.handleClose}\r\n            message=\"You have one patient that requires your immediate attention!\"\r\n          />\r\n        </Snackbar>\r\n\r\n\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nCustomizedSnackbars.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default withStyles(styles2)(CustomizedSnackbars);\r\n","import React, { Component } from 'react';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport { connect } from \"react-redux\";\r\nimport { addUsername, fetchMaps, loadMap, fetchDevices, fetchEcgVitals, signOutUser, fetchHeartrateVitals, fetchSimulationCoordinates, fetchDeviceLocations, highlightPatient, highlightAsset, highlightStaff, addPatient, loadInfo, removePatient,editPatient } from \"./actions/index\";\r\nimport Card from '@material-ui/core/Card';\r\nimport CardMedia from '@material-ui/core/CardMedia';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport TemporaryDrawer from './TemporaryDrawer';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport AccountCircle from '@material-ui/icons/AccountCircle';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport classNames from 'classnames';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport Radio from '@material-ui/core/Radio';\r\nimport RadioGroup from '@material-ui/core/RadioGroup';\r\nimport FormLabel from '@material-ui/core/FormLabel';\r\nimport BeaconTable from './BeaconTable';\r\nimport CameraIcon from '@material-ui/icons/PhotoCamera';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport BottomNavigation from '@material-ui/core/BottomNavigation';\r\nimport BottomNavigationAction from '@material-ui/core/BottomNavigationAction';\r\nimport MyLocationIcon from '@material-ui/icons/MyLocation';\r\nimport PersonPinIcon from '@material-ui/icons/PersonPin';\r\nimport LocationOnIcon from '@material-ui/icons/LocationOn';\r\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\r\nimport Grow from '@material-ui/core/Grow';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Popper from '@material-ui/core/Popper';\r\nimport MenuList from '@material-ui/core/MenuList';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport InputBase from '@material-ui/core/InputBase';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Modal from '@material-ui/core/Modal';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport axios from 'axios';\r\nimport ConnectedMap from './Map';\r\nimport ToggleButton from '@material-ui/lab/ToggleButton';\r\nimport ToggleButtonGroup from '@material-ui/lab/ToggleButtonGroup';\r\nimport CustomizedSnackbars from './CustomizedSnackbars'\r\nimport LinearProgress from '@material-ui/core/LinearProgress';\r\n\r\nconst TOKEN = 'pk.eyJ1IjoiZnlwZW5nIiwiYSI6ImNqcmFlazM4YjAxejkzeW1wbWg2Zmp2aWsifQ.obOnEjbqcpEWu9HIh6zPlw'; // Set your mapbox token here\r\nconst graphqlUrlHTTPS = 'http://137.132.165.139:3000/graphql';\r\nconst restUrlHTTPS = `http://137.132.165.139:3000/api`;\r\n\r\nconst styles = theme => ({\r\n  container: {\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n  },\r\n  root: {\r\n    flexGrow: 1,\r\n  },\r\n  grow: {\r\n    flexGrow: 1,\r\n  },\r\n  card: {\r\n    minWidth: 275,\r\n    padding: '2rem'\r\n  },\r\n  textField: {\r\n    // marginLeft: theme.spacing.unit,\r\n    // marginRight: theme.spacing.unit,\r\n  },\r\n  borderBox: {\r\n    border: '1px solid',\r\n    padding: '2rem',\r\n    borderRadius: '16px',\r\n  },\r\n  menu: {\r\n    width: 200,\r\n  },\r\n  menuButton: {\r\n    marginLeft: -12,\r\n    marginRight: 20,\r\n    opacity : 0.4,\r\n    color: 'black',\r\n  },\r\n  align: {\r\n  //  padding: `${theme.spacing.unit * 2}px ${theme.spacing.unit * 3}px ${theme.spacing.unit * 3}px`,\r\n    padding: '16px 0px 0px 0px',\r\n  },\r\n  label: {\r\n    textTransform: 'capitalize',\r\n  },\r\n  cameraIcon: {\r\n    opacity: '0.5',\r\n    paddingLeft: '10px'\r\n  },\r\n  cardContent: {\r\n    paddingBottom: '16px'\r\n  },\r\n  paper: {\r\n    width: 'auto',\r\n    overflow: 'auto',\r\n    maxHeight: '500px',\r\n    position: 'absolute',\r\n    width: theme.spacing.unit * 50,\r\n    backgroundColor: theme.palette.background.paper,\r\n    boxShadow: theme.shadows[5],\r\n    padding: theme.spacing.unit * 4,\r\n    outline: 'none',\r\n  },\r\n  infoDialog: {\r\n    [theme.breakpoints.between('sm', 'xl')]: {\r\n      width: '700px',\r\n    },\r\n    [theme.breakpoints.down('sm')]: {\r\n      width: '80vw',\r\n    },\r\n  },\r\n  input: {\r\n    flex: 1,\r\n  },\r\n});\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    maps: state.maps,\r\n    map: state.map,\r\n    devices: state.devices,\r\n    patients: state.patients,\r\n    assets: state.assets,\r\n    staff: state.staff,\r\n    deviceLogs: state.deviceLogs,\r\n    ecg: state.ecg,\r\n    heartrate: state.heartrate,\r\n    isAuthenticating: state.isAuthenticating,\r\n    authenticated: state.authenticated,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    addUsername: username => dispatch(addUsername(username)),\r\n    editPatient: patient => dispatch(editPatient(patient)),\r\n    addPatient: patient => dispatch(addPatient(patient)),\r\n    removePatient: patient => dispatch(removePatient(patient)),\r\n    fetchMaps: maps => dispatch(fetchMaps(maps)),\r\n    loadMap: map => dispatch(loadMap(map)),\r\n    fetchDevices: devices => dispatch(fetchDevices(devices)),\r\n    fetchDeviceLocations: devices => dispatch(fetchDeviceLocations(devices)),\r\n    loadInfo: object => dispatch(loadInfo(object)),\r\n    fetchEcgVitals: vitals => dispatch(fetchEcgVitals(vitals)),\r\n    fetchHeartrateVitals: vitals => dispatch(fetchHeartrateVitals(vitals)),\r\n    highlightPatient: patients => dispatch(highlightPatient(patients)),\r\n    highlightStaff: staff => dispatch(highlightStaff(staff)),\r\n    highlightAsset: asset => dispatch(highlightAsset(asset)),\r\n    fetchSimulationCoordinates: coord => dispatch(fetchSimulationCoordinates(coord)),\r\n    signOutUser: credentials => dispatch(signOutUser(credentials)),\r\n  };\r\n};\r\n\r\n\r\n\r\nlet id = 0;\r\nfunction createData(name, calories, object, carbs, protein) {\r\n  id += 1;\r\n  return { id, name, calories, object, carbs, protein };\r\n}\r\n\r\nfunction Transition(props) {\r\n  return <Slide direction=\"up\" {...props} />;\r\n}\r\n\r\nconst rows = [\r\n  createData('Frozen yoghurt', 159, 6.0, 24, 4.0),\r\n  createData('Ice cream sandwich', 237, 9.0, 37, 4.3),\r\n  createData('Eclair', 262, 16.0, 24, 6.0),\r\n  createData('Cupcake', 305, 3.7, 67, 4.3),\r\n  createData('Gingerbread', 356, 16.0, 49, 3.9),\r\n];\r\n\r\n\r\nclass LocationTracking extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      anchorEl: null,\r\n      anchorLocationEl: null,\r\n      auth: true,\r\n      name: \"\",\r\n      owner: \"\",\r\n      image: \"\",\r\n      imagePreview: \"\",\r\n      imageName: \"\",\r\n      ward: \"\",\r\n      value: \"0\",\r\n      patients: [],\r\n      staff: [],\r\n      assets: [],\r\n      filter: \"\",\r\n      filteredStaff: \"\",\r\n      filteredAssets: \"\",\r\n      openLocation: false,\r\n      openPatients: false,\r\n      openAssets: false,\r\n      openStaff: false,\r\n      transientDevices: [],\r\n      warning: false,\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.fetch();\r\n    this.getDevices();\r\n    this.timer = setInterval(()=> this.getDeviceLogs(), 1000);\r\n    this.createDataRows();\r\n    //this.props.fetchEcgVitals();\r\n    //this.props.fetchHeartrateVitals();\r\n  }\r\n\r\n  componentWillUnmount() {\r\n  clearInterval(this.timer)\r\n  this.timer = null; // here...\r\n}\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if(this.props.map !== prevProps.map | this.state.filter != prevState.filter | this.props.patients != prevProps.patients | this.props.staff != prevProps.staff |this.props.assets != prevProps.assets ) {\r\n      this.createDataRows()\r\n    }\r\n\r\n    if(this.props.deviceLogs !== prevProps.deviceLogs) {\r\n      this.tweenTransientDevices()\r\n    }\r\n\r\n    if(this.props.isAuthenticating == false && this.props.authenticated == false) {\r\n      this.props.history.push('/');\r\n    }\r\n  }\r\n\r\n  tweenTransientDevices = () => {\r\n    let deviceLogs = this.props.deviceLogs\r\n    let transitionDevices = {}\r\n    let newDevices = {}\r\n    // determine new and transition devices\r\n    deviceLogs.forEach(({id, lat, lng, map})=> {\r\n      transitionDevices[id] = {lat: lat, lng: lng}\r\n      if (this.state.transientDevices[id] != null)\r\n        transitionDevices[id] = {lat: lat, lng: lng}\r\n      else\r\n        newDevices[id] = {lat: lat, lng: lng}\r\n    });\r\n    // add new devices\r\n    this.setState({transitionDevices: Object.assign({}, this.state.transientDevices, newDevices)})\r\n  }\r\n\r\n  createDataRows = () => {\r\n    let patients = this.props.patients;\r\n    let staff = this.props.staff;\r\n    let assets = this.props.assets;\r\n\r\n    let patientRows = []\r\n    let staffRows = []\r\n    let assetRows = []\r\n\r\n    if(this.props.map != null) {\r\n      patients = patients.filter((patient) => patient.ward == this.props.map.id)\r\n      if(this.state.filter.type == \"patients\") {\r\n        patients = patients.filter((patient) => patient.name.includes(this.state.filter.value))\r\n      }\r\n      staff = staff.filter((staffmember) => staffmember.ward == this.props.map.id)\r\n      if(this.state.filter.type == \"staff\") {\r\n        staff = staff.filter((staffmember) => staffmember.name.includes(this.state.filter.value))\r\n      }\r\n      assets = assets.filter((asset) => asset.ward == this.props.map.id)\r\n      if(this.state.filter.type == \"assets\") {\r\n        assets = assets.filter((asset) => asset.name.includes(this.state.filter.value))\r\n      }\r\n    }\r\n\r\n    this.setState({patients: patients})\r\n    this.setState({assets: assets})\r\n    this.setState({staff: staff})\r\n\r\n  }\r\n\r\n  createData = (name, ward, fat, carbs, protein) => {\r\n    id += 1;\r\n    return { id, name, ward, fat, carbs, protein };\r\n  }\r\n\r\n  fetch = (dispatch) => {\r\n    let query = `\r\n      query {\r\n        maps {\r\n          id\r\n          scale\r\n          coordinates\r\n          imageURL\r\n          navMesh\r\n          navPath\r\n          pois\r\n        }\r\n      }\r\n    `\r\n    this.request({query})\r\n    .then ((data) =>\r\n      this.props.fetchMaps(data.data.data.maps),\r\n    )\r\n  }\r\n\r\n  handleLogOut = () => {\r\n    this.handleClose()\r\n    this.props.signOutUser()\r\n  }\r\n\r\n  request = ({query, variables}) => {\r\n    let promise = axios({\r\n      method:   'post',\r\n      url:      `${graphqlUrlHTTPS}`,\r\n      headers:  {'Content-Type': 'application/json'},\r\n      data:     JSON.stringify({query, variables})\r\n    })\r\n    return promise;\r\n  }\r\n\r\n  getDevices = (dispatch) => {\r\n    let query = `\r\n      query {\r\n        devices {\r\n          id\r\n          type\r\n          location\r\n          anchor {\r\n            id\r\n            device {\r\n              id\r\n            }\r\n            sensitivity\r\n          }\r\n          beacon {\r\n            id\r\n            device {\r\n              id\r\n            }\r\n            measuredPower\r\n          }\r\n          gatt {\r\n            id\r\n            device {\r\n              id\r\n            }\r\n            profile\r\n            connect\r\n          }\r\n        }\r\n      }\r\n    `\r\n    this.request({query})\r\n    .then (data =>\r\n      this.props.fetchDevices(data.data.data.devices),\r\n    )\r\n  }\r\n\r\n  getDeviceLogs = (dispatch) => {\r\n\r\n    let promise = axios({\r\n      method:   'get',\r\n      url:      `${restUrlHTTPS}/Devices/logs`,\r\n      headers:  {'Content-Type': 'application/json'},\r\n    }).then (data => {\r\n        this.props.fetchDeviceLocations(data.data)\r\n      }\r\n    )\r\n    return promise;\r\n  }\r\n\r\n  load = (id) => {\r\n    let query = `\r\n      query {\r\n        map (id: \"${id}\") {\r\n          id\r\n          scale\r\n          coordinates\r\n          imageURL\r\n          navMesh\r\n          navPath\r\n          pois\r\n        }\r\n      }\r\n    `\r\n    this.request({query})\r\n    .then ((data) => {\r\n      this.props.loadMap(data.data.data.map);\r\n      this.createDataRows();\r\n    })\r\n  }\r\n\r\n  search = (e,type) => {\r\n    let filter = {type: type, value: e.target.value}\r\n    this.setState({filter: filter})\r\n  }\r\n\r\n  toggleDrawer = () => {\r\n    this.setState({ drawer: true});\r\n  }\r\n  toggleCloseDrawer = () => {\r\n    this.setState({ drawer: false });\r\n  }\r\n\r\n  handleMenu = event => {\r\n    this.setState({ drawer: false });\r\n    this.setState({ anchorEl: event.currentTarget });\r\n  };\r\n\r\n  handleClose = () => {\r\n\r\n    this.setState({ anchorEl: null });\r\n  };\r\n\r\n  handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    this.props.history.push('/home');\r\n\r\n  }\r\n\r\n  infoButton = (patient) => {\r\n    let newPatient = {...patient, type: 'Patient'}\r\n    this.props.loadInfo(newPatient);\r\n    this.props.history.push('/patientInfo');\r\n  }\r\n\r\n  staffInfoButton = (staff) => {\r\n    let newStaff = {...staff, type: 'Staff'}\r\n    this.props.loadInfo(newStaff);\r\n    this.props.history.push('/staffInfo');\r\n  }\r\n\r\n  assetInfoButton = (asset) => {\r\n    let newAsset = {...asset, type: 'Asset'}\r\n    this.props.loadInfo(newAsset);\r\n    this.props.history.push('/assetInfo');\r\n  }\r\n\r\n  handleLoading = () => {\r\n    this.setState(state => ({\r\n      loading: !state.loading,\r\n    }))\r\n  }\r\n\r\n  handleChange = prop => event => {\r\n    this.setState({ [prop]: event.target.value });\r\n  };\r\n\r\n  handleMenuChange = (event, value) => {\r\n    this.setState({ value });\r\n    this.setState({ anchorEl: null });\r\n    this.setState({ drawer: false });\r\n  };\r\n\r\n  imageUpload = (e) => {\r\n\r\n    if(e.target.files[0]) {\r\n      const image = e.target.files[0];\r\n      this.setState({image})\r\n      this.setState({imagePreview : URL.createObjectURL(e.target.files[0])})\r\n      this.setState({imageName : image.name})\r\n    }\r\n\r\n  }\r\n\r\n  removeImage = () => {\r\n    this.setState({image : \"\"});\r\n    this.setState({imagePreview : \"\"});\r\n    this.setState({imageName: \"\"});\r\n  }\r\n\r\n  cancel = () => {\r\n    this.props.history.push('/home');\r\n  }\r\n  handleToggle = () => {\r\n      this.setState({filter: \"\"})\r\n      this.setState({ openLocation: true })\r\n  };\r\n\r\n  handlePatientsToggle = () => {\r\n    this.setState({filter: \"\"})\r\n    this.setState({ openPatients: true })\r\n    this.setState({ value: 2 })\r\n  }\r\n\r\n  handleAssetsToggle = () => {\r\n    this.setState({filter: \"\"})\r\n    this.setState({ openAssets: true })\r\n    this.setState({ value: 4 })\r\n  }\r\n\r\n  handleStaffToggle = () => {\r\n    this.setState({filter: \"\"})\r\n    this.setState({ openStaff: true })\r\n    this.setState({ value: 6 })\r\n  }\r\n\r\n  handleMenuClose = event => {\r\n    this.setState({ openLocation: false });\r\n    this.setState({ openPatients: false })\r\n    this.setState({ openAssets: false })\r\n    this.setState({ openStaff: false})\r\n    this.setState({value: \"0\"})\r\n\r\n  };\r\n\r\n  highlight = (type, object) => {\r\n\r\n    let original = object\r\n    let toHighlight = !object.highlight;\r\n    // object.highlight = toHighlight;\r\n    if(type == 'patient') {\r\n\r\n      let index = this.props.patients.indexOf(original)\r\n\r\n      let action = {\r\n        highlight: toHighlight,\r\n        index: index\r\n\r\n      }\r\n      this.props.highlightPatient(action)\r\n    }\r\n    else if(type == 'asset') {\r\n      let index = this.props.assets.indexOf(original)\r\n      let action = {\r\n        highlight: toHighlight,\r\n        index: index\r\n\r\n      }\r\n      this.props.highlightAsset(action)\r\n    }\r\n    else {\r\n      let index = this.props.staff.indexOf(original)\r\n      let action = {\r\n        highlight: toHighlight,\r\n        index: index\r\n\r\n      }\r\n      this.props.highlightStaff(action)\r\n    }\r\n\r\n  }\r\n\r\n  edit = (type, object) => {\r\n    this.props.editPatient(object);\r\n    if(type == 'patient')\r\n      this.props.history.push('/editPatient')\r\n    else if(type == 'asset')\r\n      this.props.history.push('/addAsset')\r\n    else\r\n      this.props.history.push('/addStaff')\r\n  }\r\n\r\n  offWarning = () => {\r\n    this.setState({warning: false})\r\n  }\r\n\r\n  onClickLocation = (id) => {\r\n    this.load(id)\r\n    this.handleMenuClose()\r\n  }\r\n\r\n  createLocationItems = () => {\r\n\r\n    let maps = this.props.maps;\r\n    let locationItems = [];\r\n    let locations = maps.map((item) => {\r\n      if(this.props.map.id == item.id) {\r\n        locationItems.push(\r\n          <MenuItem key={item.id} onClick={()=> this.onClickLocation(item.id)}>{item.id} <i className=\"fas fa-check\" style={{marginLeft: 'auto'}}></i></MenuItem>\r\n        )\r\n      } else {\r\n        locationItems.push(\r\n          <MenuItem key={item.id} onClick={()=> this.onClickLocation(item.id)}>{item.id}</MenuItem>\r\n        )\r\n      }\r\n    })\r\n    return locationItems;\r\n  }\r\n\r\n  render() {\r\n    const { openLocation, openPatients, openAssets, openStaff } = this.state;\r\n    const { classes } = this.props;\r\n    const { anchorEl, auth } = this.state;\r\n    const open = Boolean(anchorEl)\r\n    const races = ['Chinese', 'Malay', 'Indian', 'Others'];\r\n    let imagePreview = this.state.imagePreview;\r\n    let imageName = this.state.imageName;\r\n    const { value } = this.state;\r\n\r\n    let noPatients = \"\";\r\n    let noStaff = \"\";\r\n    let noAssets = \"\";\r\n\r\n    if(this.state.patients.length == 0){\r\n      noPatients = <Typography variant=\"subtitle1\" style={{padding:'1em', textAlign: 'center' }}> There are currently no patients</Typography>;\r\n    }\r\n\r\n    if(this.state.staff.length == 0){\r\n      noStaff = <Typography variant=\"subtitle1\" style={{padding:'1em', textAlign: 'center' }}> There are currently no staff</Typography>;\r\n    }\r\n\r\n    if(this.state.assets.length == 0){\r\n      noAssets = <Typography variant=\"subtitle1\" style={{padding:'1em', textAlign: 'center' }}> There are currently no assets</Typography>;\r\n    }\r\n\r\n\r\n    if(this.props.isAuthenticating) {\r\n      return <LinearProgress />\r\n    } else\r\n    return (\r\n      <div className={classes.root}>\r\n        <AppBar position=\"static\" style={{boxShadow: \"none\", backgroundColor: \"white\"}}>\r\n          <Toolbar>\r\n            <IconButton className={classes.menuButton} color=\"inherit\" aria-label=\"Menu\" onClick={this.toggleDrawer}>\r\n              <MenuIcon />\r\n            </IconButton>\r\n            <Typography variant=\"title\" className={classes.grow} style={{color: \"black\"}}>\r\n              Location Tracking\r\n            </Typography>\r\n            {auth && (\r\n                <div>\r\n                  <IconButton\r\n                    aria-owns={open ? 'menu-appbar' : null}\r\n                    aria-haspopup=\"true\"\r\n                    onClick={this.handleMenu}\r\n                    color=\"inherit\"\r\n                  >\r\n                    <AccountCircle style={{color: \"black\"}} />\r\n                  </IconButton>\r\n                  <Menu\r\n                    id=\"menu-appbar\"\r\n                    anchorEl={anchorEl}\r\n                    anchorOrigin={{\r\n                      vertical: 'top',\r\n                      horizontal: 'right',\r\n                    }}\r\n                    transformOrigin={{\r\n                      vertical: 'top',\r\n                      horizontal: 'right',\r\n                    }}\r\n                    open={open}\r\n                    onClose={this.handleClose}\r\n                  >\r\n                    <MenuItem onClick={this.handleLogOut}>Logout</MenuItem>\r\n                  </Menu>\r\n\r\n                </div>\r\n              )}\r\n          </Toolbar>\r\n        </AppBar>\r\n        <CustomizedSnackbars warning={this.state.warning} onOffWarning={this.offWarning}  />\r\n        <ClickAwayListener onClickAway={this.toggleCloseDrawer}>\r\n          <TemporaryDrawer toggle={this.state.drawer} />\r\n        </ClickAwayListener>\r\n        <form className={classes.align}>\r\n          <Grid container\r\n            direction=\"column\"\r\n            spacing={0}\r\n            alignItems=\"center\"\r\n            style={{ minHeight: '75vh'}}>\r\n\r\n            <Grid item xs={12}>\r\n              <div className={classes.layout} style={{width: 'auto'}}>\r\n                <ConnectedMap  transitionDevices={this.state.transitionDevices}/>\r\n              </div>\r\n            </Grid>\r\n          </Grid>\r\n        </form>\r\n        <BottomNavigation\r\n          value={value}\r\n          onChange={this.handleMenuChange}\r\n          showLabels\r\n          className={classes.root}\r\n        >\r\n          <BottomNavigationAction label=\"Location\" icon={<MyLocationIcon />}\r\n            onClick={this.handleToggle}/>\r\n            <Dialog\r\n              aria-labelledby=\"simple-modal-title\"\r\n              aria-describedby=\"simple-modal-description\"\r\n              open={this.state.openLocation}\r\n              TransitionComponent={Transition}\r\n              onClose={this.handleMenuClose}\r\n              style={{alignItems:'center',justifyContent:'center'}}\r\n              fullWidth={true}\r\n            >\r\n              <DialogTitle>\r\n                Wards\r\n              </DialogTitle>\r\n              <DialogContent>\r\n                <MenuList>\r\n                  {this.createLocationItems()}\r\n                </MenuList>\r\n              </DialogContent>\r\n            </Dialog>\r\n\r\n            <BottomNavigationAction label=\"Patients\" icon={<PersonPinIcon />}\r\n              onClick={this.handlePatientsToggle}/>\r\n              <Dialog\r\n                aria-labelledby=\"simple-modal-title\"\r\n                aria-describedby=\"simple-modal-description\"\r\n                open={this.state.openPatients}\r\n                onClose={this.handleMenuClose}\r\n                TransitionComponent={Transition}\r\n                style={{alignItems:'center',justifyContent:'center'}}\r\n                maxWidth={false}\r\n              >\r\n                <div className={classes.infoDialog}>\r\n                  <DialogTitle>\r\n                    <Typography variant=\"h4\" style={{marginLeft: 8+'px'}}>Patients</Typography>\r\n                    <div style={{marginLeft: 8+ 'px', marginTop: 0.5 + 'em'}}>\r\n                      <InputBase className={classes.input} fullWidth={true} onChange={(e) => this.search( e, 'patients')} placeholder=\"Search\" />\r\n                    </div>\r\n                    <hr/>\r\n                    <Typography variant=\"h6\" style={{marginLeft: 8+'px'}}>Assigned In: {this.props.map.id}</Typography>\r\n                    <hr/>\r\n                  </DialogTitle>\r\n                  <DialogContent>\r\n                    <Table className={classes.table}>\r\n                      <TableHead>\r\n                        <TableRow>\r\n                          <TableCell>Name</TableCell>\r\n                          <TableCell align=\"center\">Vitals</TableCell>\r\n                          <TableCell align=\"center\">Currently At</TableCell>\r\n                          <TableCell align=\"center\">Actions</TableCell>\r\n                        </TableRow>\r\n                      </TableHead>\r\n                      <TableBody>\r\n                        {this.state.patients.map(row => {\r\n                          let highlightButton = \"\"\r\n                          let currentlyAt = \"-\"\r\n                          if(row.highlight) {\r\n                            highlightButton = <IconButton style={{background: 'black', color: 'white', opacity: '0.4'}} aria-label=\"Highlight\" className={classes.margin} onClick={() => this.highlight('patient', row)}>\r\n                              <i className=\"fas fa-highlighter\" style={{fontSize: 0.7+'em'}}></i>\r\n                            </IconButton>\r\n                          } else {\r\n                            highlightButton = <IconButton aria-label=\"Highlight\" className={classes.margin} onClick={() => this.highlight('patient', row)}>\r\n                              <i className=\"fas fa-highlighter\" style={{fontSize: 0.7+'em'}}></i>\r\n                            </IconButton>\r\n                          }\r\n\r\n                          this.props.deviceLogs.map((device) => {\r\n\r\n                            if(row.beacon != null) {\r\n                              if(device.id == row.beacon[0]) {\r\n                                currentlyAt = device.map.id\r\n                              }\r\n                            }\r\n                          })\r\n\r\n                          return (\r\n                            <TableRow key={row.id}>\r\n                              <TableCell component=\"th\" scope=\"row\">\r\n                                {row.name}\r\n                              </TableCell>\r\n\r\n                              <TableCell align=\"right\">\r\n                                <i className=\"fas fa-heartbeat\"></i> {row.fat}\r\n                                <i className=\"fas fa-thermometer\" style={{marginLeft: 1 + 'em'}}></i> {row.fat}\r\n                                </TableCell>\r\n                              <TableCell align=\"center\">\r\n                                {currentlyAt}\r\n                              </TableCell>\r\n                              <TableCell align=\"right\">\r\n                                {highlightButton}\r\n                                <IconButton aria-label=\"Edit\" onClick={()=> this.edit( 'patient', row)} className={classes.margin}>\r\n                                  <i className=\"far fa-edit\" style={{fontSize: 0.7+'em'}}></i>\r\n                                </IconButton>\r\n                                <IconButton aria-label=\"Info\" className={classes.margin} onClick={() => this.infoButton(row)}>\r\n                                  <i className=\"fas fa-info-circle\" style={{fontSize: 0.7+'em'}}></i>\r\n                                </IconButton>\r\n                              </TableCell>\r\n                            </TableRow>\r\n                            );\r\n                          })\r\n                          }\r\n                        </TableBody>\r\n                    </Table>\r\n                    { noPatients }\r\n                  </DialogContent>\r\n                </div>\r\n              </Dialog>\r\n      <BottomNavigationAction label=\"Assets\" icon={<i className=\"fas fa-briefcase-medical\"  style={{fontSize:20 + 'px'}}/>}\r\n        onClick={this.handleAssetsToggle}/>\r\n        <Dialog\r\n            aria-labelledby=\"simple-modal-title\"\r\n            aria-describedby=\"simple-modal-description\"\r\n            open={this.state.openAssets}\r\n            onClose={this.handleMenuClose}\r\n            style={{alignItems:'center',justifyContent:'center', display: 'flex'}}\r\n            maxWidth={false}\r\n            TransitionComponent={Transition}\r\n          >\r\n              <div className={classes.infoDialog}>\r\n              <DialogTitle>\r\n                <Typography variant=\"h4\" style={{marginLeft: 8+'px'}}>Assets</Typography>\r\n                <div style={{marginLeft: 8+ 'px', marginTop: 0.5 + 'em'}}>\r\n                  <InputBase className={classes.input} fullWidth={true} onChange={(e) => this.search( e, 'assets')} placeholder=\"Search\" />\r\n                </div>\r\n\r\n\r\n                <hr/>\r\n                <Typography variant=\"h6\" style={{marginLeft: 8+'px'}}>Assigned In: {this.props.map.id}</Typography>\r\n                <hr/>\r\n                </DialogTitle>\r\n                <DialogContent>\r\n                <Table className={classes.table}>\r\n                  <TableHead>\r\n                    <TableRow>\r\n                      <TableCell>Name</TableCell>\r\n                      <TableCell align=\"center\">Currently At</TableCell>\r\n                      <TableCell align=\"center\">Actions</TableCell>\r\n                    </TableRow>\r\n                  </TableHead>\r\n                  <TableBody>\r\n                    {this.state.assets.map(row => {\r\n                      let highlightButton = \"\"\r\n                      let currentlyAt = \"-\"\r\n                      if(row.highlight) {\r\n                        highlightButton = <IconButton style={{background: 'black', color: 'white', opacity: '0.4'}} aria-label=\"Highlight\" className={classes.margin} onClick={() => this.highlight('asset', row)}>\r\n                          <i className=\"fas fa-highlighter\" style={{fontSize: 0.7+'em'}}></i>\r\n                        </IconButton>\r\n                      } else {\r\n                        highlightButton = <IconButton aria-label=\"Highlight\" className={classes.margin} onClick={() => this.highlight('asset', row)}>\r\n                          <i className=\"fas fa-highlighter\" style={{fontSize: 0.7+'em'}}></i>\r\n                        </IconButton>\r\n                      }\r\n\r\n                      this.props.deviceLogs.map((device) => {\r\n                        if(row.beacon != null) {\r\n                        if(device.id == row.beacon[0]) {\r\n                          currentlyAt = device.map.id\r\n                        }\r\n                      }\r\n                      })\r\n\r\n\r\n                      return (\r\n                        <TableRow key={row.id}>\r\n                          <TableCell component=\"th\" scope=\"row\">\r\n                            {row.name}\r\n                          </TableCell>\r\n                          <TableCell align=\"center\">\r\n                            {currentlyAt}\r\n                          </TableCell>\r\n                          <TableCell align=\"right\">\r\n                            {highlightButton}\r\n                            <IconButton aria-label=\"Edit\" onClick={()=> this.edit( 'asset', row)} className={classes.margin}>\r\n                              <i className=\"far fa-edit\" style={{fontSize: 0.7+'em'}}></i>\r\n                            </IconButton>\r\n                            <IconButton aria-label=\"Info\" className={classes.margin} onClick={() => this.assetInfoButton(row)}>\r\n                              <i className=\"fas fa-info-circle\" style={{fontSize: 0.7+'em'}}></i>\r\n                            </IconButton>\r\n\r\n                          </TableCell>\r\n                        </TableRow>\r\n                      );\r\n                    })}\r\n                  </TableBody>\r\n                </Table>\r\n                { noAssets }\r\n                </DialogContent>\r\n              </div>\r\n\r\n          </Dialog>\r\n      <BottomNavigationAction label=\"Staff\" icon={<i className=\"fas fa-user-md fa-sm\"  style={{fontSize:20 + 'px'}}/>}\r\n        onClick={this.handleStaffToggle}\r\n      />\r\n      <Dialog\r\n          aria-labelledby=\"simple-modal-title\"\r\n          aria-describedby=\"simple-modal-description\"\r\n          open={this.state.openStaff}\r\n          onClose={this.handleMenuClose}\r\n          style={{alignItems:'center',justifyContent:'center', display: 'flex'}}\r\n          maxWidth={false}\r\n          TransitionComponent={Transition}\r\n        >\r\n            <div className={classes.infoDialog}>\r\n            <DialogTitle>\r\n              <Typography variant=\"h4\" style={{marginLeft: 8+'px'}}>Staff</Typography>\r\n\r\n              <div style={{marginLeft: 8+ 'px', marginTop: 0.5 + 'em'}}>\r\n                <InputBase className={classes.input} fullWidth={true} onChange={(e) => this.search( e, 'staff')}placeholder=\"Search\" />\r\n              </div>\r\n\r\n\r\n              <hr/>\r\n              <Typography variant=\"h6\" style={{marginLeft: 8+'px'}}>Assigned In: {this.props.map.id}</Typography>\r\n              <hr/>\r\n              </DialogTitle>\r\n              <DialogContent>\r\n              <Table className={classes.table}>\r\n                <TableHead>\r\n                  <TableRow>\r\n                    <TableCell>Name</TableCell>\r\n                    <TableCell align=\"center\">Currently At</TableCell>\r\n                    <TableCell align=\"center\">Actions</TableCell>\r\n                  </TableRow>\r\n                </TableHead>\r\n                <TableBody>\r\n                  {this.state.staff.map(row => {\r\n                    let highlightButton = \"\"\r\n                    let currentlyAt = \"-\"\r\n                    if(row.highlight) {\r\n                      highlightButton = <IconButton style={{background: 'black', color: 'white', opacity: '0.4'}} aria-label=\"Highlight\" className={classes.margin} onClick={() => this.highlight('staff', row)}>\r\n                        <i className=\"fas fa-highlighter\" style={{fontSize: 0.7+'em'}}></i>\r\n                      </IconButton>\r\n                    } else {\r\n                      highlightButton = <IconButton aria-label=\"Highlight\" className={classes.margin} onClick={() => this.highlight('staff', row)}>\r\n                        <i className=\"fas fa-highlighter\" style={{fontSize: 0.7+'em'}}></i>\r\n                      </IconButton>\r\n                    }\r\n\r\n                    this.props.deviceLogs.map((device) => {\r\n                      if(row.beacon != null) {\r\n                      if(device.id == row.beacon[0]) {\r\n                        currentlyAt = device.map.id\r\n                      }\r\n                    }\r\n                    })\r\n                    return (\r\n                      <TableRow key={row.id}>\r\n                        <TableCell component=\"th\" scope=\"row\">\r\n                          {row.name}\r\n                        </TableCell>\r\n                        <TableCell align=\"center\">\r\n                          {currentlyAt}\r\n                        </TableCell>\r\n                        <TableCell align=\"right\">\r\n                          {highlightButton}\r\n                          <IconButton aria-label=\"Edit\" onClick={()=> this.edit( 'staff', row)}className={classes.margin}>\r\n                            <i className=\"far fa-edit\" style={{fontSize: 0.7+'em'}}></i>\r\n                          </IconButton>\r\n                          <IconButton aria-label=\"Info\" className={classes.margin} onClick={() => this.staffInfoButton(row)}>\r\n                            <i className=\"fas fa-info-circle\" style={{fontSize: 0.7+'em'}}></i>\r\n                          </IconButton>\r\n\r\n                        </TableCell>\r\n                      </TableRow>\r\n                    );\r\n                  })}\r\n                </TableBody>\r\n              </Table>\r\n              { noStaff }\r\n              </DialogContent>\r\n            </div>\r\n      </Dialog>\r\n    </BottomNavigation>\r\n    </div>\r\n\r\n    )\r\n\r\n  }\r\n}\r\n\r\nconst ConnectedLocationTracking = connect(mapStateToProps, mapDispatchToProps)(LocationTracking);\r\n\r\nexport default withStyles(styles)(ConnectedLocationTracking);\r\n","import React, { Component } from 'react';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport { connect } from \"react-redux\";\r\nimport { addUsername, fetchContactTrace, fetchingProcess, signOutUser } from \"./actions/index\";\r\nimport Card from '@material-ui/core/Card';\r\nimport CardMedia from '@material-ui/core/CardMedia';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport TemporaryDrawer from './TemporaryDrawer';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport AccountCircle from '@material-ui/icons/AccountCircle';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport classNames from 'classnames';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport Radio from '@material-ui/core/Radio';\r\nimport RadioGroup from '@material-ui/core/RadioGroup';\r\nimport FormLabel from '@material-ui/core/FormLabel';\r\nimport BeaconTable from './BeaconTable';\r\nimport CameraIcon from '@material-ui/icons/PhotoCamera';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\r\nimport LinearProgress from '@material-ui/core/LinearProgress';\r\n\r\nconst styles = theme => ({\r\n  container: {\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n  },\r\n  root: {\r\n    flexGrow: 1,\r\n  },\r\n  grow: {\r\n    flexGrow: 1,\r\n  },\r\n  card: {\r\n    minWidth: 275,\r\n    padding: '2rem'\r\n  },\r\n  textField: {\r\n    // marginLeft: theme.spacing.unit,\r\n    // marginRight: theme.spacing.unit,\r\n  },\r\n  borderBox: {\r\n    border: '1px solid',\r\n    padding: '2rem',\r\n    borderRadius: '16px',\r\n  },\r\n  menu: {\r\n    width: 200,\r\n  },\r\n  menuButton: {\r\n    marginLeft: -12,\r\n    marginRight: 20,\r\n    opacity : 0.4,\r\n    color: 'black',\r\n  },\r\n  align: {\r\n    padding: `${theme.spacing.unit * 2}px ${theme.spacing.unit * 3}px ${theme.spacing.unit * 3}px`,\r\n  },\r\n  label: {\r\n    textTransform: 'capitalize',\r\n  },\r\n  cameraIcon: {\r\n    opacity: '0.5',\r\n    paddingLeft: '10px'\r\n  },\r\n  cardContent: {\r\n    paddingBottom: '16px'\r\n  }\r\n});\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    beacon: state.beacon,\r\n    fetching: state.fetching,\r\n    contactTrace: state.contactTrace,\r\n    isAuthenticating: state.isAuthenticating,\r\n    authenticated: state.authenticated\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    addUsername: username => dispatch(addUsername(username)),\r\n    fetchingProcess: process => dispatch(fetchingProcess(process)),\r\n    fetchContactTrace: traceDetails => dispatch(fetchContactTrace(traceDetails)),\r\n    signOutUser: credentials => dispatch(signOutUser(credentials)),\r\n  };\r\n};\r\n\r\nclass ContactTracing extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      anchorEl: null,\r\n      auth: true,\r\n      name: \"\",\r\n      owner: \"\",\r\n      image: \"\",\r\n      imagePreview: \"\",\r\n      imageName: \"\",\r\n      ward: \"\",\r\n      contactDistance: \"\",\r\n      beacon: this.props.beacon,\r\n      loading: false,\r\n      startTime: '2019-04-15T10:30',\r\n      endTime: '2019-04-15T10:30',\r\n      contactTraceError: \"\",\r\n      error: \"\",\r\n      nameError: false,\r\n      distError: false,\r\n    };\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n\r\n\r\n    if(this.props.fetching == false && prevProps.fetching == true && this.props.contactTrace != null | this.props.contactTrace != prevProps.contactTrace && this.props.contactTrace != null) {\r\n      if(this.props.contactTrace.length == 0) {\r\n        this.setState({contactTraceError: 'Error: There are no contact tracing data for the specified time range'})\r\n\r\n      } else\r\n      this.props.history.push('/contactTracingResults');\r\n    } else if(this.props.fetching == false && prevProps.fetching == true && this.props.contactTrace == null | this.props.contactTrace != prevProps.contactTrace && this.props.contactTrace == null){\r\n      this.setState({contactTraceError: 'Server Error: Unable to get contact trace'})\r\n    }\r\n\r\n    if(this.props.isAuthenticating == false && this.props.authenticated == false) {\r\n      this.props.history.push('/');\r\n    }\r\n  }\r\n\r\n  toggleDrawer = () => {\r\n    this.setState({ drawer: true});\r\n  }\r\n\r\n  toggleCloseDrawer = () => {\r\n    this.setState({drawer: false})\r\n  }\r\n\r\n  handleMenu = event => {\r\n    this.setState({ drawer: false });\r\n    this.setState({ anchorEl: event.currentTarget });\r\n  };\r\n\r\n  handleClose = () => {\r\n    this.setState({ anchorEl: null });\r\n  };\r\n\r\n  handleLogOut = () => {\r\n    this.handleClose()\r\n    this.props.signOutUser()\r\n  }\r\n\r\n  handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    let errorCheck = false\r\n    let unixStart = new Date(this.state.startTime)\r\n    let unixEnd = new Date(this.state.endTime)\r\n    if(this.state.contactDistance == \"\") {\r\n      this.setState({distError: true})\r\n      errorCheck = true\r\n    }\r\n\r\n    if(this.state.name == \"\") {\r\n      this.setState({nameError: true})\r\n      errorCheck = true\r\n    }\r\n\r\n    if(unixStart > unixEnd) {\r\n      this.setState({error: 'Time range is invalid'})\r\n      errorCheck = true\r\n    }\r\n\r\n    if(errorCheck) {\r\n      return\r\n    }\r\n    if(unixStart <= unixEnd ) {\r\n      let traceDetails = {\r\n        name: this.state.name,\r\n        contactDistance: this.state.contactDistance,\r\n        startTime: this.state.startTime,\r\n        endTime: this.state.endTime\r\n      }\r\n      this.props.fetchContactTrace(traceDetails);\r\n      this.setState({error: \"\"})\r\n    }\r\n\r\n  }\r\n\r\n  handleLoading = () => {\r\n    this.setState(state => ({\r\n      loading: !state.loading,\r\n    }))\r\n  }\r\n\r\n  handleChange = prop => event => {\r\n    this.setState({ [prop]: event.target.value });\r\n  };\r\n\r\n  imageUpload = (e) => {\r\n\r\n    if(e.target.files[0]) {\r\n      const image = e.target.files[0];\r\n      this.setState({image})\r\n      this.setState({imagePreview : URL.createObjectURL(e.target.files[0])})\r\n      this.setState({imageName : image.name})\r\n    }\r\n\r\n  }\r\n\r\n  updateStart = (e) => {\r\n    this.setState({startTime: e.target.value})\r\n  }\r\n\r\n  updateEnd = (e) => {\r\n    this.setState({endTime: e.target.value})\r\n  }\r\n\r\n  removeImage = () => {\r\n    this.setState({image : \"\"});\r\n    this.setState({imagePreview : \"\"});\r\n    this.setState({imageName: \"\"});\r\n  }\r\n\r\n  cancel = () => {\r\n    this.props.history.push('/home');\r\n  }\r\n  render() {\r\n\r\n    const { classes } = this.props;\r\n    const { anchorEl, auth } = this.state;\r\n    const open = Boolean(anchorEl)\r\n    const races = ['Chinese', 'Malay', 'Indian', 'Others'];\r\n    let imagePreview = this.state.imagePreview;\r\n    let imageName = this.state.imageName;\r\n\r\n    if(this.props.isAuthenticating) {\r\n      return <LinearProgress />\r\n    } else\r\n    return (\r\n      <div className={classes.root}>\r\n        <AppBar position=\"static\" style={{boxShadow: \"none\", backgroundColor: \"white\"}}>\r\n          <Toolbar>\r\n            <IconButton className={classes.menuButton} color=\"inherit\" aria-label=\"Menu\" onClick={this.toggleDrawer}>\r\n              <MenuIcon />\r\n            </IconButton>\r\n            <Typography variant=\"title\" className={classes.grow} style={{color: \"black\"}}>\r\n              Contact Tracing\r\n            </Typography>\r\n            {auth && (\r\n                <div>\r\n                  <IconButton\r\n                    aria-owns={open ? 'menu-appbar' : null}\r\n                    aria-haspopup=\"true\"\r\n                    onClick={this.handleMenu}\r\n                    color=\"inherit\"\r\n                  >\r\n                    <AccountCircle style={{color: \"black\"}} />\r\n                  </IconButton>\r\n                  <Menu\r\n                    id=\"menu-appbar\"\r\n                    anchorEl={anchorEl}\r\n                    anchorOrigin={{\r\n                      vertical: 'top',\r\n                      horizontal: 'right',\r\n                    }}\r\n                    transformOrigin={{\r\n                      vertical: 'top',\r\n                      horizontal: 'right',\r\n                    }}\r\n                    open={open}\r\n                    onClose={this.handleClose}\r\n                  >\r\n                    <MenuItem onClick={this.handleLogOut}>Logout</MenuItem>\r\n                  </Menu>\r\n                </div>\r\n              )}\r\n          </Toolbar>\r\n        </AppBar>\r\n        <ClickAwayListener onClickAway={this.toggleCloseDrawer}>\r\n          <TemporaryDrawer toggle={this.state.drawer} />\r\n        </ClickAwayListener>\r\n        <form className={classes.align} onSubmit={this.handleSubmit}>\r\n          <Grid container\r\n            direction=\"column\"\r\n            spacing={0}\r\n            alignItems=\"center\"\r\n            style={{ minHeight: '75vh'}}>\r\n            <Grid item xs={12}>\r\n              <div className={classes.layout}>\r\n                <Typography variant=\"h4\" gutterBottom>Contact Tracing</Typography>\r\n\r\n                <Typography variant=\"h6\" gutterBottom>Infected</Typography>\r\n                <Typography variant=\"subtitle1\" style={{color: 'red'}}> {this.state.contactTraceError }  </Typography>\r\n                <FormControl margin=\"normal\" required fullWidth>\r\n                  <TextField\r\n                    label=\"Name\"\r\n                    placeholder=\"Name\"\r\n                    autoComplete=\"name\"\r\n                    variant=\"outlined\"\r\n                    disabled={this.props.fetching}\r\n                    fullWidth\r\n                    className={classes.textField}\r\n                    onChange = {(e) => this.setState({name:e.target.value})}\r\n                    required\r\n                    helperText={this.state.nameError ? \"This field is required\" : null}\r\n                    error={this.state.nameError}\r\n                  />\r\n                </FormControl>\r\n\r\n                <FormControl margin=\"normal\" required fullWidth>\r\n                  <TextField\r\n                    label=\"Contact Distance (m)\"\r\n                    placeholder=\"Contact Distance (m)\"\r\n                    variant=\"outlined\"\r\n                    disabled={this.props.fetching}\r\n                    fullWidth\r\n                    className={classes.textField}\r\n                    helperText={this.state.distError ? \"This field is required\" : null}\r\n                    error={this.state.distError}\r\n                    required\r\n                    onChange = {(e) => this.setState({contactDistance:e.target.value})}\r\n                  />\r\n                </FormControl>\r\n\r\n                <div>\r\n                  <TextField\r\n                    id=\"datetime-local\"\r\n                    label=\"Start\"\r\n                    variant=\"outlined\"\r\n                    type=\"datetime-local\"\r\n                    style={{marginRight: '1em', marginTop: '1em'}}\r\n                    defaultValue={this.state.startTime}\r\n                    className={classes.textField}\r\n                    onChange={this.updateStart}\r\n                    disabled={this.props.fetching}\r\n                    error={this.state.error == \"\" ? false : true }\r\n                    InputLabelProps={{\r\n                      shrink: true,\r\n                    }}\r\n                  />\r\n\r\n                  <TextField\r\n                    id=\"datetime-local\"\r\n                    label=\"End\"\r\n                    type=\"datetime-local\"\r\n                    variant=\"outlined\"\r\n                    style={{marginTop: '1em'}}\r\n                    defaultValue={this.state.endTime}\r\n                    error={this.state.error == \"\" ? false : true }\r\n                    className={classes.textField}\r\n                    onChange={this.updateEnd}\r\n                    disabled={this.props.fetching}\r\n                    InputLabelProps={{\r\n                      shrink: true,\r\n                    }}\r\n                  />\r\n                </div>\r\n              </div>\r\n              <br/>\r\n              <div style={{ textAlign: 'center', paddingTop: '1rem'}}>\r\n                {this.props.fetching ? <CircularProgress className={classes.progress} /> :\r\n                <div>\r\n                  <Button type='submit' variant=\"contained\" color=\"primary\">\r\n                    Submit\r\n                  </Button>\r\n                  <Button style={{marginLeft: '3em'}} onClick={this.cancel}>\r\n                    Cancel\r\n                  </Button>\r\n                </div>\r\n                }\r\n              </div>\r\n            </Grid>\r\n          </Grid>\r\n        </form>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst ConnectedContactTracing = connect(mapStateToProps, mapDispatchToProps)(ContactTracing);\r\n\r\nexport default withStyles(styles)(ConnectedContactTracing);\r\n","import React from 'react';\r\nimport classNames from 'classnames';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TablePagination from '@material-ui/core/TablePagination';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport TableSortLabel from '@material-ui/core/TableSortLabel';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport FilterListIcon from '@material-ui/icons/FilterList';\r\nimport AddIcon from '@material-ui/icons/Add'\r\nimport { lighten } from '@material-ui/core/styles/colorManipulator';\r\nimport { connect } from \"react-redux\";\r\nimport { assignBeacon } from \"./actions/index\";\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    assignBeacon: beacon => dispatch(assignBeacon(beacon))\r\n  };\r\n};\r\n\r\nlet counter = 0;\r\nfunction createData(name, timestamp, location) {\r\n  counter += 1;\r\n  return { id: counter, name, timestamp, location };\r\n}\r\n\r\nfunction desc(a, b, orderBy) {\r\n  if (b[orderBy] < a[orderBy]) {\r\n    return -1;\r\n  }\r\n  if (b[orderBy] > a[orderBy]) {\r\n    return 1;\r\n  }\r\n  return 0;\r\n}\r\n\r\nfunction stableSort(array, cmp) {\r\n  const stabilizedThis = array.map((el, index) => [el, index]);\r\n  stabilizedThis.sort((a, b) => {\r\n    const order = cmp(a[0], b[0]);\r\n    if (order !== 0) return order;\r\n    return a[1] - b[1];\r\n  });\r\n  return stabilizedThis.map(el => el[0]);\r\n}\r\n\r\nfunction getSorting(order, orderBy) {\r\n  return order === 'desc' ? (a, b) => desc(a, b, orderBy) : (a, b) => -desc(a, b, orderBy);\r\n}\r\n\r\nconst rows = [\r\n  { id: 'patient',  disablePadding: false, label: 'Patient' },\r\n  { id: 'timestamp', disablePadding: false, label: 'Timestamp' },\r\n  { id: 'location', disablePadding: false, label: 'Location' },\r\n];\r\n\r\nclass EnhancedTableHead extends React.Component {\r\n  createSortHandler = property => event => {\r\n    this.props.onRequestSort(event, property);\r\n  };\r\n\r\n  render() {\r\n    const { onSelectAllClick, order, orderBy, numSelected, rowCount } = this.props;\r\n\r\n    return (\r\n      <TableHead>\r\n        <TableRow>\r\n          {rows.map(row => {\r\n            return (\r\n              <TableCell\r\n                key={row.id}\r\n\r\n                padding={row.disablePadding ? 'none' : 'default'}\r\n                sortDirection={orderBy === row.id ? order : false}\r\n              >\r\n                <Tooltip\r\n                  title=\"Sort\"\r\n                  placement={'bottom-start'}\r\n                  enterDelay={300}\r\n                >\r\n                  <TableSortLabel\r\n                    active={orderBy === row.id}\r\n                    direction={order}\r\n                    onClick={this.createSortHandler(row.id)}\r\n                  >\r\n                    {row.label}\r\n                  </TableSortLabel>\r\n                </Tooltip>\r\n              </TableCell>\r\n            );\r\n          }, this)}\r\n        </TableRow>\r\n      </TableHead>\r\n    );\r\n  }\r\n}\r\n\r\nEnhancedTableHead.propTypes = {\r\n  numSelected: PropTypes.number.isRequired,\r\n  onRequestSort: PropTypes.func.isRequired,\r\n  onSelectAllClick: PropTypes.func.isRequired,\r\n  order: PropTypes.string.isRequired,\r\n  orderBy: PropTypes.string.isRequired,\r\n  rowCount: PropTypes.number.isRequired,\r\n};\r\n\r\nconst toolbarStyles = theme => ({\r\n  root: {\r\n    paddingRight: theme.spacing.unit,\r\n  },\r\n  highlight:\r\n    theme.palette.type === 'light'\r\n      ? {\r\n          color: theme.palette.secondary.main,\r\n          backgroundColor: lighten(theme.palette.secondary.light, 0.85),\r\n        }\r\n      : {\r\n          color: theme.palette.text.primary,\r\n          backgroundColor: theme.palette.secondary.dark,\r\n        },\r\n  spacer: {\r\n    flex: '1 1 100%',\r\n  },\r\n  actions: {\r\n    color: theme.palette.text.secondary,\r\n  },\r\n  title: {\r\n    paddingTop: '.5em',\r\n    flex: '0 0 auto',\r\n  },\r\n});\r\n\r\nlet EnhancedTableToolbar = props => {\r\n  const { numSelected, classes } = props;\r\n\r\n  return (\r\n    <Toolbar\r\n      className={classNames(classes.root)}\r\n    >\r\n      <div className={classes.title}>\r\n        <Typography variant=\"h6\" id=\"tableTitle\">\r\n            Potentially Infected\r\n          </Typography>\r\n      </div>\r\n      <div className={classes.spacer} />\r\n\r\n    </Toolbar>\r\n  );\r\n};\r\n\r\nEnhancedTableToolbar.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n  numSelected: PropTypes.number.isRequired,\r\n};\r\n\r\nEnhancedTableToolbar = withStyles(toolbarStyles)(EnhancedTableToolbar);\r\n\r\nconst styles = theme => ({\r\n  root: {\r\n    width: '100%',\r\n    marginTop: theme.spacing.unit * 3,\r\n  },\r\n  table: {\r\n    minWidth: 500,\r\n  },\r\n  tableWrapper: {\r\n    overflowX: 'auto',\r\n  },\r\n});\r\n\r\nclass PotentialInfectedTable extends React.Component {\r\n  state = {\r\n    order: 'asc',\r\n    orderBy: 'serialno',\r\n    selected: [],\r\n    data: [\r\n      createData('Cupcake', 98, 'Ward 52'),\r\n      createData('Donut', 34, 'Ward 52'),\r\n    ],\r\n    page: 0,\r\n    rowsPerPage: 5,\r\n  };\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if(this.props.potential != null && prevProps.potential != this.props.potential) {\r\n      let potential = this.props.potential;\r\n      let data = []\r\n      potential.forEach(contact => {\r\n        let patient = createData(contact.contact, contact.timestamp, contact.location)\r\n        data.push(patient)\r\n      })\r\n      this.setState({data})\r\n    }\r\n  }\r\n\r\n  handleRequestSort = (event, property) => {\r\n    const orderBy = property;\r\n    let order = 'desc';\r\n\r\n    if (this.state.orderBy === property && this.state.order === 'desc') {\r\n      order = 'asc';\r\n    }\r\n\r\n    this.setState({ order, orderBy });\r\n  };\r\n\r\n  handleSelectAllClick = event => {\r\n    if (event.target.checked) {\r\n      this.setState(state => ({ selected: state.data.map(n => n.id) }));\r\n      return;\r\n    }\r\n    this.setState({ selected: [] });\r\n  };\r\n\r\n  handleClick = (event, id, timestamp) => {\r\n    const { selected } = this.state;\r\n    const selectedIndex = selected.indexOf(id);\r\n    let newSelected = [];\r\n\r\n    if (selectedIndex === -1) {\r\n      newSelected[0] = id;\r\n    } else if (selectedIndex === 0) {\r\n      newSelected = newSelected.concat(selected.slice(1));\r\n    } else if (selectedIndex === selected.length - 1) {\r\n      newSelected = newSelected.concat(selected.slice(0, -1));\r\n    } else if (selectedIndex > 0) {\r\n      newSelected = newSelected.concat(\r\n        selected.slice(0, selectedIndex),\r\n        selected.slice(selectedIndex + 1),\r\n      );\r\n    }\r\n    \r\n    this.setState({ selected: newSelected });\r\n    if(newSelected.length === 1) {\r\n      // let data = this.state.data;\r\n      // let chosenBeacon = data[newSelected[0] - 1]\r\n      this.props.updateTime(timestamp);\r\n\r\n    }\r\n\r\n  };\r\n\r\n  handleChangePage = (event, page) => {\r\n    this.setState({ page });\r\n  };\r\n\r\n  handleChangeRowsPerPage = event => {\r\n    this.setState({ rowsPerPage: event.target.value });\r\n  };\r\n\r\n  isSelected = id => this.state.selected.indexOf(id) !== -1;\r\n\r\n  render() {\r\n    const { classes } = this.props;\r\n    const { data, order, orderBy, selected, rowsPerPage, page } = this.state;\r\n    const emptyRows = rowsPerPage - Math.min(rowsPerPage, data.length - page * rowsPerPage);\r\n\r\n    return (\r\n      <Paper className={classes.root}>\r\n        <EnhancedTableToolbar numSelected={selected.length} />\r\n        <div className={classes.tableWrapper}>\r\n          <Table className={classes.table} aria-labelledby=\"tableTitle\">\r\n            <EnhancedTableHead\r\n              numSelected={selected.length}\r\n              order={order}\r\n              orderBy={orderBy}\r\n              onSelectAllClick={this.handleSelectAllClick}\r\n              onRequestSort={this.handleRequestSort}\r\n              rowCount={data.length}\r\n            />\r\n            <TableBody>\r\n              {stableSort(data, getSorting(order, orderBy))\r\n                .slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\r\n                .map(n => {\r\n                  const isSelected = this.isSelected(n.id);\r\n                  return (\r\n                    <TableRow\r\n                      hover\r\n                      onClick={event => this.handleClick(event, n.id, n.timestamp)}\r\n                      aria-checked={isSelected}\r\n                      tabIndex={-1}\r\n                      key={n.id}\r\n                      selected={isSelected}\r\n                    >\r\n                      <TableCell padding=\"default\">{n.name}</TableCell>\r\n                      <TableCell component=\"th\" scope=\"row\" padding=\"default\">\r\n                        {n.timestamp}\r\n                      </TableCell>\r\n                      <TableCell padding=\"default\">{n.location}</TableCell>\r\n                    </TableRow>\r\n                  );\r\n                })}\r\n              {emptyRows > 0 && (\r\n                <TableRow style={{ height: 49 * emptyRows }}>\r\n                  <TableCell colSpan={6} />\r\n                </TableRow>\r\n              )}\r\n            </TableBody>\r\n          </Table>\r\n        </div>\r\n        <TablePagination\r\n          component=\"div\"\r\n          count={data.length}\r\n          rowsPerPage={rowsPerPage}\r\n          page={page}\r\n          rowsPerPageOptions={[5, 10, 15]}\r\n          backIconButtonProps={{\r\n            'aria-label': 'Previous Page',\r\n          }}\r\n          nextIconButtonProps={{\r\n            'aria-label': 'Next Page',\r\n          }}\r\n          onChangePage={this.handleChangePage}\r\n          onChangeRowsPerPage={this.handleChangeRowsPerPage}\r\n        />\r\n      </Paper>\r\n    );\r\n  }\r\n}\r\n\r\nPotentialInfectedTable.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n};\r\n\r\nconst ConnectedPotentialInfectedTable = connect(null, mapDispatchToProps)(PotentialInfectedTable);\r\n\r\nexport default withStyles(styles)(ConnectedPotentialInfectedTable);\r\n","import React, {Component} from 'react';\r\nimport { connect } from \"react-redux\";\r\nimport { fetchMaps, confirmType, fetchContactTrace } from \"./actions/index\";\r\nimport MapGL, {Marker, Popup, NavigationControl} from 'react-map-gl';\r\nimport ReactMapboxGl from 'react-mapbox-gl';\r\nimport { Source, Layer, Feature } from \"react-mapbox-gl\";\r\nimport mapboxgl from 'mapbox-gl';\r\n// import StatePin from './StatePin'\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport classNames from 'classnames';\r\nimport Slider from '@material-ui/lab/Slider';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Button from '@material-ui/core/Button';\r\nimport axios from 'axios'\r\nconst e             = React.createElement;\r\n\r\n\r\nconst TOKEN = 'pk.eyJ1IjoiZnlwZW5nIiwiYSI6ImNqcmFlazM4YjAxejkzeW1wbWg2Zmp2aWsifQ.obOnEjbqcpEWu9HIh6zPlw'; // Set your mapbox token here\r\nconst graphqlUrlHTTPS = 'http://137.132.165.139:3000/graphql';\r\n\r\n\r\nconst styles = theme => ({\r\n  container: {\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n  },\r\n  root: {\r\n    flexGrow: 1,\r\n  },\r\n  grow: {\r\n    flexGrow: 1,\r\n  },\r\n\r\n  demo: {\r\n    padding: '16px 24px 24px',\r\n    [theme.breakpoints.up(\"sm\")]: {\r\n      width: '560px'\r\n    },\r\n    [theme.breakpoints.up(\"md\")]: {\r\n      width: '700px'\r\n    },\r\n    [theme.breakpoints.up(\"lg\")]: {\r\n      width: '800px'\r\n    }\r\n  }\r\n});\r\n\r\nconst ReactMap = ReactMapboxGl({\r\n  accessToken: `${TOKEN}`,\r\n  maxZoom:    10.5,\r\n  minZoom:    0,\r\n})\r\nconst navStyle = {\r\n  position: 'absolute',\r\n  top: 0,\r\n  left: 0,\r\n  padding: '10px'\r\n};\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    maps: state.maps,\r\n    map: state.map,\r\n    devices: state.devices,\r\n    deviceLogs: state.deviceLogs,\r\n    patients: state.patients,\r\n    contactTrace: state.contactTrace,\r\n    traceDetails: state.traceDetails,\r\n    filterTrace: state.filterTrace,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    confirmType: type => dispatch(confirmType(type)),\r\n    fetchMaps: maps => dispatch(fetchMaps(maps)),\r\n    fetchContactTrace: traceDetails => dispatch(fetchContactTrace(traceDetails)),\r\n  };\r\n};\r\n\r\nclass ContactTraceMap extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      viewport: {\r\n        latitude: 37.785164,\r\n        longitude: -100,\r\n        zoom: 2.8,\r\n        bearing: 0,\r\n        pitch: 0,\r\n        width: 500,\r\n        height: 500,\r\n      },\r\n      popupInfo: null,\r\n      map: '',\r\n      sourceOptions: {},\r\n      center: [0, 0],\r\n      staticDevices: \"\",\r\n      mobileDevices: \"\",\r\n      circleRadius: 20,\r\n      value: 0,\r\n      max: 6,\r\n      playback: false,\r\n\r\n    };\r\n\r\n  }\r\n\r\n  componentDidMount() {\r\n    window.addEventListener('resize', this._resize);\r\n    this.fetch()\r\n    this._resize();\r\n    if(this.props.map != null) {\r\n      this.initializeMap(this.props.map);\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('resize', this._resize);\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if(this.props.contactTrace !== prevProps.contactTrace) {\r\n      this.initializeMap(this.props.contactTrace)\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    clearInterval(this.timer)\r\n  }\r\n\r\n  fetch = (dispatch) => {\r\n    let query = `\r\n      query {\r\n        maps {\r\n          id\r\n          scale\r\n          coordinates\r\n          imageURL\r\n          navMesh\r\n          navPath\r\n          pois\r\n        }\r\n      }\r\n    `\r\n    this.request({query})\r\n    .then ((data) =>\r\n      this.props.fetchMaps(data.data.data.maps),\r\n    )\r\n  }\r\n\r\n  request = ({query, variables}) => {\r\n    let promise = axios({\r\n      method:   'post',\r\n      url:      `${graphqlUrlHTTPS}`,\r\n      headers:  {'Content-Type': 'application/json'},\r\n      data:     JSON.stringify({query, variables})\r\n    })\r\n    return promise;\r\n  }\r\n\r\n  startPlayback = () => {\r\n    let value = this.state.value\r\n    value += 1\r\n    if(value < this.state.max && this.state.playback == false) {\r\n        this.timer = setInterval(()=> this.playback(), 100);\r\n        this.setState({playback: true})\r\n    }\r\n\r\n  }\r\n\r\n\r\n\r\n  stopTimer = () => {\r\n    clearInterval(this.timer)\r\n    this.setState({playback: false})\r\n  }\r\n\r\n  playback = () => {\r\n    let value = this.state.value\r\n    value += 1\r\n    if(value > this.state.max) {\r\n      this.stopTimer()\r\n    } else {\r\n      this.setState({value: value})\r\n    }\r\n  }\r\n  createFake = () => {\r\n    let beacon = {id: 'b1', lat: '0.12689939700739615', lng: '0.2535276535309947', map: {id: 'MeetingRm'}}\r\n    let beacon2 = {id: 'b2', lat: '0.14689939700739615', lng: '0.2535276535309947', map: {id: 'MeetingRm'}}\r\n    let beacon3 = {id: 'b3', lat: '0.192689939700739615', lng: '0.2535276535309947', map: {id: 'MeetingRm'}}\r\n\r\n    let beacons = [];\r\n    beacons.push(beacon)\r\n    beacons.push(beacon2)\r\n    beacons.push(beacon3)\r\n    return beacons\r\n  }\r\n  initializeMap = (data, jump) => {\r\n    let maps = this.props.maps\r\n    let map = \"\"\r\n    maps.map(location => {\r\n      if(location.id == \"simulation_ward\") {\r\n        map = JSON.parse(JSON.stringify(location))\r\n        map.coordinates = [[0, 0.114], [0.6217262964, 0.114], [0.6217262964, 0],[0,0]]\r\n    //    (0,0), (0.6217262964, 0), (0, 0.1099696441), (0.6217262964, 0.1099696441)\r\n      }\r\n    })\r\n\r\n    if(map != \"\") {\r\n      this.setState({map})\r\n    }\r\n\r\n    let sourceOptions = {\r\n      coordinates: (map != \"\" ? map.coordinates : undefined),\r\n      type:         'image',\r\n      url:          (map != \"\" ? map.imageURL : undefined)\r\n    }\r\n    this.setState({sourceOptions})\r\n\r\n    if(this.props.contactTrace != null) {\r\n      this.updateSlider()\r\n      if(map != \"\") {\r\n        const bounds = new mapboxgl.LngLatBounds(this.__guard__(map != \"\" ? map.coordinates : undefined, x => x[3]), this.__guard__(map != \"\" ? map.coordinates : undefined, x1 => x1[1]));\r\n        let center = bounds.getCenter();\r\n        this.setState({center});\r\n      }\r\n    }\r\n  }\r\n\r\n  updateSlider = () => {\r\n    let lengthSlider = this.props.contactTrace.length -1\r\n    this.setState({max: lengthSlider})\r\n  }\r\n  onStyleLoad = (mapgl) => {\r\n\r\n    const { onLoad, map } = this.props;\r\n    if (map != null) { this.initializeMap(map); }\r\n  }\r\n\r\n  getCirclePaint = () => ({\r\n    'circle-radius': this.state.circleRadius,\r\n    'circle-color': '#FFFF00',\r\n    'circle-opacity': 0.4\r\n  });\r\n\r\n  getInfectedCircle = () => ({\r\n    'circle-radius': this.state.circleRadius,\r\n    'circle-stroke-width': 1.5,\r\n    'circle-stroke-color': '#FF0000',\r\n    'circle-opacity': 0\r\n  })\r\n\r\n  _resize = () => {\r\n    this.setState({\r\n      viewport: {\r\n        ...this.state.viewport,\r\n        width: this.props.width || window.innerWidth,\r\n        height: '70vh'\r\n      }\r\n    });\r\n  };\r\n\r\n  _updateViewport = (viewport) => {\r\n    this.setState({viewport});\r\n  }\r\n\r\n  __guard__ = (value, transform) => {\r\n    return (typeof value !== 'undefined' && value !== null) ? transform(value) : undefined;\r\n  }\r\n\r\n\r\n  renderInfectedCircle = () => {\r\n\r\n\r\n    let contacts = this.props.contactTrace[this.state.value];\r\n\r\n    let infected = []\r\n    let beacon = this.props.traceDetails.name\r\n    infected.push(\r\n    <Feature\r\n      key={this.props.traceDetails.name}\r\n      coordinates={[contacts[beacon].latitude, contacts[beacon].longitude]}\r\n      properties={{\r\n        title:  this.props.traceDetails.name,\r\n        id:     this.props.traceDetails.name\r\n      }}\r\n    />)\r\n\r\n    return infected;\r\n  }\r\n\r\n  renderHighlightDevices = () => {\r\n\r\n    let contactTrace = this.props.contactTrace[this.state.value]\r\n    let devices = []\r\n    let primaryContacts = this.props.filterTrace\r\n    let timestamp = contactTrace.timestamp\r\n    for (const key of Object.keys(primaryContacts)) {\r\n      let index = key\r\n      if(timestamp >= primaryContacts[key]  && contactTrace[index] != null) {\r\n        devices.push(\r\n           <Feature\r\n             key={index}\r\n             coordinates={[contactTrace[index].latitude, contactTrace[index].longitude]}\r\n             properties={{\r\n               title:  index,\r\n               id:     index\r\n             }}\r\n           />)\r\n      }\r\n    }\r\n    return devices;\r\n  }\r\n  renderDevices = (type) => {\r\n    let devices = []\r\n    let createDevices = []\r\n    if(type == 'static') {\r\n      createDevices = this.state.staticDevices.map ((device) => {\r\n        devices.push(\r\n        <Feature\r\n          key={device.id}\r\n          coordinates={[device.location.lng, device.location.lat]}\r\n          properties={{\r\n            title:  device.id,\r\n            id:     device.id\r\n          }}\r\n        />)\r\n      })\r\n    } else {\r\n\r\n      let contactTrace = this.props.contactTrace[this.state.value]\r\n\r\n      const entries = Object.values(contactTrace)\r\n\r\n        createDevices = entries.map((contact) => {\r\n          if(typeof contact === 'object' && contact !== null && contact.beacon != null) {\r\n            devices.push(\r\n            <Feature\r\n              key={contact.beacon}\r\n              coordinates={[contact.latitude, contact.longitude]}\r\n              properties={{\r\n                title:  contact.beacon,\r\n                id:     contact.beacon\r\n              }}\r\n            />)\r\n          }\r\n          })\r\n        }\r\n\r\n    return devices;\r\n  }\r\n  renderPopup = () => {\r\n    return this.state.popupInfo && (\r\n      <Popup tipSize={5}\r\n        anchor=\"bottom-right\"\r\n        longitude={this.state.popupInfo.state.longitude}\r\n        latitude={this.state.popupInfo.state.latitude}\r\n        onClose={() => this.setState({popupInfo: null})}\r\n        closeOnClick={true}>\r\n        <h4>{this.state.popupInfo.state.fullName}</h4>\r\n        <p>{this.state.popupInfo.incidentNumber} {this.state.popupInfo.disaster} incident(s)</p>\r\n        <div class=\"text-center\">\r\n        <img src={this.state.popupInfo.icon.imgUrl} style={{height: \"50px\"}} />\r\n        </div>\r\n      </Popup>\r\n\r\n      )\r\n  }\r\n\r\n  formatUnix = () => {\r\n    let unix = this.props.contactTrace[this.state.value].key\r\n    let months_arr = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];\r\n    let date = new Date(unix*1000);\r\n    let year = date.getFullYear();\r\n    let month = months_arr[date.getMonth()];\r\n    let day = date.getDate();\r\n    let hours = date.getHours();\r\n    let minutes = \"0\" + date.getMinutes();\r\n    let seconds = \"0\" + date.getSeconds();\r\n    let convdataTime = day+'-'+month+'-'+year+' '+hours + ':' + minutes.substr(-2) + ':' + seconds.substr(-2);\r\n    return convdataTime\r\n  }\r\n  handleChange = (event, value) => {\r\n    this.setState({ value });\r\n\r\n  };\r\n\r\n\r\n  render() {\r\n\r\n    const {viewport} = this.state;\r\n    const { classes } = this.props;\r\n\r\n    let sourceOptions = this.state.sourceOptions\r\n\r\n    let imageURL = \"mapbox://styles/mapbox/dark-v9\";\r\n    let center = this.state.center\r\n    if(this.props.map != \"\") {\r\n\r\n    }\r\n    const { children, onLoad, map, height, width } = this.props;\r\n    let locationOrigin = window.location.origin\r\n\r\n    let style = {\r\n        version:  8,\r\n        name:     'custom',\r\n        sources:  {},\r\n        sprite:   `${locationOrigin}/mapbox-styles/maki`,\r\n        glyphs:   `${locationOrigin}/mapbox-styles/font/{fontstack}/{range}.pbf`,\r\n        layers:   []\r\n    }\r\n\r\n\r\n    // return (\r\n    //   <MapGL\r\n    //     {...viewport}\r\n    //     mapStyle={imageURL}\r\n    //     onViewportChange={this._updateViewport}\r\n    //     mapboxApiAccessToken={TOKEN} >\r\n    //     {/*markers*/}\r\n    //     {/*this.renderPopup()*/}\r\n    //\r\n    //   </MapGL>\r\n    // );\r\n    return (\r\n      <div>\r\n      <ReactMap\r\n      style={style}\r\n      center={center}\r\n      movingMethod={'jumpTo'}\r\n      ref={this.mapLocation}\r\n      containerStyle={{\r\n        height: '70vh',\r\n        width: '100%'}}\r\n      onStyleLoad={this.onStyleLoad}\r\n\r\n      >\r\n\r\n      <Layer type=\"symbol\"\r\n      id=\"staticDevices\"\r\n      layout={{\r\n        'icon-image':             'triangle-15',\r\n        'icon-allow-overlap':     true,\r\n        'icon-ignore-placement':  true,\r\n        'text-allow-overlap':     true,\r\n        'text-ignore-placement':  true,\r\n        'text-field':             '{title}',\r\n        'text-font':              ['Open Sans Semibold'],\r\n        'text-offset':            [0, 0.8],\r\n        'text-anchor':            'top',\r\n      }}>\r\n\r\n      {\r\n        this.state.staticDevices != \"\" ? this.renderDevices('static') : null\r\n      }\r\n      </Layer>\r\n\r\n      <Layer type=\"circle\"  paint={this.getInfectedCircle()}>\r\n      {\r\n        this.props.filterTrace != null ? this.renderInfectedCircle() : null\r\n      }\r\n      </Layer>\r\n\r\n      <Layer type=\"circle\"  paint={this.getCirclePaint()}>\r\n      {\r\n        //this.props.contactTrace != null ? this.renderDevices('mobile') : null\r\n         this.props.filterTrace != null ? this.renderHighlightDevices() : null\r\n      }\r\n      </Layer>\r\n      <Layer type=\"symbol\"\r\n      id=\"patientDevices\"\r\n      layout={{\r\n        'icon-image':             'marker-15',\r\n        'icon-allow-overlap':     true,\r\n        'icon-ignore-placement':  true,\r\n        'text-allow-overlap':     true,\r\n        'text-ignore-placement':  true,\r\n        'text-field':             '{title}',\r\n        'text-font':              ['Open Sans Semibold'],\r\n        'text-offset':            [0.6, 0.7],\r\n        'text-anchor':            'bottom-left',\r\n        'icon-size':  0.6,\r\n      }}>\r\n\r\n      {\r\n        this.props.contactTrace != null ? this.renderDevices('mobile') : null\r\n\r\n      }\r\n      </Layer>\r\n      {this.state.map != \"\" ?\r\n      <div>\r\n      <Source id=\"image_source\" tileJsonSource={sourceOptions} />\r\n      <Layer id=\"image_layer\" before=\"staticDevices\" type=\"raster\" sourceId=\"image_source\"/>\r\n      </div>\r\n      : null}\r\n\r\n    </ReactMap>\r\n\r\n    <Grid container justify=\"center\">\r\n    <Grid container\r\n      className={classes.demo}\r\n      justify=\"center\"\r\n      spacing={0}\r\n      alignItems=\"center\"\r\n      style={{overflowX: 'hidden'}}\r\n      >\r\n      <Grid item xs={12}>\r\n    <Typography variant=\"subtitle1\">{this.props.contactTrace != null ? this.formatUnix() : this.state.value}</Typography>\r\n\r\n    <Slider\r\n        value={this.state.value}\r\n        min={0}\r\n        max={this.state.max}\r\n        step={1}\r\n        onChange={this.handleChange}\r\n        />\r\n\r\n        {this.state.playback == false ? <Button onClick={this.startPlayback}> Playback </Button> :\r\n        <Button onClick={this.stopTimer}> Stop </Button>}\r\n        </Grid>\r\n        </Grid>\r\n        </Grid>\r\n    </div>\r\n  )\r\n  }\r\n\r\n}\r\nconst ConnectedContactTraceMap = connect(mapStateToProps, mapDispatchToProps)(ContactTraceMap);\r\n\r\nexport default withStyles(styles)(ConnectedContactTraceMap);\r\n","import React, { Component } from 'react';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport { connect } from \"react-redux\";\r\nimport { addUsername, signOutUser } from \"./actions/index\";\r\nimport Card from '@material-ui/core/Card';\r\nimport CardMedia from '@material-ui/core/CardMedia';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport TemporaryDrawer from './TemporaryDrawer';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport AccountCircle from '@material-ui/icons/AccountCircle';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport classNames from 'classnames';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport Radio from '@material-ui/core/Radio';\r\nimport RadioGroup from '@material-ui/core/RadioGroup';\r\nimport FormLabel from '@material-ui/core/FormLabel';\r\nimport BeaconTable from './BeaconTable';\r\nimport CameraIcon from '@material-ui/icons/PhotoCamera';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport Chip from '@material-ui/core/Chip';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport ConnectedPotentialInfectedTable from './PotentialInfectedTable';\r\nimport ConnectedContactTraceMap from './ContactTraceMap';\r\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\r\n\r\nconst styles = theme => ({\r\n  container: {\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n  },\r\n  root: {\r\n    flexGrow: 1,\r\n  },\r\n  grow: {\r\n    flexGrow: 1,\r\n  },\r\n  card: {\r\n    minWidth: 275,\r\n    padding: '2rem'\r\n  },\r\n  textField: {\r\n    // marginLeft: theme.spacing.unit,\r\n    // marginRight: theme.spacing.unit,\r\n  },\r\n  borderBox: {\r\n    border: '1px solid',\r\n    padding: '2rem',\r\n    borderRadius: '16px',\r\n  },\r\n  menu: {\r\n    width: 200,\r\n  },\r\n  menuButton: {\r\n    marginLeft: -12,\r\n    marginRight: 20,\r\n    opacity : 0.4,\r\n    color: 'black',\r\n  },\r\n  align: {\r\n    padding: `${theme.spacing.unit * 2}px ${theme.spacing.unit * 3}px ${theme.spacing.unit * 3}px`,\r\n  },\r\n  label: {\r\n    textTransform: 'capitalize',\r\n  },\r\n  cameraIcon: {\r\n    opacity: '0.5',\r\n    paddingLeft: '10px'\r\n  },\r\n  cardContent: {\r\n    paddingBottom: '16px'\r\n  },\r\n  demo: {\r\n    padding: '16px 24px 24px',\r\n    [theme.breakpoints.up(\"sm\")]: {\r\n      width: '560px'\r\n    },\r\n    [theme.breakpoints.up(\"md\")]: {\r\n      width: '700px'\r\n    },\r\n    [theme.breakpoints.up(\"lg\")]: {\r\n      width: '800px'\r\n    }\r\n  }\r\n});\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    beacon: state.beacon,\r\n    contactTrace: state.contactTrace,\r\n    filterTrace: state.filterTrace,\r\n    traceDetails: state.traceDetails,\r\n    isAuthenticating: state.isAuthenticating,\r\n    authenticated: state.authenticated\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    addUsername: username => dispatch(addUsername(username)),\r\n    signOutUser: credentials => dispatch(signOutUser(credentials)),\r\n  };\r\n};\r\n\r\nlet id = 0;\r\nfunction createData(name, calories, fat, carbs, protein) {\r\n  id += 1;\r\n  return { id, name, calories, fat, carbs, protein };\r\n}\r\n\r\nconst rows = [\r\n  createData('Frozen yoghurt', 159, 6.0, 24, 4.0),\r\n  createData('Ice cream sandwich', 237, 9.0, 37, 4.3),\r\n  createData('Eclair', 262, 16.0, 24, 6.0),\r\n  createData('Cupcake', 305, 3.7, 67, 4.3),\r\n  createData('Gingerbread', 356, 16.0, 49, 3.9),\r\n];\r\n\r\nclass ContactTracingResults extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      anchorEl: null,\r\n      auth: true,\r\n      name: \"Santa Claus\",\r\n      owner: \"\",\r\n      image: \"\",\r\n      imagePreview: \"\",\r\n      imageName: \"\",\r\n      ward: \"\",\r\n      potential: [],\r\n      contactDistance: \"\",\r\n      beacon: this.props.beacon,\r\n\r\n    };\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if(this.props.isAuthenticating == false && this.props.authenticated == false) {\r\n      this.props.history.push('/');\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    if(this.props.filterTrace != null) {\r\n      this.findPotential()\r\n    } else {\r\n      this.props.history.push('/contactTracing')\r\n    }\r\n  }\r\n  toggleDrawer = () => {\r\n    this.setState({ drawer: true});\r\n  }\r\n\r\n  toggleCloseDrawer = () => {\r\n    this.setState({drawer: false})\r\n  }\r\n\r\n  findPotential = () => {\r\n    let contactTrace = this.props.filterTrace;\r\n\r\n    let potential = [];\r\n    let id = 1;\r\n    let primaryContacts = contactTrace\r\n    let secondaryContacts = contactTrace.secondary_contacts\r\n\r\n    for (const key of Object.keys(primaryContacts)) {\r\n      let time = this.formatUnix(primaryContacts[key]);\r\n      let patient = {\r\n        contact: key,\r\n        timestamp: time,\r\n        location: \"Ward 52\",\r\n        id: id,\r\n      }\r\n      id += 1\r\n      potential.push(patient)\r\n\r\n    }\r\n    this.setState({potential: potential})\r\n  }\r\n\r\n  formatDate = () => {\r\n    let contactTrace = this.props.contactTrace\r\n    let startDate = contactTrace[0].timestamp;\r\n    let endDate = contactTrace[contactTrace.length-1].timestamp\r\n    startDate = this.formatUnix(startDate)\r\n    endDate = this.formatUnix(endDate)\r\n\r\n    let timeRange = `${startDate} to ${endDate}`\r\n    return timeRange\r\n  }\r\n\r\n  handleLogOut = () => {\r\n    this.handleClose()\r\n    this.props.signOutUser()\r\n  }\r\n\r\n  formatUnix = (unixDate) => {\r\n    let unix = unixDate\r\n    let months_arr = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];\r\n    let date = new Date(unix*1000);\r\n    let year = date.getFullYear();\r\n    let month = months_arr[date.getMonth()];\r\n    let day = date.getDate();\r\n    let hours = date.getHours();\r\n    let minutes = \"0\" + date.getMinutes();\r\n    let seconds = \"0\" + date.getSeconds();\r\n    let convdataTime = day+'-'+month+'-'+year+' '+hours + ':' + minutes.substr(-2) + ':' + seconds.substr(-2);\r\n    return convdataTime\r\n  }\r\n\r\n  handleMenu = event => {\r\n    this.setState({ drawer: false });\r\n    this.setState({ anchorEl: event.currentTarget });\r\n  };\r\n\r\n  handleClose = () => {\r\n    this.setState({ anchorEl: null });\r\n  };\r\n\r\n  handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    this.props.history.push('/home');\r\n\r\n  }\r\n\r\n  handleLoading = () => {\r\n    this.setState(state => ({\r\n      loading: !state.loading,\r\n    }))\r\n  }\r\n\r\n  handleChange = prop => event => {\r\n    this.setState({ [prop]: event.target.value });\r\n  };\r\n\r\n  imageUpload = (e) => {\r\n    if(e.target.files[0]) {\r\n      const image = e.target.files[0];\r\n      this.setState({image})\r\n      this.setState({imagePreview : URL.createObjectURL(e.target.files[0])})\r\n      this.setState({imageName : image.name})\r\n    }\r\n  }\r\n\r\n  removeImage = () => {\r\n    this.setState({image : \"\"});\r\n    this.setState({imagePreview : \"\"});\r\n    this.setState({imageName: \"\"});\r\n  }\r\n\r\n  cancel = () => {\r\n    this.props.history.push('/home');\r\n  }\r\n\r\n  updateTime = (timestamp) =>{\r\n  }\r\n  render() {\r\n\r\n    const { classes } = this.props;\r\n    const { anchorEl, auth } = this.state;\r\n    const open = Boolean(anchorEl)\r\n    const races = ['Chinese', 'Malay', 'Indian', 'Others'];\r\n    let imagePreview = this.state.imagePreview;\r\n    let imageName = this.state.imageName;\r\n\r\n    return (\r\n      <div className={classes.root}>\r\n        <AppBar position=\"static\" style={{boxShadow: \"none\", backgroundColor: \"white\"}}>\r\n          <Toolbar>\r\n            <IconButton className={classes.menuButton} color=\"inherit\" aria-label=\"Menu\" onClick={this.toggleDrawer}>\r\n              <MenuIcon />\r\n            </IconButton>\r\n            <Typography variant=\"title\" className={classes.grow} style={{color: \"black\"}}>\r\n              Contact Tracing\r\n            </Typography>\r\n            {auth && (\r\n                <div>\r\n                  <IconButton\r\n                    aria-owns={open ? 'menu-appbar' : null}\r\n                    aria-haspopup=\"true\"\r\n                    onClick={this.handleMenu}\r\n                    color=\"inherit\"\r\n                  >\r\n                    <AccountCircle style={{color: \"black\"}} />\r\n                  </IconButton>\r\n                  <Menu\r\n                    id=\"menu-appbar\"\r\n                    anchorEl={anchorEl}\r\n                    anchorOrigin={{\r\n                      vertical: 'top',\r\n                      horizontal: 'right',\r\n                    }}\r\n                    transformOrigin={{\r\n                      vertical: 'top',\r\n                      horizontal: 'right',\r\n                    }}\r\n                    open={open}\r\n                    onClose={this.handleClose}\r\n                  >\r\n                    <MenuItem onClick={this.handleLogOut}>Logout</MenuItem>\r\n                  </Menu>\r\n                </div>\r\n              )}\r\n          </Toolbar>\r\n        </AppBar>\r\n        <ClickAwayListener onClickAway={this.toggleCloseDrawer}>\r\n          <TemporaryDrawer toggle={this.state.drawer} />\r\n        </ClickAwayListener>\r\n        <Grid container justify=\"center\">\r\n          <Grid container\r\n            className={classes.demo}\r\n            justify=\"center\"\r\n            spacing={0}\r\n            alignItems=\"center\"\r\n            >\r\n            <Grid item xs={12}>\r\n              <Typography variant=\"h4\" gutterBottom>Contact Tracing</Typography>\r\n              <Typography variant=\"h5\" gutterBottom>Results</Typography>\r\n            </Grid>\r\n\r\n            <Grid item xs={6}>\r\n              <Typography variant=\"h6\" paragraph>Infected</Typography>\r\n            </Grid>\r\n            <Grid item xs={6}>\r\n              <Typography variant=\"subtitle1\" paragraph>{this.props.traceDetails != null ? this.props.traceDetails.name : 'Santa Claus'}</Typography>\r\n            </Grid>\r\n\r\n            <Grid item xs={6}>\r\n              <Typography variant=\"h6\" paragraph>Contact Distance</Typography>\r\n            </Grid>\r\n            <Grid item xs={6}>\r\n              <Typography variant=\"subtitle1\" paragraph>{this.props.traceDetails != null ? this.props.traceDetails.contactDistance : null}</Typography>\r\n            </Grid>\r\n\r\n            <Grid item xs={6}>\r\n              <Typography variant=\"h6\" paragraph>Length Of Stay</Typography>\r\n            </Grid>\r\n            <Grid item xs={6}>\r\n              <Typography variant=\"subtitle1\" paragraph> {this.props.traceDetails != null ? this.formatDate() : null}</Typography>\r\n            </Grid>\r\n          </Grid>\r\n        </Grid>\r\n        <div className={classes.layout} style={{width: 'auto'}}>\r\n          <ConnectedContactTraceMap />\r\n        </div>\r\n        <Grid container justify=\"center\">\r\n          <Grid container\r\n            className={classes.demo}\r\n            justify=\"center\"\r\n            spacing={0}\r\n            alignItems=\"center\"\r\n          >\r\n            <Grid item xs={12}>\r\n              <ConnectedPotentialInfectedTable potential={this.state.potential} updateTime={this.updateTime}/>\r\n            </Grid>\r\n          </Grid>\r\n        </Grid>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst ConnectedContactTracingResults = connect(mapStateToProps, mapDispatchToProps)(ContactTracingResults);\r\n\r\nexport default withStyles(styles)(ConnectedContactTracingResults);\r\n","import React from \"react\";\r\nimport { render } from \"react-dom\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\n// import Chart from \"./Chart\";\r\nimport 'chartjs-plugin-streaming';\r\nimport { Line } from 'react-chartjs-2';\r\n\r\nconst styles = theme => ({\r\n  \"chart-container\": {\r\n    height: 400\r\n  }\r\n});\r\n\r\nclass HealthChart extends React.Component {\r\n  state = {\r\n    lineChartData: {\r\n\r\n      datasets: [\r\n        {\r\n          label: \"BTC-USD\",\r\n          backgroundColor: \"rgba(0, 0, 0, 0)\",\r\n          showLine: true,\r\n          borderColor: this.props.theme.palette.primary.main,\r\n          pointBackgroundColor: this.props.theme.palette.secondary.main,\r\n          pointBorderColor: this.props.theme.palette.secondary.main,\r\n          borderWidth: \"2\",\r\n          lineTension: 0,\r\n          pointRadius: 0,\r\n          data: []\r\n        }\r\n      ]\r\n    },\r\n    lineChartOptions: {\r\n      events: [],\r\n      responsive: true,\r\n      maintainAspectRatio: false,\r\n      showLine: true,\r\n\r\n      legend: {\r\n        display: false,\r\n      },\r\n\r\n      elements: {\r\n\r\n      },\r\n      tooltips: {\r\n        enabled: true\r\n      },\r\n      plugins: {\r\n        streaming: {\r\n          frameRate: 30\r\n        }\r\n      },\r\n      scales: {\r\n        xAxes: [\r\n          {\r\n            type: 'realtime',\r\n            realtime: {\r\n              duration: 30000,\r\n              delay: 1000,\r\n              pause: false,\r\n\r\n            },\r\n            ticks: {\r\n              autoSkip: false,\r\n              maxTicksLimit: 10\r\n            }\r\n          }\r\n        ]\r\n      }\r\n    }\r\n  };\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if(this.props.vitals !== prevProps.vitals && this.props.vitals != null ) {\r\n      let vitals = this.props.vitals\r\n\r\n      const oldBtcDataSet = this.state.lineChartData.datasets[0];\r\n\r\n      let value = vitals.value\r\n      let epoch = vitals.timestamp;\r\n      let date = new Date(epoch)\r\n\r\n\r\n      const newBtcDataSet = { ...oldBtcDataSet };\r\n      let vitalSign = {x: epoch, y: value}\r\n\r\n      newBtcDataSet.data.push(vitalSign);\r\n\r\n      const newChartData = {\r\n        ...this.state.lineChartData,\r\n        datasets: [newBtcDataSet],\r\n\r\n      };\r\n\r\n\r\n      this.setState({ lineChartData: newChartData });\r\n\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    // this.ws.close();\r\n  }\r\n\r\n  render() {\r\n    const { classes } = this.props;\r\n\r\n    return (\r\n      <div className={classes[\"chart-container\"]}>\r\n      <Line\r\n        data={this.state.lineChartData}\r\n        options={this.state.lineChartOptions}\r\n      />\r\n\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withStyles(styles, { withTheme: true })(HealthChart);\r\n","import React from 'react';\r\nimport {Line} from 'react-chartjs-2';\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\nimport 'hammerjs';\r\nimport * as pan from 'chartjs-plugin-zoom'\r\nimport { Charts, ChartContainer, ChartRow, EventMarker, YAxis, LineChart, Resizable } from \"react-timeseries-charts\";\r\nimport { TimeSeries, TimeRange, time } from \"pondjs\";\r\n\r\nconst styles = theme => ({\r\n  \"chart-container\": {\r\n    height: 400\r\n  }\r\n});\r\n\r\nclass PlaybackChart extends React.Component {\r\n\r\n  state = {\r\n    chartData: {\r\n      name: \"traffic\",\r\n      columns: [\"time\", \"value\"],\r\n      points: null\r\n    },\r\n    timerange: \"\",\r\n    tracker: null,\r\n    trackerValue: \"--\",\r\n    trackerEvent: null,\r\n\r\n    lineChartData: {\r\n\r\n      datasets: [\r\n        {\r\n          label: \"BTC-USD\",\r\n          backgroundColor: \"rgba(0, 0, 0, 0)\",\r\n          borderColor: this.props.theme.palette.primary.main,\r\n          pointBackgroundColor: this.props.theme.palette.secondary.main,\r\n          pointBorderColor: this.props.theme.palette.secondary.main,\r\n          borderWidth: \"2\",\r\n          lineTension: 0,\r\n          data: []\r\n        }\r\n      ]\r\n    },\r\n    lineChartOptions: {\r\n\r\n\r\n      legend: {\r\n        display: false,\r\n      },\r\n\r\n      elements: {\r\n\r\n      },\r\n      tooltips: {\r\n        enabled: true\r\n      },\r\n      // Container for pan options\r\n\tpan: {\r\n    enabled: true,\r\n  \t\t\t\t\t\tmode: 'x',\r\n\t\t\t},\r\n\r\n\t// Container for zoom options\r\n\tzoom: {\r\n    enabled: true,\r\n\r\n  mode: 'x'\r\n\t}\r\n    }\r\n  };\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if(this.props.vitals !== prevProps.vitals && this.props.vitals != null && this.props.vitals.length != 0 ) {\r\n      let vitals = this.props.vitals\r\n\r\n      const oldBtcDataSet = this.state.lineChartData.datasets[0];\r\n      // let value = vitals[vitals.length - 1]\r\n\r\n      let chartpoints = []\r\n      let dataset = this.state.chartData\r\n\r\n      let labels = []\r\n      let newDataSet = {...dataset}\r\n      const newBtcDataSet = { ...oldBtcDataSet };\r\n\r\n\r\n      vitals.map((vital) => {\r\n        let value = vital._source.num\r\n        let epoch = new Date(vital._source.timestamp).toLocaleString('en-GB');\r\n        let vitalSign = value\r\n        let time = new Date(vital._source.timestamp)\r\n        let point = [time, value]\r\n        chartpoints.push(point)\r\n        labels.push(epoch)\r\n        newBtcDataSet.data.push(vitalSign);\r\n      })\r\n      newDataSet.points =  chartpoints\r\n      const newLineData = {\r\n        newDataSet\r\n      }\r\n\r\n      const newChartData = {\r\n        ...this.state.lineChartData,\r\n        datasets: [newBtcDataSet],\r\n        labels: labels\r\n      };\r\n\r\n      this.setState({ lineChartData: newChartData });\r\n      this.setState({chartData: newDataSet})\r\n\r\n      const timeseries = new TimeSeries(newDataSet);\r\n      var timerange = timeseries.timerange()\r\n      this.setState({timerange})\r\n    }\r\n\r\n  }\r\n\r\n  handleTimeRangeChange = timerange => {\r\n        this.setState({ timerange });\r\n    };\r\n\r\n    handleTrackerChanged = t => {\r\n        if (t) {\r\n            let dataSet = new TimeSeries(this.state.chartData)\r\n            const e = dataSet.atTime(t);\r\n            const eventTime = new Date(\r\n                e.begin().getTime() + (e.end().getTime() - e.begin().getTime()) / 2\r\n            );\r\n            const eventValue = e.get(\"value\");\r\n            const v = `${eventValue}`;\r\n            this.setState({ tracker: eventTime, trackerValue: v, trackerEvent: e });\r\n        } else {\r\n            this.setState({ tracker: null, trackerValue: null, trackerEvent: null });\r\n        }\r\n    };\r\n\r\n    renderMarker = () => {\r\n        if (!this.state.tracker) {\r\n            return <g />;\r\n        }\r\n\r\n        return (\r\n          <EventMarker\r\n                  type=\"point\"\r\n                  axis=\"axis1\"\r\n                  event={this.state.trackerEvent}\r\n                  column=\"value\"\r\n                  markerLabel={this.state.trackerValue}\r\n                  markerLabelAlign=\"left\"\r\n                  markerLabelStyle={{ fill: \"black\"}}\r\n                  markerRadius={3}\r\n                  markerStyle={{ fill: \"black\" }}\r\n              />\r\n            );\r\n\r\n    };\r\n\r\n  render() {\r\n\r\n    let timerange = \"\"\r\n    let timeseries = \"\"\r\n    if(this.state.chartData.points != null ) {\r\n      timeseries = new TimeSeries(this.state.chartData);\r\n      timerange = this.state.timerange;\r\n      }\r\n        const style = {\r\n          value: {\r\n              normal: {stroke: \"steelblue\", fill: \"none\", strokeWidth: 2},\r\n              highlighted: {stroke: \"#5a98cb\", fill: \"none\", strokeWidth: 2},\r\n              selected: {stroke: \"steelblue\", fill: \"none\", strokeWidth: 2},\r\n              muted: {stroke: \"steelblue\", fill: \"none\", opacity: 0.4, strokeWidth: 2}\r\n          },\r\n\r\n        };\r\n if(this.state.chartData.points != null ) {\r\n    return (\r\n      <div>\r\n\r\n        {/*<Line data={this.state.lineChartData} options ={this.state.lineChartOptions} />*/}\r\n        <Resizable>\r\n        <ChartContainer\r\n        enablePanZoom={true}\r\n        onTrackerChanged={this.handleTrackerChanged}\r\n        onTimeRangeChanged={this.handleTimeRangeChange}\r\n        timeRange={timerange} width={800}>\r\n          <ChartRow height=\"400\">\r\n              <YAxis id=\"axis1\" label=\"Heart Rate\" min={timeseries.min()} max={timeseries.max()} width=\"60\" type=\"linear\"/>\r\n              <Charts>\r\n                  <LineChart axis=\"axis1\" series={timeseries} style={style}/>\r\n                  {/*this.renderMarker()*/}\r\n              </Charts>\r\n          </ChartRow>\r\n      </ChartContainer>\r\n      </Resizable>\r\n      </div>\r\n    );\r\n  } else {\r\n    return null\r\n  }\r\n\r\n  }\r\n}\r\nexport default withStyles(styles, { withTheme: true })(PlaybackChart);\r\n","import React from 'react';\r\nimport {Line} from 'react-chartjs-2';\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\nimport 'hammerjs';\r\nimport * as pan from 'chartjs-plugin-zoom'\r\nimport { Charts, ChartContainer, ChartRow, EventMarker, YAxis, LineChart, Resizable } from \"react-timeseries-charts\";\r\nimport { TimeSeries, TimeRange, time } from \"pondjs\";\r\nimport moment from 'moment';\r\nconst styles = theme => ({\r\n  \"chart-container\": {\r\n    height: 400\r\n  }\r\n});\r\n\r\nclass PlaybackEcgChart extends React.Component {\r\n\r\n  state = {\r\n    chartData: {\r\n      name: \"traffic\",\r\n      columns: [\"time\", \"value\"],\r\n      points: null\r\n    },\r\n    timerange: \"\",\r\n    tracker: null,\r\n    trackerValue: \"--\",\r\n    trackerEvent: null,\r\n\r\n    lineChartData: {\r\n\r\n      datasets: [\r\n        {\r\n          label: \"BTC-USD\",\r\n          backgroundColor: \"rgba(0, 0, 0, 0)\",\r\n          borderColor: this.props.theme.palette.primary.main,\r\n          pointBackgroundColor: this.props.theme.palette.secondary.main,\r\n          pointBorderColor: this.props.theme.palette.secondary.main,\r\n          borderWidth: \"2\",\r\n          lineTension: 0,\r\n          data: []\r\n        }\r\n      ]\r\n    },\r\n    lineChartOptions: {\r\n\r\n\r\n      legend: {\r\n        display: false,\r\n      },\r\n\r\n      elements: {\r\n\r\n      },\r\n      tooltips: {\r\n        enabled: true\r\n      },\r\n      // Container for pan options\r\n\tpan: {\r\n    enabled: true,\r\n  \t\t\t\t\t\tmode: 'x',\r\n\t\t\t},\r\n\r\n\t// Container for zoom options\r\n\tzoom: {\r\n    enabled: true,\r\n\r\n  mode: 'x'\r\n\t}\r\n    }\r\n  };\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n\r\n    if(this.props.vitals !== prevProps.vitals && this.props.vitals != null && this.props.vitals.length != 0 ) {\r\n      let vitals = this.props.vitals\r\n\r\n      const oldBtcDataSet = this.state.lineChartData.datasets[0];\r\n      // let value = vitals[vitals.length - 1]\r\n\r\n      let chartpoints = []\r\n      let dataset = this.state.chartData\r\n\r\n      let labels = []\r\n      let newDataSet = {...dataset}\r\n      const newBtcDataSet = { ...oldBtcDataSet };\r\n\r\n      let timeString = \"\";\r\n      let checkLog = []\r\n      vitals.map((vital) => {\r\n        let value = vital._source.ecgHrPoint\r\n        let epoch = new Date(vital._source.timestamp).toLocaleString('en-GB');\r\n        let vitalSign = value\r\n        let time = new Date(vital._source.timestamp)\r\n        let point = [time, value]\r\n        chartpoints.push(point)\r\n        labels.push(epoch)\r\n        timeString += `${vital._source.timestamp} ,`\r\n        checkLog.push(moment(vital._source.timestamp))\r\n        newBtcDataSet.data.push(vitalSign);\r\n      })\r\n      newDataSet.points =  chartpoints\r\n\r\n      let differenceString = \"\"\r\n      let difference = checkLog.map((value, index, array) => {\r\n        if(array[index+1] != null) {\r\n          let minus = array[index+1] - value\r\n          differenceString += `${minus},`\r\n        }\r\n      })\r\n\r\n      const newLineData = {\r\n        newDataSet\r\n      }\r\n\r\n\r\n      const newChartData = {\r\n        ...this.state.lineChartData,\r\n        datasets: [newBtcDataSet],\r\n        labels: labels\r\n      };\r\n\r\n      this.setState({ lineChartData: newChartData });\r\n      this.setState({chartData: newDataSet})\r\n\r\n      const timeseries = new TimeSeries(newDataSet);\r\n      var timerange = timeseries.timerange()\r\n      this.setState({timerange})\r\n    }\r\n\r\n  }\r\n\r\n  handleTimeRangeChange = timerange => {\r\n        this.setState({ timerange });\r\n    };\r\n\r\n    handleTrackerChanged = t => {\r\n        if (t) {\r\n            let dataSet = new TimeSeries(this.state.chartData)\r\n            const e = dataSet.atTime(t);\r\n            const eventTime = new Date(\r\n                e.begin().getTime() + (e.end().getTime() - e.begin().getTime()) / 2\r\n            );\r\n\r\n            const eventValue = e.get(\"value\");\r\n            const v = `${eventValue}`;\r\n            this.setState({ tracker: eventTime, trackerValue: v, trackerEvent: e });\r\n        } else {\r\n            this.setState({ tracker: null, trackerValue: null, trackerEvent: null });\r\n        }\r\n    };\r\n\r\n    renderMarker = () => {\r\n        if (!this.state.tracker) {\r\n            return <g />;\r\n        }\r\n\r\n        // <EventMarker\r\n        //     type=\"flag\"\r\n        //     axis=\"axis1\"\r\n        //     event={this.state.trackerEvent}\r\n        //     column=\"value\"\r\n        //     info={[{ label: \"HR\", value: this.state.trackerValue }]}\r\n        //     infoTimeFormat=\"%d/%m/%Y  %I:%M:%S %p\"\r\n        //     infoWidth={120}\r\n        //     markerRadius={2}\r\n        //     markerStyle={{ fill: \"black\" }}\r\n        //     markerLabelStyle = {{ fill: \"black\", opacity: 1 }}\r\n        //     infoStyle = {{ color: \"black\", fill: \"white\", opacity: 0.9, stroke: \"#999\", pointerEvents: \"none\" }}\r\n        //\r\n        // />\r\n\r\n        return (\r\n          <EventMarker\r\n                  type=\"point\"\r\n                  axis=\"axis1\"\r\n                  event={this.state.trackerEvent}\r\n                  column=\"value\"\r\n                  markerLabel={this.state.trackerValue}\r\n                  markerLabelAlign=\"left\"\r\n                  markerLabelStyle={{ fill: \"black\"}}\r\n                  markerRadius={3}\r\n                  markerStyle={{ fill: \"black\" }}\r\n              />\r\n            );\r\n\r\n    };\r\n\r\n  render() {\r\n\r\n    let timerange = \"\"\r\n    let timeseries = \"\"\r\n    if(this.state.chartData.points != null ) {\r\n      timeseries = new TimeSeries(this.state.chartData);\r\n      timerange = this.state.timerange;\r\n      }\r\n        const style = {\r\n          value: {\r\n              normal: {stroke: \"steelblue\", fill: \"none\", strokeWidth: 2},\r\n              highlighted: {stroke: \"#5a98cb\", fill: \"none\", strokeWidth: 2},\r\n              selected: {stroke: \"steelblue\", fill: \"none\", strokeWidth: 2},\r\n              muted: {stroke: \"steelblue\", fill: \"none\", opacity: 0.4, strokeWidth: 2}\r\n          },\r\n\r\n        };\r\n if(this.state.chartData.points != null ) {\r\n    return (\r\n      <div>\r\n\r\n        {/*<Line data={this.state.lineChartData} options ={this.state.lineChartOptions} />*/}\r\n        <Resizable>\r\n        <ChartContainer\r\n        enablePanZoom={true}\r\n        onTrackerChanged={this.handleTrackerChanged}\r\n        onTimeRangeChanged={this.handleTimeRangeChange}\r\n        timeRange={timerange} width={800}>\r\n          <ChartRow height=\"400\">\r\n              <YAxis id=\"axis1\" label=\"ECG\" min={timeseries.min()} max={timeseries.max()} width=\"60\" type=\"linear\"/>\r\n              <Charts>\r\n                  <LineChart axis=\"axis1\" series={timeseries} style={style}/>\r\n                  {/*this.renderMarker()*/}\r\n              </Charts>\r\n          </ChartRow>\r\n      </ChartContainer>\r\n      </Resizable>\r\n      </div>\r\n    );\r\n  } else {\r\n    return null\r\n  }\r\n\r\n  }\r\n}\r\nexport default withStyles(styles, { withTheme: true })(PlaybackEcgChart);\r\n","import React from 'react';\r\nimport {Line} from 'react-chartjs-2';\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\nimport 'hammerjs';\r\nimport * as pan from 'chartjs-plugin-zoom'\r\nimport { Charts, ChartContainer, ChartRow, EventMarker, YAxis, LineChart, Resizable } from \"react-timeseries-charts\";\r\nimport { TimeSeries, TimeRange, time } from \"pondjs\";\r\nimport moment from 'moment';\r\nconst styles = theme => ({\r\n  \"chart-container\": {\r\n    height: 400\r\n  }\r\n});\r\n\r\nclass PlaybackRespirationChart extends React.Component {\r\n\r\n  state = {\r\n    chartData: {\r\n      name: \"traffic\",\r\n      columns: [\"time\", \"value\"],\r\n      points: null\r\n    },\r\n    timerange: \"\",\r\n    tracker: null,\r\n    trackerValue: \"--\",\r\n    trackerEvent: null,\r\n\r\n    lineChartData: {\r\n\r\n      datasets: [\r\n        {\r\n          label: \"BTC-USD\",\r\n          backgroundColor: \"rgba(0, 0, 0, 0)\",\r\n          borderColor: this.props.theme.palette.primary.main,\r\n          pointBackgroundColor: this.props.theme.palette.secondary.main,\r\n          pointBorderColor: this.props.theme.palette.secondary.main,\r\n          borderWidth: \"2\",\r\n          lineTension: 0,\r\n          data: []\r\n        }\r\n      ]\r\n    },\r\n    lineChartOptions: {\r\n\r\n\r\n      legend: {\r\n        display: false,\r\n      },\r\n\r\n      elements: {\r\n\r\n      },\r\n      tooltips: {\r\n        enabled: true\r\n      },\r\n      // Container for pan options\r\n\tpan: {\r\n    enabled: true,\r\n  \t\t\t\t\t\tmode: 'x',\r\n\t\t\t},\r\n\r\n\t// Container for zoom options\r\n\tzoom: {\r\n    enabled: true,\r\n\r\n  mode: 'x'\r\n\t}\r\n    }\r\n  };\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n\r\n    if(this.props.vitals !== prevProps.vitals && this.props.vitals != null && this.props.vitals.length != 0 ) {\r\n      let vitals = this.props.vitals\r\n\r\n      const oldBtcDataSet = this.state.lineChartData.datasets[0];\r\n      // let value = vitals[vitals.length - 1]\r\n\r\n      let chartpoints = []\r\n      let dataset = this.state.chartData\r\n\r\n      let labels = []\r\n      let newDataSet = {...dataset}\r\n      const newBtcDataSet = { ...oldBtcDataSet };\r\n\r\n      let timeString = \"\";\r\n      let checkLog = []\r\n      vitals.map((vital) => {\r\n        let value = vital._source.resPoint\r\n        let epoch = new Date(vital._source.timestamp).toLocaleString('en-GB');\r\n        let vitalSign = value\r\n        let time = new Date(vital._source.timestamp)\r\n        let point = [time, value]\r\n        chartpoints.push(point)\r\n        labels.push(epoch)\r\n        timeString += `${vital._source.timestamp} ,`\r\n        checkLog.push(moment(vital._source.timestamp))\r\n        newBtcDataSet.data.push(vitalSign);\r\n      })\r\n      newDataSet.points =  chartpoints\r\n\r\n      let differenceString = \"\"\r\n      let difference = checkLog.map((value, index, array) => {\r\n        if(array[index+1] != null) {\r\n          let minus = array[index+1] - value\r\n          differenceString += `${minus},`\r\n        }\r\n      })\r\n\r\n\r\n      const newLineData = {\r\n        newDataSet\r\n      }\r\n\r\n      const newChartData = {\r\n        ...this.state.lineChartData,\r\n        datasets: [newBtcDataSet],\r\n        labels: labels\r\n      };\r\n\r\n\r\n      this.setState({ lineChartData: newChartData });\r\n      this.setState({chartData: newDataSet})\r\n\r\n      const timeseries = new TimeSeries(newDataSet);\r\n      var timerange = timeseries.timerange()\r\n      this.setState({timerange})\r\n    }\r\n\r\n  }\r\n\r\n  handleTimeRangeChange = timerange => {\r\n        this.setState({ timerange });\r\n    };\r\n\r\n    handleTrackerChanged = t => {\r\n        if (t) {\r\n            let dataSet = new TimeSeries(this.state.chartData)\r\n            const e = dataSet.atTime(t);\r\n            const eventTime = new Date(\r\n                e.begin().getTime() + (e.end().getTime() - e.begin().getTime()) / 2\r\n            );\r\n            const eventValue = e.get(\"value\");\r\n            const v = `${eventValue}`;\r\n            this.setState({ tracker: eventTime, trackerValue: v, trackerEvent: e });\r\n        } else {\r\n            this.setState({ tracker: null, trackerValue: null, trackerEvent: null });\r\n        }\r\n    };\r\n\r\n    renderMarker = () => {\r\n        if (!this.state.tracker) {\r\n            return <g />;\r\n        }\r\n\r\n\r\n        return (\r\n          <EventMarker\r\n                  type=\"point\"\r\n                  axis=\"axis1\"\r\n                  event={this.state.trackerEvent}\r\n                  column=\"value\"\r\n                  markerLabel={this.state.trackerValue}\r\n                  markerLabelAlign=\"left\"\r\n                  markerLabelStyle={{ fill: \"black\"}}\r\n                  markerRadius={3}\r\n                  markerStyle={{ fill: \"black\" }}\r\n              />\r\n            );\r\n\r\n    };\r\n\r\n  render() {\r\n\r\n    let timerange = \"\"\r\n    let timeseries = \"\"\r\n    if(this.state.chartData.points != null ) {\r\n      timeseries = new TimeSeries(this.state.chartData);\r\n      timerange = this.state.timerange;\r\n      }\r\n        const style = {\r\n          value: {\r\n              normal: {stroke: \"steelblue\", fill: \"none\", strokeWidth: 2},\r\n              highlighted: {stroke: \"#5a98cb\", fill: \"none\", strokeWidth: 2},\r\n              selected: {stroke: \"steelblue\", fill: \"none\", strokeWidth: 2},\r\n              muted: {stroke: \"steelblue\", fill: \"none\", opacity: 0.4, strokeWidth: 2}\r\n          },\r\n\r\n        };\r\n if(this.state.chartData.points != null ) {\r\n    return (\r\n      <div>\r\n\r\n        {/*<Line data={this.state.lineChartData} options ={this.state.lineChartOptions} />*/}\r\n        <Resizable>\r\n        <ChartContainer\r\n        enablePanZoom={true}\r\n        onTrackerChanged={this.handleTrackerChanged}\r\n        onTimeRangeChanged={this.handleTimeRangeChange}\r\n        timeRange={timerange} width={800}>\r\n          <ChartRow height=\"400\">\r\n              <YAxis id=\"axis1\" label=\"Respiration\" min={timeseries.min()} max={timeseries.max()} width=\"60\" type=\"linear\"/>\r\n              <Charts>\r\n                  <LineChart axis=\"axis1\" series={timeseries} style={style}/>\r\n                  {/*this.renderMarker()*/}\r\n              </Charts>\r\n          </ChartRow>\r\n      </ChartContainer>\r\n      </Resizable>\r\n      </div>\r\n    );\r\n  } else {\r\n    return null\r\n  }\r\n\r\n  }\r\n}\r\nexport default withStyles(styles, { withTheme: true })(PlaybackRespirationChart);\r\n","import React, { Component } from 'react';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport { connect } from \"react-redux\";\r\nimport { addUsername, fetchEcgVitals, fetchHeartrateVitals } from \"./actions/index\";\r\nimport Card from '@material-ui/core/Card';\r\nimport CardMedia from '@material-ui/core/CardMedia';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport TemporaryDrawer from './TemporaryDrawer';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport AccountCircle from '@material-ui/icons/AccountCircle';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport classNames from 'classnames';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport Radio from '@material-ui/core/Radio';\r\nimport RadioGroup from '@material-ui/core/RadioGroup';\r\nimport FormLabel from '@material-ui/core/FormLabel';\r\nimport BeaconTable from './BeaconTable';\r\nimport CameraIcon from '@material-ui/icons/PhotoCamera';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport Chip from '@material-ui/core/Chip';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\nimport HealthChart from \"./HealthChart\";\r\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\r\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\r\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport socketIOClient from \"socket.io-client\";\r\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\r\nimport ToggleButton from '@material-ui/lab/ToggleButton';\r\nimport ToggleButtonGroup from '@material-ui/lab/ToggleButtonGroup';\r\nimport axios from 'axios'\r\nimport PlaybackChart from './PlaybackChart'\r\nimport PlaybackEcgChart from './PlaybackEcgChart'\r\nimport PlaybackRespirationChart from './PlaybackRespirationChart'\r\nimport moment from 'moment';\r\n\r\n\r\nconst styles = theme => ({\r\n  container: {\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n  },\r\n  root: {\r\n    flexGrow: 1,\r\n  },\r\n  grow: {\r\n    flexGrow: 1,\r\n  },\r\n  card: {\r\n    minWidth: 275,\r\n    padding: '1.5rem',\r\n    flexGrow: '1',\r\n  },\r\n  textField: {\r\n    // marginLeft: theme.spacing.unit,\r\n    // marginRight: theme.spacing.unit,\r\n  },\r\n  borderBox: {\r\n    border: '1px solid',\r\n    padding: '2rem',\r\n    borderRadius: '16px',\r\n  },\r\n  menu: {\r\n    width: 200,\r\n  },\r\n  menuButton: {\r\n    marginLeft: -12,\r\n    marginRight: 20,\r\n    opacity : 0.4,\r\n    color: 'black',\r\n  },\r\n  align: {\r\n    padding: `${theme.spacing.unit * 2}px ${theme.spacing.unit * 3}px ${theme.spacing.unit * 3}px`,\r\n  },\r\n  label: {\r\n    textTransform: 'capitalize',\r\n  },\r\n  cameraIcon: {\r\n    opacity: '0.5',\r\n    paddingLeft: '10px'\r\n  },\r\n  cardContent: {\r\n    paddingBottom: '16px'\r\n  },\r\n  demo: {\r\n    padding: '16px 32px 24px',\r\n    // [theme.breakpoints.up(\"sm\")]: {\r\n    //   width: '560px'\r\n    // }\r\n  },\r\n  demoOne: {\r\n    padding: '16px 32px 5px',\r\n    // [theme.breakpoints.up(\"sm\")]: {\r\n    //   width: '560px'\r\n    // }\r\n  },\r\n  toggleContainer: {\r\n    height: 56,\r\n    padding: `${theme.spacing.unit}px ${theme.spacing.unit * 2}px`,\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'flex-start',\r\n    margin: `${theme.spacing.unit}px 0`,\r\n  },\r\n  button: {\r\n    margin: theme.spacing.unit,\r\n  },\r\n\r\n});\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    beacon: state.beacon,\r\n    vitals: state.vitals,\r\n    info: state.info,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    addUsername: username => dispatch(addUsername(username)),\r\n    fetchEcgVitals: vitals => dispatch(fetchEcgVitals(vitals)),\r\n    fetchHeartrateVitals: vitals => dispatch(fetchHeartrateVitals(vitals)),\r\n  };\r\n};\r\n\r\nlet id = 0;\r\nfunction createData(name, calories, fat, carbs, protein) {\r\n  id += 1;\r\n  return { id, name, calories, fat, carbs, protein };\r\n}\r\n\r\n\r\n\r\nclass PlaybackMode extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      submittedForm: false,\r\n      values: {},\r\n      anchorEl: null,\r\n      auth: true,\r\n      name: \"Santa Claus\",\r\n      owner: \"\",\r\n      image: \"\",\r\n      imagePreview: \"\",\r\n      imageName: \"\",\r\n      ward: \"\",\r\n      contactDistance: \"\",\r\n      tab: 0,\r\n      beacon: this.props.beacon,\r\n      response: [],\r\n      chartMode: ['live'],\r\n      endpoint: \"https://330f4015.ngrok.io\",\r\n      startTime: '2019-04-15T10:30',\r\n      endTime: '2019-04-15T10:30',\r\n      ecg: [],\r\n      heartrate: [],\r\n      error: \"\",\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n\r\n    if(this.props.info != \"\")\r\n      this.setState({name: this.props.info.name})\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if(this.props.vitals !== prevProps.vitals ) {\r\n      this.setState({vitals: this.props.vitals})\r\n    }\r\n  }\r\n\r\n  toggleDrawer = () => {\r\n    this.setState({ drawer: true});\r\n  }\r\n\r\n  handleFormat = (event, chartMode) => {\r\n    if(chartMode != this.state.chartMode && chartMode != null)\r\n      this.setState({ chartMode });\r\n  }\r\n  toggleCloseDrawer = () => {\r\n    this.setState({ drawer: false });\r\n  }\r\n\r\n  handleMenu = event => {\r\n    this.setState({ drawer: false });\r\n    this.setState({ anchorEl: event.currentTarget });\r\n  };\r\n\r\n  handleClose = () => {\r\n    this.setState({ anchorEl: null });\r\n  };\r\n\r\n  backToMap = (e) => {\r\n    e.preventDefault();\r\n    this.props.history.push('/locationTracking');\r\n  }\r\n\r\n  handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    this.props.history.push('/home');\r\n\r\n  }\r\n\r\n  handleLoading = () => {\r\n    this.setState(state => ({\r\n      loading: !state.loading,\r\n    }))\r\n  }\r\n\r\n  handleChange = prop => event => {\r\n    this.setState({ [prop]: event.target.value });\r\n  };\r\n\r\n  handleTabChange = (event, value) => {\r\n   this.setState({ tab: value });\r\n };\r\n\r\n  imageUpload = (e) => {\r\n    if(e.target.files[0]) {\r\n      const image = e.target.files[0];\r\n      this.setState({image})\r\n      this.setState({imagePreview : URL.createObjectURL(e.target.files[0])})\r\n      this.setState({imageName : image.name})\r\n    }\r\n  }\r\n\r\n  removeImage = () => {\r\n    this.setState({image : \"\"});\r\n    this.setState({imagePreview : \"\"});\r\n    this.setState({imageName: \"\"});\r\n  }\r\n\r\n  updateStart = (e) => {\r\n    this.setState({startTime: e.target.value})\r\n  }\r\n\r\n  updateEnd = (e) => {\r\n    this.setState({endTime: e.target.value})\r\n  }\r\n\r\n  cancel = () => {\r\n    this.props.history.push('/home');\r\n  }\r\n\r\n  submitQuery = (index) => {\r\n    let timeStart = this.state.startTime\r\n    let timeEnd = this.state.endTime\r\n    timeStart = timeStart + ':00'\r\n    timeEnd = timeEnd + ':00'\r\n    const query = {\r\n      \"size\": 10000,\r\n      \"sort\" : [{ \"timestamp\" : {\"order\" : \"asc\"}}],\r\n      \"query\": {\r\n        \"range\" : {\r\n            \"timestamp\" : {\r\n              \"gte\": timeStart,\r\n              \"lte\": timeEnd,\r\n              }\r\n          }\r\n        }\r\n\r\n    };\r\n\r\n    axios.get(`http://137.132.165.161:9200/${index}/_search?scroll=1m`, {\r\n      params: {\r\n        source: JSON.stringify(query),\r\n        source_content_type: 'application/json'\r\n      }\r\n    }).then((res) => {\r\n\r\n      let fullTrace = res.data.hits.hits\r\n      let fullShot = []\r\n      let counter = 0\r\n      fullShot = fullShot.concat(fullTrace)\r\n\r\n      let scroll_size = res.data.hits.total\r\n\r\n      let scroll_id = res.data._scroll_id\r\n\r\n      let scrollQuery = {\r\n          'scroll' : '1m',\r\n          'scroll_id': scroll_id\r\n        }\r\n\r\n        if(index == \"ecg\")\r\n          this.getAPI(scrollQuery, fullShot, index)\r\n\r\n    });\r\n  }\r\n\r\n  getAPI = (scrollQuery, fullShot, index) => {\r\n\r\n         axios.get(`http://137.132.165.161:9200/_search/scroll`, {\r\n          params: {\r\n            source: JSON.stringify(scrollQuery),\r\n            source_content_type: 'application/json'\r\n          }\r\n      }).then((res) => {\r\n        let fullTrace = res.data.hits.hits\r\n        fullShot = fullShot.concat(fullTrace)\r\n\r\n        let scroll_id = res.data._scroll_id\r\n        let scrollQuery = {\r\n          'scroll' : '1m',\r\n          'scroll_id': scroll_id\r\n        }\r\n        let scroll_size = res.data.hits.hits.length\r\n\r\n        if(scroll_size > 0) {\r\n          this.getAPI(scrollQuery, fullShot, index)\r\n        } else {\r\n          this.setState({[index]: fullShot})\r\n        }\r\n      })\r\n  }\r\n\r\n  submitForm = () => {\r\n    let unixStart = new Date(this.state.startTime)\r\n    let unixEnd = new Date(this.state.endTime)\r\n\r\n    if(unixStart <= unixEnd) {\r\n      this.submitQuery('ecg');\r\n      this.submitQuery('heartrate');\r\n      this.setState({error: \"\"})\r\n    } else {\r\n      this.setState({error: 'Time range is invalid'})\r\n    }\r\n\r\n  }\r\n\r\n  renderPlaybackForm = () => {\r\n\r\n    const { classes } = this.props;\r\n    let currentTime = moment().format();\r\n\r\n    let timeSplit  = currentTime.split('T')\r\n    let timeString = timeSplit[0] + 'T' + timeSplit[1].slice(0, 5)\r\n\r\n    let form = <div>\r\n    <form className={classes.container} noValidate>\r\n\r\n      <TextField\r\n        id=\"datetime-local\"\r\n        label=\"Start\"\r\n        variant=\"outlined\"\r\n        type=\"datetime-local\"\r\n        style={{marginRight: '1em', marginBottom: '1em'}}\r\n        defaultValue={this.state.startTime}\r\n        className={classes.textField}\r\n        onChange={this.updateStart}\r\n        error={this.state.error == \"\" ? false : true}\r\n        InputLabelProps={{\r\n          shrink: true,\r\n        }}\r\n      />\r\n\r\n      <TextField\r\n        id=\"datetime-local\"\r\n        label=\"End\"\r\n        variant=\"outlined\"\r\n        type=\"datetime-local\"\r\n        defaultValue={this.state.endTime}\r\n        className={classes.textField}\r\n        onChange={this.updateEnd}\r\n        error={this.state.error == \"\" ? false : true}\r\n        InputLabelProps={{\r\n          shrink: true,\r\n        }}\r\n      />\r\n      <div>\r\n      <Button variant=\"outlined\" color=\"primary\" onClick={this.submitForm} className={classes.button}>\r\n        Fetch\r\n      </Button>\r\n      </div>\r\n    </form>\r\n\r\n    </div>\r\n\r\n    return form\r\n  }\r\n  render() {\r\n\r\n    const { classes } = this.props;\r\n    const { anchorEl, auth } = this.state;\r\n    const open = Boolean(anchorEl)\r\n\r\n    return (\r\n      <div className={classes.root}>\r\n        {this.renderPlaybackForm()}\r\n        <div> <Typography variant=\"subtitle1\" style={{color: 'red'}}> {this.state.error}  </Typography> </div>\r\n        <ExpansionPanel>\r\n          <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\r\n            <Typography variant=\"subtitle1\" gutterBottom>Heart Rate</Typography>\r\n          </ExpansionPanelSummary>\r\n          <ExpansionPanelDetails>\r\n            <div style={{width: '100%'}}>\r\n              <PlaybackChart vitals={this.state.heartrate} />\r\n            </div>\r\n          </ExpansionPanelDetails>\r\n        </ExpansionPanel>\r\n\r\n        <ExpansionPanel>\r\n          <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\r\n            <Typography variant=\"subtitle1\" gutterBottom >ECG</Typography>\r\n          </ExpansionPanelSummary>\r\n          <ExpansionPanelDetails>\r\n            <div style={{width: '100%'}}>\r\n              <PlaybackEcgChart vitals={this.state.ecg} />\r\n            </div>\r\n          </ExpansionPanelDetails>\r\n        </ExpansionPanel>\r\n\r\n        <ExpansionPanel>\r\n          <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\r\n            <Typography variant=\"subtitle1\" gutterBottom >Respiration</Typography>\r\n          </ExpansionPanelSummary>\r\n          <ExpansionPanelDetails>\r\n            <div style={{width: '100%'}}>\r\n              <PlaybackRespirationChart vitals={this.state.ecg} />\r\n            </div>\r\n          </ExpansionPanelDetails>\r\n        </ExpansionPanel>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst ConnectedPlaybackMode = connect(mapStateToProps, mapDispatchToProps)(PlaybackMode);\r\n\r\nexport default withStyles(styles)(ConnectedPlaybackMode);\r\n","import React from \"react\";\r\nimport { render } from \"react-dom\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\nimport 'chartjs-plugin-streaming';\r\nimport { Line } from 'react-chartjs-2';\r\n\r\nconst styles = theme => ({\r\n  \"chart-container\": {\r\n    height: 400\r\n  }\r\n});\r\n\r\nclass HealthChart extends React.Component {\r\n  state = {\r\n    lineChartData: {\r\n\r\n      datasets: [\r\n        {\r\n          label: \"BTC-USD\",\r\n          backgroundColor: \"rgba(0, 0, 0, 0)\",\r\n          borderColor: this.props.theme.palette.primary.main,\r\n          pointBackgroundColor: this.props.theme.palette.secondary.main,\r\n          pointBorderColor: this.props.theme.palette.secondary.main,\r\n          borderWidth: \"2\",\r\n          pointRadius: 0,\r\n          lineTension: 0,\r\n          data: []\r\n        }\r\n      ]\r\n    },\r\n    lineChartOptions: {\r\n      events: [],\r\n      responsive: true,\r\n      maintainAspectRatio: false,\r\n\r\n      legend: {\r\n        display: false,\r\n      },\r\n\r\n      elements: {\r\n\r\n      },\r\n      tooltips: {\r\n        enabled: true\r\n      },\r\n      plugins: {\r\n        streaming: {\r\n          frameRate: 30\r\n        }\r\n      },\r\n      scales: {\r\n        xAxes: [\r\n          {\r\n            type: 'realtime',\r\n            realtime: {\r\n              duration: 30000,\r\n              delay: 1000,\r\n              pause: false,\r\n\r\n            },\r\n            ticks: {\r\n              autoSkip: false,\r\n              maxTicksLimit: 10\r\n            }\r\n          }\r\n        ]\r\n      }\r\n    }\r\n  };\r\n\r\n\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if(this.props.vitals !== prevProps.vitals && this.props.vitals != null ) {\r\n      let vitals = this.props.vitals\r\n\r\n      const oldBtcDataSet = this.state.lineChartData.datasets[0];\r\n      const newBtcDataSet = { ...oldBtcDataSet };\r\n      vitals.map(vital => {\r\n        let value = vital.ecgHrPoint\r\n        let epoch = vital.timestamp;\r\n        let date = new Date(epoch)\r\n        let vitalSign = {x: epoch, y: value}\r\n        newBtcDataSet.data.push(vitalSign);\r\n      })\r\n\r\n\r\n\r\n      const newChartData = {\r\n        ...this.state.lineChartData,\r\n        datasets: [newBtcDataSet],\r\n      };\r\n\r\n      this.setState({ lineChartData: newChartData });\r\n\r\n    }\r\n\r\n  }\r\n\r\n  componentWillUnmount() {\r\n  }\r\n\r\n  render() {\r\n    const { classes } = this.props;\r\n\r\n    return (\r\n      <div className={classes[\"chart-container\"]}>\r\n      <Line\r\n        data={this.state.lineChartData}\r\n        options={this.state.lineChartOptions}\r\n      />\r\n\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withStyles(styles, { withTheme: true })(HealthChart);\r\n","import React from \"react\";\r\nimport { render } from \"react-dom\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\n// import Chart from \"./Chart\";\r\nimport 'chartjs-plugin-streaming';\r\nimport { Line } from 'react-chartjs-2';\r\n\r\nconst styles = theme => ({\r\n  \"chart-container\": {\r\n    height: 400\r\n  }\r\n});\r\n\r\nclass RespirationChart extends React.Component {\r\n  state = {\r\n    lineChartData: {\r\n\r\n      datasets: [\r\n        {\r\n          label: \"BTC-USD\",\r\n          backgroundColor: \"rgba(0, 0, 0, 0)\",\r\n          borderColor: this.props.theme.palette.primary.main,\r\n          pointBackgroundColor: this.props.theme.palette.secondary.main,\r\n          pointBorderColor: this.props.theme.palette.secondary.main,\r\n          pointRadius: 0,\r\n          borderWidth: \"2\",\r\n          lineTension: 0,\r\n          data: []\r\n        }\r\n      ]\r\n    },\r\n    lineChartOptions: {\r\n      events: [],\r\n      responsive: true,\r\n      maintainAspectRatio: false,\r\n\r\n      legend: {\r\n        display: false,\r\n      },\r\n\r\n      elements: {\r\n\r\n      },\r\n      tooltips: {\r\n        enabled: true\r\n      },\r\n      plugins: {\r\n        streaming: {\r\n          frameRate: 30\r\n        }\r\n      },\r\n      scales: {\r\n        xAxes: [\r\n          {\r\n            type: 'realtime',\r\n            realtime: {\r\n              duration: 30000,\r\n              delay: 1000,\r\n              pause: false,\r\n\r\n            },\r\n            ticks: {\r\n              autoSkip: false,\r\n              maxTicksLimit: 10\r\n            }\r\n          }\r\n        ]\r\n      }\r\n    }\r\n  };\r\n\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if(this.props.vitals !== prevProps.vitals && this.props.vitals != null ) {\r\n      let vitals = this.props.vitals\r\n\r\n      const oldBtcDataSet = this.state.lineChartData.datasets[0];\r\n      const newBtcDataSet = { ...oldBtcDataSet };\r\n      vitals.map(vital => {\r\n        let value = vital.resPoint\r\n        let epoch = vital.timestamp;\r\n        let date = new Date(epoch)\r\n        let vitalSign = {x: epoch, y: value}\r\n        newBtcDataSet.data.push(vitalSign);\r\n      })\r\n\r\n\r\n\r\n      const newChartData = {\r\n        ...this.state.lineChartData,\r\n        datasets: [newBtcDataSet],\r\n\r\n      };\r\n\r\n      this.setState({ lineChartData: newChartData });\r\n\r\n    }\r\n\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    // this.ws.close();\r\n  }\r\n\r\n  render() {\r\n    const { classes } = this.props;\r\n\r\n    return (\r\n      <div className={classes[\"chart-container\"]}>\r\n      <Line\r\n\r\n        data={this.state.lineChartData}\r\n        options={this.state.lineChartOptions}\r\n      />\r\n\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withStyles(styles, { withTheme: true })(RespirationChart);\r\n","import React, {Component} from 'react';\r\nimport { connect } from \"react-redux\";\r\nimport { fetchMaps, confirmType, fetchDeviceLocations } from \"./actions/index\";\r\nimport MapGL, {Marker, Popup, NavigationControl} from 'react-map-gl';\r\nimport ReactMapboxGl from 'react-mapbox-gl';\r\nimport { Source, Layer, Feature } from \"react-mapbox-gl\";\r\nimport mapboxgl from 'mapbox-gl';\r\n// import StatePin from './StatePin'\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport axios from 'axios';\r\nconst e             = React.createElement;\r\n\r\nconst restUrlHTTPS = `http://137.132.165.139:3000/api`;\r\n\r\nconst TOKEN = 'pk.eyJ1IjoiZnlwZW5nIiwiYSI6ImNqcmFlazM4YjAxejkzeW1wbWg2Zmp2aWsifQ.obOnEjbqcpEWu9HIh6zPlw'; // Set your mapbox token here\r\nconst graphqlUrlHTTPS = 'http://137.132.165.139:3000/graphql';\r\n\r\nconst ReactMap = ReactMapboxGl({\r\n  accessToken: `${TOKEN}`,\r\n  maxZoom:    13,\r\n  minZoom:    8,\r\n})\r\nconst navStyle = {\r\n  position: 'absolute',\r\n  top: 0,\r\n  left: 0,\r\n  padding: '10px'\r\n};\r\n\r\nconst mapStateToProps = state => {\r\n\r\n  return {\r\n    maps: state.maps,\r\n    devices: state.devices,\r\n    deviceLogs: state.deviceLogs,\r\n    patients: state.patients,\r\n    assets: state.assets,\r\n    staff: state.staff,\r\n    info: state.info,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    confirmType: type => dispatch(confirmType(type)),\r\n    fetchMaps: maps => dispatch(fetchMaps(maps)),\r\n    fetchDeviceLocations: deviceLogs => dispatch(fetchDeviceLocations(deviceLogs))\r\n  };\r\n};\r\n\r\nclass InfoMap extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      viewport: {\r\n        latitude: 37.785164,\r\n        longitude: -100,\r\n        zoom: 2.8,\r\n        bearing: 0,\r\n        pitch: 0,\r\n        width: 500,\r\n        height: 500,\r\n      },\r\n      popupInfo: null,\r\n      map: '',\r\n      loading: true,\r\n      sourceOptions: {},\r\n      center: [-0.2416815, 51.5285582 ],\r\n      staticDevices: \"\",\r\n      mobileDevices: [],\r\n      assetDevices: [],\r\n      staffDevices: [],\r\n      circleRadius: 30,\r\n      loadingStep: 1,\r\n\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.fetch()\r\n\r\n  }\r\n\r\n  fetch = (dispatch) => {\r\n    let query = `\r\n      query {\r\n        maps {\r\n          id\r\n          scale\r\n          coordinates\r\n          imageURL\r\n          navMesh\r\n          navPath\r\n          pois\r\n        }\r\n      }\r\n    `\r\n    this.request({query})\r\n    .then ((data) => {\r\n        let loading = this.state.loading\r\n        if(loading) {\r\n          this.getDeviceLogs()\r\n        }\r\n        this.props.fetchMaps(data.data.data.maps)\r\n      }\r\n    )\r\n  }\r\n\r\n  request = ({query, variables}) => {\r\n    let promise = axios({\r\n      method:   'post',\r\n      url:      `${graphqlUrlHTTPS}`,\r\n      headers:  {'Content-Type': 'application/json'},\r\n      data:     JSON.stringify({query, variables})\r\n    })\r\n    return promise;\r\n  }\r\n\r\n  getDeviceLogs = (dispatch) => {\r\n\r\n    let promise = axios({\r\n      method:   'get',\r\n      url:      `${restUrlHTTPS}/Devices/logs`,\r\n      headers:  {'Content-Type': 'application/json'},\r\n    }).then (data => {\r\n\r\n        this.props.fetchDeviceLocations(data.data)\r\n      }\r\n    )\r\n    return promise;\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('resize', this._resize);\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n\r\n    if(this.props.deviceLogs !== prevProps.deviceLogs) {\r\n      if(this.state.map == '' && this.state.loading == true) {\r\n        let beacon = \"b1\"\r\n\r\n        if(this.props.info != \"\" && this.props.info != null) {\r\n          beacon = this.props.info.beacon[0]\r\n        }\r\n        let map = ''\r\n        this.props.deviceLogs.map(log => {\r\n          if(log.id == beacon) {\r\n            map = log.map.id\r\n          }\r\n        })\r\n\r\n        this.props.maps.map(displayMap => {\r\n          if(displayMap.id == map) {\r\n            map = displayMap\r\n\r\n            let newObj = JSON.parse(JSON.stringify(displayMap))\r\n            this.setState({map: newObj})\r\n          }\r\n        })\r\n\r\n        this.initializeMap(map)\r\n        this.setState({loading : false})\r\n        this.timer = setInterval(()=> this.getDeviceLogs(), 1000);\r\n      }\r\n      this.createBeaconMarkers()\r\n    }\r\n  }\r\n\r\n  getChildContext() {\r\n    return {map: this.state.map};\r\n  }\r\n  mapgl = () => {\r\n    return this.refs.map.getChildContext().map;\r\n  }\r\n\r\n  getChildContext = () => {\r\n    return { map: this.map };\r\n  };\r\n\r\n  createBeaconMarkers = (initialize) => {\r\n\r\n    let map = this.state.map\r\n    if(initialize != null) {\r\n      map = initialize;\r\n    }\r\n    if(map != \"\") {\r\n      let filteredLogs = this.props.deviceLogs.filter(device => device.map.id == map.id);\r\n      let mobileDevices = []\r\n      let staffDevices = []\r\n      let assetDevices = []\r\n\r\n      filteredLogs = filteredLogs.filter(device => device.id == this.props.info.beacon[0]);\r\n      filteredLogs.map(device => {\r\n        if(this.props.info.type == \"Patient\") {\r\n          this.props.patients.forEach(patient => {\r\n            if(patient.beacon != null) {\r\n            if(device.id == patient.beacon[0]) {\r\n              let newObj = JSON.parse(JSON.stringify(device))\r\n              newObj.id = patient.name\r\n              mobileDevices.push(newObj)\r\n            }\r\n          }\r\n          })\r\n        } else if(this.props.info.type == \"Asset\") {\r\n          this.props.assets.forEach(asset => {\r\n            if(asset.beacon != null) {\r\n            if(device.id == asset.beacon[0]) {\r\n              let newObj = JSON.parse(JSON.stringify(device))\r\n              newObj.id = asset.name\r\n              assetDevices.push(newObj)\r\n            }\r\n          }\r\n          })\r\n        } else {\r\n          this.props.staff.forEach(staffmem => {\r\n            if(staffmem.beacon != null) {\r\n            if(device.id == staffmem.beacon[0]) {\r\n              let newObj = JSON.parse(JSON.stringify(device))\r\n              newObj.id = staffmem.name\r\n              staffDevices.push(newObj)\r\n            }\r\n          }\r\n          })\r\n        }\r\n      })\r\n\r\n      this.setState({mobileDevices})\r\n      this.setState({staffDevices})\r\n      this.setState({assetDevices})\r\n\r\n    }\r\n\r\n  }\r\n  initializeMap = (map, jump) => {\r\n\r\n    this.setState({initial: map})\r\n    this.setState({map})\r\n\r\n\r\n    let sourceOptions = {\r\n      coordinates: (map != null ? map.coordinates : undefined),\r\n      type:         'image',\r\n      url:          (map != null ? map.imageURL : undefined)\r\n    }\r\n    this.setState({sourceOptions})\r\n\r\n    if(map != \"\" && this.props.info != \"\" && this.props.info != null) {\r\n      const bounds = new mapboxgl.LngLatBounds(this.__guard__(map != null ? map.coordinates : undefined, x => x[3]), this.__guard__(map != null ? map.coordinates : undefined, x1 => x1[1]));\r\n      let center = bounds.getCenter();\r\n      this.setState({center});\r\n      let filteredLogs = this.props.deviceLogs.filter(device => device.map.id == map.id);\r\n      filteredLogs = filteredLogs.filter(device => device.id == this.props.info.beacon[0]);\r\n      let mobileDevices = []\r\n      let assetDevices = []\r\n      let staffDevices = []\r\n      filteredLogs.map(device => {\r\n        if(this.props.info.type == \"Patient\") {\r\n\r\n          this.props.patients.forEach(patient => {\r\n            if(patient.beacon != null) {\r\n            if(device.id == patient.beacon[0]) {\r\n              let newObj = JSON.parse(JSON.stringify(device))\r\n              newObj.id = patient.name\r\n              mobileDevices.push(newObj)\r\n            }\r\n          }\r\n          })\r\n        } else if(this.props.info.type == \"Asset\") {\r\n          this.props.assets.forEach(asset => {\r\n            if(asset.beacon != null) {\r\n            if(device.id == asset.beacon[0]) {\r\n              let newObj = JSON.parse(JSON.stringify(device))\r\n              newObj.id = asset.name\r\n              assetDevices.push(newObj)\r\n            }\r\n          }\r\n          })\r\n        } else {\r\n          this.props.staff.forEach(staffmem => {\r\n            if(staffmem.beacon != null) {\r\n            if(device.id == staffmem.beacon[0]) {\r\n              let newObj = JSON.parse(JSON.stringify(device))\r\n              newObj.id = staffmem.name\r\n              staffDevices.push(newObj)\r\n            }\r\n          }\r\n          })\r\n\r\n        }\r\n      })\r\n\r\n      this.setState({mobileDevices})\r\n      this.setState({assetDevices})\r\n      this.setState({staffDevices})\r\n      let staticDevices = this.props.devices.filter(device => device.type == 'static');\r\n      staticDevices = staticDevices.filter(device => device.location != null)\r\n      staticDevices = staticDevices.filter(device => device.location.map.id == map.id)\r\n      this.setState({staticDevices})\r\n      this.setState({loading: false})\r\n      this.createBeaconMarkers(map)\r\n    }\r\n\r\n  }\r\n\r\n  onStyleLoad = (mapgl) => {\r\n    const { onLoad, map } = this.props;\r\n    if (map != null) { this.initializeMap(map); }\r\n  }\r\n\r\n  getCirclePaint = () => ({\r\n    'circle-radius': this.state.circleRadius,\r\n    'circle-color': '#FFFF00',\r\n    'circle-opacity': 0.4\r\n  });\r\n\r\n  _resize = () => {\r\n    this.setState({\r\n      viewport: {\r\n        ...this.state.viewport,\r\n        width: '100%',\r\n        height: '70vh'\r\n      }\r\n    });\r\n  };\r\n\r\n  _updateViewport = (viewport) => {\r\n    this.setState({viewport});\r\n  }\r\n\r\n  __guard__ = (value, transform) => {\r\n    return (typeof value !== 'undefined' && value !== null) ? transform(value) : undefined;\r\n  }\r\n\r\n  renderHighlightDevices = () => {\r\n    let patients = this.props.patients;\r\n    let beacons = this.state.mobileDevices;\r\n    let devices = []\r\n    for(let i = 0 ; i < patients.length; i++) {\r\n\r\n      beacons.map((device) => {\r\n        if(patients[i].beacon == device.id && patients[i].highlight == true) {\r\n        devices.push(\r\n        <Feature\r\n          key={device.id}\r\n          coordinates={[device.lng, device.lat]}\r\n          properties={{\r\n            title:  device.id,\r\n            id:     device.id\r\n          }}\r\n        />)\r\n      }})\r\n\r\n    }\r\n\r\n    return devices;\r\n  }\r\n  renderDevices = (type) => {\r\n    let devices = []\r\n    let createDevices = []\r\n    if(type == 'static')\r\n      createDevices = this.state.staticDevices.map ((device) => {\r\n        devices.push(\r\n        <Feature\r\n          key={device.id}\r\n          coordinates={[device.location.lng, device.location.lat]}\r\n          properties={{\r\n            title:  device.id,\r\n            id:     device.id\r\n          }}\r\n        />)\r\n      })\r\n    else {\r\n      createDevices = this.state.mobileDevices.map((device) => {\r\n        devices.push(\r\n        <Feature\r\n          key={device.id}\r\n          coordinates={[device.lng, device.lat]}\r\n          properties={{\r\n            title:  device.id,\r\n            id:     device.id\r\n          }}\r\n        />)\r\n      })\r\n    }\r\n\r\n    createDevices = createDevices\r\n\r\n    console.log(devices)\r\n    return devices;\r\n  }\r\n  renderPopup = () => {\r\n    return this.state.popupInfo && (\r\n      <Popup tipSize={5}\r\n        anchor=\"bottom-right\"\r\n        longitude={this.state.popupInfo.state.longitude}\r\n        latitude={this.state.popupInfo.state.latitude}\r\n        onClose={() => this.setState({popupInfo: null})}\r\n        closeOnClick={true}>\r\n        <h4>{this.state.popupInfo.state.fullName}</h4>\r\n        <p>{this.state.popupInfo.incidentNumber} {this.state.popupInfo.disaster} incident(s)</p>\r\n        <div class=\"text-center\">\r\n        <img src={this.state.popupInfo.icon.imgUrl} style={{height: \"50px\"}} />\r\n        </div>\r\n      </Popup>\r\n\r\n      )\r\n  }\r\n\r\n  renderStaffDevices = () => {\r\n    let devices = []\r\n    this.state.staffDevices.map((device) => {\r\n      devices.push(\r\n      <Feature\r\n        key={device.id}\r\n        coordinates={[device.lng, device.lat]}\r\n        properties={{\r\n          title:  device.id,\r\n          id:     device.id\r\n        }}\r\n      />)\r\n    })\r\n\r\n    return devices\r\n  }\r\n\r\n  renderAssetDevices = () => {\r\n    let devices = []\r\n    this.state.assetDevices.map((device) => {\r\n      devices.push(\r\n      <Feature\r\n        key={device.id}\r\n        coordinates={[device.lng, device.lat]}\r\n        properties={{\r\n          title:  device.id,\r\n          id:     device.id\r\n        }}\r\n      />)\r\n    })\r\n\r\n    return devices\r\n  }\r\n\r\n\r\n  render() {\r\n\r\n    const {viewport} = this.state;\r\n    let sourceOptions = this.state.sourceOptions\r\n    let imageURL = \"mapbox://styles/mapbox/dark-v9\";\r\n    let center = this.state.center\r\n    if(this.props.map != \"\") {\r\n    }\r\n    const { children, onLoad, map, height, width } = this.props;\r\n    let locationOrigin = window.location.origin\r\n    let style = {\r\n        version:  8,\r\n        name:     'custom',\r\n        sources:  {},\r\n        sprite:   `${locationOrigin}/mapbox-styles/maki`,\r\n        glyphs:   `${locationOrigin}/mapbox-styles/font/{fontstack}/{range}.pbf`,\r\n        layers:   []\r\n    }\r\n\r\n    return (\r\n      <div>\r\n      <ReactMap\r\n        style={style}\r\n        center={center}\r\n        movingMethod={'jumpTo'}\r\n        ref={this.mapLocation}\r\n        containerStyle={{\r\n          height: '70vh',\r\n          width: '100%'}}\r\n        onStyleLoad={this.onStyleLoad}\r\n      >\r\n\r\n      <Layer type=\"symbol\"\r\n      id=\"staticDevices\"\r\n      layout={{\r\n        'icon-image':             'triangle-15',\r\n        'icon-allow-overlap':     true,\r\n        'icon-ignore-placement':  true,\r\n        'text-allow-overlap':     true,\r\n        'text-ignore-placement':  true,\r\n        'text-field':             '{title}',\r\n        'text-font':              ['Open Sans Semibold'],\r\n        'text-offset':            [0, 0.8],\r\n        'text-anchor':            'top',\r\n      }}>\r\n\r\n      {\r\n        //this.state.staticDevices != \"\" ? this.renderDevices('static') : null\r\n      }\r\n      </Layer>\r\n\r\n      <Layer type=\"circle\"  paint={this.getCirclePaint()}>\r\n      {\r\n      //  this.renderHighlightDevices()\r\n      }\r\n      </Layer>\r\n      <Layer type=\"symbol\"\r\n      id=\"patientDevices\"\r\n      layout={{\r\n        'icon-image':             'marker-15',\r\n        'icon-allow-overlap':     true,\r\n        'icon-ignore-placement':  true,\r\n        'text-allow-overlap':     true,\r\n        'text-ignore-placement':  true,\r\n        'text-field':             '{title}',\r\n        'text-font':              ['Open Sans Semibold'],\r\n        'text-offset':            [0, 0.8],\r\n        'text-anchor':            'top',\r\n      }}>\r\n\r\n      {\r\n        /*this.state.mobileDevices != \"\" ? this.renderDevices('mobile') : null */\r\n        this.renderDevices('mobile')\r\n      }\r\n      </Layer>\r\n      <Layer type=\"symbol\"\r\n      id=\"staffDevices\"\r\n      layout={{\r\n        'icon-image':             'hospital-15',\r\n        'icon-allow-overlap':     true,\r\n        'icon-ignore-placement':  true,\r\n        'text-allow-overlap':     true,\r\n        'text-ignore-placement':  true,\r\n        'text-field':             '{title}',\r\n        'text-font':              ['Open Sans Semibold'],\r\n        'text-offset':            [0, 0.8],\r\n        'text-anchor':            'top',\r\n      }}>\r\n\r\n      {\r\n        /*this.state.mobileDevices != \"\" ? this.renderDevices('mobile') : null */\r\n        this.renderStaffDevices()\r\n      }\r\n      </Layer>\r\n      <Layer type=\"symbol\"\r\n      id=\"assetDevices\"\r\n      layout={{\r\n        'icon-image':             'suitcase-15',\r\n        'icon-allow-overlap':     true,\r\n        'icon-ignore-placement':  true,\r\n        'text-allow-overlap':     true,\r\n        'text-ignore-placement':  true,\r\n        'text-field':             '{title}',\r\n        'text-font':              ['Open Sans Semibold'],\r\n        'text-offset':            [0, 0.8],\r\n        'text-anchor':            'top',\r\n      }}>\r\n\r\n      {\r\n        /*this.state.mobileDevices != \"\" ? this.renderDevices('mobile') : null */\r\n        this.renderAssetDevices()\r\n      }\r\n      </Layer>\r\n      {this.state.map != \"\" ?\r\n      <Source id=\"image_source\" tileJsonSource={sourceOptions} />\r\n      : null}\r\n      <Layer id=\"image_layer\" before=\"staticDevices\" type=\"raster\" sourceId=\"image_source\"/>\r\n    </ReactMap>\r\n\r\n    <Typography variant=\"h6\" gutterBottom style={{marginTop: '1em'}}>{this.state.map != \"\" ? `Location: ${this.state.map.id}` : null} </Typography>\r\n    </div>\r\n  )\r\n  }\r\n\r\n}\r\nconst ConnectedInfoMap = connect(mapStateToProps, mapDispatchToProps)(InfoMap);\r\n\r\nexport default ConnectedInfoMap;\r\n","import React, {Component} from 'react';\r\nimport { connect } from \"react-redux\";\r\nimport { fetchMaps, confirmType, fetchDeviceLocations } from \"./actions/index\";\r\nimport MapGL, {Marker, Popup, NavigationControl} from 'react-map-gl';\r\nimport ReactMapboxGl from 'react-mapbox-gl';\r\nimport { Source, Layer, Feature } from \"react-mapbox-gl\";\r\nimport Slider from '@material-ui/lab/Slider';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Button from '@material-ui/core/Button';\r\nimport mapboxgl from 'mapbox-gl';\r\n// import StatePin from './StatePin'\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport axios from 'axios';\r\nconst e             = React.createElement;\r\n\r\nconst restUrlHTTPS = `http://137.132.165.139:3000/api`;\r\n\r\nconst TOKEN = 'pk.eyJ1IjoiZnlwZW5nIiwiYSI6ImNqcmFlazM4YjAxejkzeW1wbWg2Zmp2aWsifQ.obOnEjbqcpEWu9HIh6zPlw'; // Set your mapbox token here\r\nconst graphqlUrlHTTPS = 'http://137.132.165.139:3000/graphql';\r\n\r\nconst ReactMap = ReactMapboxGl({\r\n  accessToken: `${TOKEN}`,\r\n  maxZoom:    13,\r\n  minZoom:    8,\r\n})\r\nconst navStyle = {\r\n  position: 'absolute',\r\n  top: 0,\r\n  left: 0,\r\n  padding: '10px'\r\n};\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    maps: state.maps,\r\n    devices: state.devices,\r\n    deviceLogs: state.deviceLogs,\r\n    patients: state.patients,\r\n    info: state.info\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    confirmType: type => dispatch(confirmType(type)),\r\n    fetchMaps: maps => dispatch(fetchMaps(maps)),\r\n    fetchDeviceLocations: deviceLogs => dispatch(fetchDeviceLocations(deviceLogs))\r\n  };\r\n};\r\n\r\nclass InfoMap extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      viewport: {\r\n        latitude: 37.785164,\r\n        longitude: -100,\r\n        zoom: 2.8,\r\n        bearing: 0,\r\n        pitch: 0,\r\n        width: 500,\r\n        height: 500,\r\n      },\r\n      popupInfo: null,\r\n      map: '',\r\n      loading: true,\r\n      sourceOptions: {},\r\n      center: [-0.2416815, 51.5285582 ],\r\n      staticDevices: \"\",\r\n      mobileDevices: [],\r\n      circleRadius: 30,\r\n      value: 0,\r\n      max: 6,\r\n      playback: false,\r\n\r\n    };\r\n    // this.mapLocation = React.createRef(),\r\n    // this.inputNew = React.createRef()\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.fetch()\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    clearInterval(this.timer)\r\n    this.timer = null\r\n  }\r\n\r\n  startPlayback = () => {\r\n    let value = this.state.value\r\n    value += 1\r\n    if(value < this.state.max && this.state.playback == false) {\r\n        this.timer = setInterval(()=> this.playback(), 100);\r\n        this.setState({playback: true})\r\n    }\r\n\r\n  }\r\n\r\n  stopTimer = () => {\r\n    clearInterval(this.timer)\r\n    this.setState({playback: false})\r\n  }\r\n\r\n\r\n\r\n  playback = () => {\r\n    let value = this.state.value\r\n    value += 1\r\n    if(value > this.state.max) {\r\n      this.stopTimer()\r\n    } else {\r\n      this.handleChange('', value)\r\n    }\r\n  }\r\n\r\n  fetch = (dispatch) => {\r\n    let query = `\r\n      query {\r\n        maps {\r\n          id\r\n          scale\r\n          coordinates\r\n          imageURL\r\n          navMesh\r\n          navPath\r\n          pois\r\n        }\r\n      }\r\n    `\r\n    this.request({query})\r\n    .then ((data) => {\r\n        let loading = this.state.loading\r\n        if(loading) {\r\n\r\n        }\r\n        this.props.fetchMaps(data.data.data.maps)\r\n      }\r\n    )\r\n  }\r\n\r\n  request = ({query, variables}) => {\r\n    let promise = axios({\r\n      method:   'post',\r\n      url:      `${graphqlUrlHTTPS}`,\r\n      headers:  {'Content-Type': 'application/json'},\r\n      data:     JSON.stringify({query, variables})\r\n    })\r\n    return promise;\r\n  }\r\n\r\n  updateSlider = () => {\r\n    let lengthSlider = this.props.locationData.length -1\r\n    this.setState({max: lengthSlider})\r\n  }\r\n\r\n  getDeviceLogs = (dispatch) => {\r\n\r\n    let promise = axios({\r\n      method:   'get',\r\n      url:      `${restUrlHTTPS}/Devices/logs`,\r\n      headers:  {'Content-Type': 'application/json'},\r\n    }).then (data => {\r\n\r\n        this.props.fetchDeviceLocations(data.data)\r\n      }\r\n    )\r\n    return promise;\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('resize', this._resize);\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n\r\n    if(this.props.locationData != prevProps.locationData) {\r\n      this.updateSlider()\r\n      if(this.state.map == '' && this.state.loading == true && this.props.locationData.length != 0) {\r\n\r\n        let map = ''\r\n        let locationData = this.props.locationData\r\n\r\n        this.props.maps.map(displayMap => {\r\n          if(displayMap.id == locationData[this.state.value]._source.map.id) {\r\n            map = displayMap\r\n            let newObj = JSON.parse(JSON.stringify(displayMap))\r\n            this.setState({map: newObj})\r\n          }\r\n        })\r\n        this.initializeMap(map)\r\n        this.setState({loading : false})\r\n      }\r\n      this.createBeaconMarkers()\r\n    }\r\n\r\n  }\r\n\r\n  getChildContext() {\r\n    return {map: this.state.map};\r\n  }\r\n  mapgl = () => {\r\n    return this.refs.map.getChildContext().map;\r\n  }\r\n\r\n  getChildContext = () => {\r\n    return { map: this.map };\r\n  };\r\n\r\n\r\n  createBeaconMarkers = (initialize) => {\r\n\r\n    let map = this.state.map\r\n    if(initialize != null) {\r\n      map = initialize;\r\n    }\r\n    if(map != \"\") {\r\n\r\n      let mobileDevices = []\r\n      let newObj = JSON.parse(JSON.stringify(this.props.locationData[this.state.value]._source))\r\n      if(this.props.info != \"\" && this.props.info != null)\r\n        newObj.id = this.props.info.name\r\n      mobileDevices.push(newObj)\r\n      this.setState({mobileDevices})\r\n    }\r\n\r\n  }\r\n  initializeMap = (map, jump) => {\r\n    this.setState({initial: map})\r\n    this.setState({map})\r\n\r\n    let sourceOptions = {\r\n      coordinates: (map != null ? map.coordinates : undefined),\r\n      type:         'image',\r\n      url:          (map != null ? map.imageURL : undefined)\r\n    }\r\n    this.setState({sourceOptions})\r\n\r\n    if(map != \"\") {\r\n      const bounds = new mapboxgl.LngLatBounds(this.__guard__(map != null ? map.coordinates : undefined, x => x[3]), this.__guard__(map != null ? map.coordinates : undefined, x1 => x1[1]));\r\n      let center = bounds.getCenter();\r\n      this.setState({center});\r\n      let filteredLogs = this.props.deviceLogs.filter(device => device.map.id == map.id);\r\n      let mobileDevices = []\r\n      filteredLogs.map(device => {\r\n        this.props.patients.forEach(patient => {\r\n          if(device.id == patient.beacon) {\r\n            //CHANGE TO PATIENT NAME\r\n            let newObj = JSON.parse(JSON.stringify(device))\r\n            newObj.id = patient.name\r\n            mobileDevices.push(newObj)\r\n          }\r\n        })\r\n      })\r\n      this.setState({mobileDevices})\r\n      let staticDevices = this.props.devices.filter(device => device.type == 'static');\r\n      staticDevices = staticDevices.filter(device => device.location != null)\r\n      staticDevices = staticDevices.filter(device => device.location.map.id == map.id)\r\n      this.setState({staticDevices})\r\n      this.setState({loading: false})\r\n      this.createBeaconMarkers(map)\r\n    }\r\n  }\r\n\r\n  onStyleLoad = (mapgl) => {\r\n    const { onLoad, map } = this.props;\r\n    if (map != null) { this.initializeMap(map); }\r\n  }\r\n\r\n  getCirclePaint = () => ({\r\n    'circle-radius': this.state.circleRadius,\r\n    'circle-color': '#FFFF00',\r\n    'circle-opacity': 0.4\r\n  });\r\n\r\n  _resize = () => {\r\n    this.setState({\r\n      viewport: {\r\n        ...this.state.viewport,\r\n        width: '100%',\r\n        height: '70vh'\r\n      }\r\n    });\r\n  };\r\n\r\n  _updateViewport = (viewport) => {\r\n    this.setState({viewport});\r\n  }\r\n\r\n  __guard__ = (value, transform) => {\r\n    return (typeof value !== 'undefined' && value !== null) ? transform(value) : undefined;\r\n  }\r\n\r\n  renderHighlightDevices = () => {\r\n    let patients = this.props.patients;\r\n    let beacons = this.state.mobileDevices;\r\n    let devices = []\r\n    for(let i = 0 ; i < patients.length; i++) {\r\n\r\n      beacons.map((device) => {\r\n        if(patients[i].beacon == device.id && patients[i].highlight == true) {\r\n        devices.push(\r\n        <Feature\r\n          key={device.id}\r\n          coordinates={[device.lng, device.lat]}\r\n          properties={{\r\n            title:  device.id,\r\n            id:     device.id\r\n          }}\r\n        />)\r\n      }})\r\n    }\r\n\r\n    return devices;\r\n  }\r\n  renderDevices = (type) => {\r\n    let devices = []\r\n    let createDevices = []\r\n    if(type == 'static')\r\n      createDevices = this.state.staticDevices.map ((device) => {\r\n        devices.push(\r\n        <Feature\r\n          key={device.id}\r\n          coordinates={[device.location.lng, device.location.lat]}\r\n          properties={{\r\n            title:  device.id,\r\n            id:     device.id\r\n          }}\r\n        />)\r\n      })\r\n    else {\r\n      createDevices = this.state.mobileDevices.map((device) => {\r\n        devices.push(\r\n        <Feature\r\n          key={device.id}\r\n          coordinates={[device.lng, device.lat]}\r\n          properties={{\r\n            title:  device.id,\r\n            id:     device.id\r\n          }}\r\n        />)\r\n      })\r\n    }\r\n    return devices;\r\n  }\r\n\r\n  formatUnix = () => {\r\n    let unix = this.props.locationData[this.state.value]._source.time /1000\r\n    let months_arr = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];\r\n    let date = new Date(unix*1000);\r\n    let year = date.getFullYear();\r\n    let month = months_arr[date.getMonth()];\r\n    let day = date.getDate();\r\n    let hours = date.getHours();\r\n    let minutes = \"0\" + date.getMinutes();\r\n    let seconds = \"0\" + date.getSeconds();\r\n    let convdataTime = day+'-'+month+'-'+year+' '+hours + ':' + minutes.substr(-2) + ':' + seconds.substr(-2);\r\n    return convdataTime\r\n  }\r\n\r\n  handleChange = (event, value) => {\r\n    this.setState({ value });\r\n    if(this.props.locationData[value]._source.map.id != this.state.map.id) {\r\n      let map = \"\"\r\n      this.props.maps.map(displayMap => {\r\n        if(displayMap.id == this.props.locationData[this.state.value]._source.map.id) {\r\n          map = displayMap\r\n          let newObj = JSON.parse(JSON.stringify(displayMap))\r\n          this.setState({map: newObj})\r\n        }\r\n      })\r\n      this.initializeMap(map)\r\n    }\r\n    this.createBeaconMarkers()\r\n  }\r\n  renderPopup = () => {\r\n    return this.state.popupInfo && (\r\n      <Popup tipSize={5}\r\n        anchor=\"bottom-right\"\r\n        longitude={this.state.popupInfo.state.longitude}\r\n        latitude={this.state.popupInfo.state.latitude}\r\n        onClose={() => this.setState({popupInfo: null})}\r\n        closeOnClick={true}>\r\n        <h4>{this.state.popupInfo.state.fullName}</h4>\r\n        <p>{this.state.popupInfo.incidentNumber} {this.state.popupInfo.disaster} incident(s)</p>\r\n        <div class=\"text-center\">\r\n          <img src={this.state.popupInfo.icon.imgUrl} style={{height: \"50px\"}} />\r\n        </div>\r\n      </Popup>\r\n      )\r\n  }\r\n\r\n\r\n  render() {\r\n\r\n    const {viewport} = this.state;\r\n    let sourceOptions = this.state.sourceOptions\r\n    let imageURL = \"mapbox://styles/mapbox/dark-v9\";\r\n    let center = this.state.center\r\n    if(this.props.map != \"\") {\r\n    }\r\n    const { children, onLoad, map, height, width } = this.props;\r\n    let locationOrigin = window.location.origin\r\n    let style = {\r\n        version:  8,\r\n        name:     'custom',\r\n        sources:  {},\r\n        sprite:   `${locationOrigin}/mapbox-styles/maki`,\r\n        glyphs:   `${locationOrigin}/mapbox-styles/font/{fontstack}/{range}.pbf`,\r\n        layers:   []\r\n    }\r\n\r\n    return (\r\n      <div>\r\n      <ReactMap\r\n        style={style}\r\n        center={center}\r\n        movingMethod={'jumpTo'}\r\n        ref={this.mapLocation}\r\n        containerStyle={{\r\n          height: '70vh',\r\n          width: '100%'}}\r\n        onStyleLoad={this.onStyleLoad}\r\n      >\r\n\r\n      <Layer type=\"symbol\"\r\n      id=\"staticDevices\"\r\n      layout={{\r\n        'icon-image':             'triangle-15',\r\n        'icon-allow-overlap':     true,\r\n        'icon-ignore-placement':  true,\r\n        'text-allow-overlap':     true,\r\n        'text-ignore-placement':  true,\r\n        'text-field':             '{title}',\r\n        'text-font':              ['Open Sans Semibold'],\r\n        'text-offset':            [0, 0.8],\r\n        'text-anchor':            'top',\r\n      }}>\r\n\r\n      {\r\n        //this.state.staticDevices != \"\" ? this.renderDevices('static') : null\r\n      }\r\n      </Layer>\r\n\r\n      <Layer type=\"circle\"  paint={this.getCirclePaint()}>\r\n      {\r\n        this.renderHighlightDevices()\r\n      }\r\n      </Layer>\r\n      <Layer type=\"symbol\"\r\n      id=\"patientDevices\"\r\n      layout={{\r\n        'icon-image':             'marker-15',\r\n        'icon-allow-overlap':     true,\r\n        'icon-ignore-placement':  true,\r\n        'text-allow-overlap':     true,\r\n        'text-ignore-placement':  true,\r\n        'text-field':             '{title}',\r\n        'text-font':              ['Open Sans Semibold'],\r\n        'text-offset':            [0, 0.8],\r\n        'text-anchor':            'top',\r\n      }}>\r\n\r\n      {\r\n        this.renderDevices('mobile')\r\n      }\r\n      </Layer>\r\n      {this.state.map != \"\" ?\r\n      <Source id=\"image_source\" tileJsonSource={sourceOptions} />\r\n      : null}\r\n      <Layer id=\"image_layer\" before=\"staticDevices\" type=\"raster\" sourceId=\"image_source\"/>\r\n    </ReactMap>\r\n    {this.state.map != \"\" ? <div>\r\n    {this.state.playback == false ? <Button onClick={this.startPlayback}> Playback </Button> :\r\n    <Button onClick={this.stopTimer}> Stop </Button>}\r\n    <Typography variant=\"subtitle1\">{this.props.locationData.length != 0 ? this.formatUnix() : this.state.value}</Typography>\r\n    <Slider\r\n        value={this.state.value}\r\n        min={0}\r\n        max={this.state.max}\r\n        step={1}\r\n        onChange={this.handleChange}\r\n        />\r\n      <Typography variant=\"h6\" gutterBottom style={{marginTop: '1em'}}>{this.props.locationData.length != 0 ? `Location: ${this.props.locationData[this.state.value]._source.map.id}` : null} </Typography>\r\n      </div> : null}\r\n    </div>\r\n  )\r\n  }\r\n\r\n}\r\nconst ConnectedInfoMap = connect(mapStateToProps, mapDispatchToProps)(InfoMap);\r\n\r\nexport default ConnectedInfoMap;\r\n","import React, { Component } from 'react';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport { connect } from \"react-redux\";\r\nimport { addUsername, fetchEcgVitals, fetchHeartrateVitals } from \"./actions/index\";\r\nimport Card from '@material-ui/core/Card';\r\nimport CardMedia from '@material-ui/core/CardMedia';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport TemporaryDrawer from './TemporaryDrawer';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport AccountCircle from '@material-ui/icons/AccountCircle';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport classNames from 'classnames';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport Radio from '@material-ui/core/Radio';\r\nimport RadioGroup from '@material-ui/core/RadioGroup';\r\nimport FormLabel from '@material-ui/core/FormLabel';\r\nimport BeaconTable from './BeaconTable';\r\nimport CameraIcon from '@material-ui/icons/PhotoCamera';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport Chip from '@material-ui/core/Chip';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\nimport HealthChart from \"./HealthChart\";\r\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\r\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\r\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport socketIOClient from \"socket.io-client\";\r\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\r\nimport ToggleButton from '@material-ui/lab/ToggleButton';\r\nimport ToggleButtonGroup from '@material-ui/lab/ToggleButtonGroup';\r\nimport axios from 'axios'\r\nimport PlaybackChart from './PlaybackChart'\r\nimport PlaybackEcgChart from './PlaybackEcgChart'\r\nimport PlaybackRespirationChart from './PlaybackRespirationChart'\r\nimport PlaybackMap from './PlaybackMap'\r\nimport moment from 'moment';\r\n\r\n\r\nconst styles = theme => ({\r\n  container: {\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n  },\r\n  root: {\r\n    flexGrow: 1,\r\n  },\r\n  grow: {\r\n    flexGrow: 1,\r\n  },\r\n  card: {\r\n    minWidth: 275,\r\n    padding: '1.5rem',\r\n    flexGrow: '1',\r\n  },\r\n  textField: {\r\n    // marginLeft: theme.spacing.unit,\r\n    // marginRight: theme.spacing.unit,\r\n  },\r\n  borderBox: {\r\n    border: '1px solid',\r\n    padding: '2rem',\r\n    borderRadius: '16px',\r\n  },\r\n  menu: {\r\n    width: 200,\r\n  },\r\n  menuButton: {\r\n    marginLeft: -12,\r\n    marginRight: 20,\r\n    opacity : 0.4,\r\n    color: 'black',\r\n  },\r\n  align: {\r\n    padding: `${theme.spacing.unit * 2}px ${theme.spacing.unit * 3}px ${theme.spacing.unit * 3}px`,\r\n  },\r\n  label: {\r\n    textTransform: 'capitalize',\r\n  },\r\n  cameraIcon: {\r\n    opacity: '0.5',\r\n    paddingLeft: '10px'\r\n  },\r\n  cardContent: {\r\n    paddingBottom: '16px'\r\n  },\r\n  demo: {\r\n    padding: '16px 32px 24px',\r\n    // [theme.breakpoints.up(\"sm\")]: {\r\n    //   width: '560px'\r\n    // }\r\n  },\r\n  demoOne: {\r\n    padding: '16px 32px 5px',\r\n    // [theme.breakpoints.up(\"sm\")]: {\r\n    //   width: '560px'\r\n    // }\r\n  },\r\n  toggleContainer: {\r\n    height: 56,\r\n    padding: `${theme.spacing.unit}px ${theme.spacing.unit * 2}px`,\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'flex-start',\r\n    margin: `${theme.spacing.unit}px 0`,\r\n  },\r\n  button: {\r\n    margin: theme.spacing.unit,\r\n  },\r\n\r\n});\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    beacon: state.beacon,\r\n    vitals: state.vitals,\r\n    info: state.info,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    addUsername: username => dispatch(addUsername(username)),\r\n    fetchEcgVitals: vitals => dispatch(fetchEcgVitals(vitals)),\r\n    fetchHeartrateVitals: vitals => dispatch(fetchHeartrateVitals(vitals)),\r\n  };\r\n};\r\n\r\nlet id = 0;\r\nfunction createData(name, calories, fat, carbs, protein) {\r\n  id += 1;\r\n  return { id, name, calories, fat, carbs, protein };\r\n}\r\n\r\n\r\n\r\nclass PlaybackMapMode extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      submittedForm: false,\r\n      values: {},\r\n      anchorEl: null,\r\n      auth: true,\r\n      name: \"Santa Claus\",\r\n      owner: \"\",\r\n      image: \"\",\r\n      imagePreview: \"\",\r\n      imageName: \"\",\r\n      ward: \"\",\r\n      contactDistance: \"\",\r\n      tab: 0,\r\n      beacon: this.props.beacon,\r\n      response: [],\r\n      chartMode: ['live'],\r\n      endpoint: \"https://330f4015.ngrok.io\",\r\n      startTime: '2019-04-15T10:30',\r\n      endTime: '2019-04-15T10:30',\r\n      ecg: [],\r\n      heartrate: [],\r\n      zmq: []\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    if(this.props.info != \"\")\r\n      this.setState({name: this.props.info.name})\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if(this.props.vitals !== prevProps.vitals ) {\r\n      this.setState({vitals: this.props.vitals})\r\n    }\r\n  }\r\n\r\n  toggleDrawer = () => {\r\n    this.setState({ drawer: true});\r\n  }\r\n\r\n  handleFormat = (event, chartMode) => {\r\n    if(chartMode != this.state.chartMode && chartMode != null)\r\n      this.setState({ chartMode });\r\n  }\r\n\r\n  toggleCloseDrawer = () => {\r\n    this.setState({ drawer: false });\r\n  }\r\n\r\n  handleMenu = event => {\r\n    this.setState({ drawer: false });\r\n    this.setState({ anchorEl: event.currentTarget });\r\n  };\r\n\r\n  handleClose = () => {\r\n    this.setState({ anchorEl: null });\r\n  };\r\n\r\n  backToMap = (e) => {\r\n    e.preventDefault();\r\n    this.props.history.push('/locationTracking');\r\n  }\r\n\r\n  handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    this.props.history.push('/home');\r\n\r\n  }\r\n\r\n  handleLoading = () => {\r\n    this.setState(state => ({\r\n      loading: !state.loading,\r\n    }))\r\n  }\r\n\r\n  handleChange = prop => event => {\r\n    this.setState({ [prop]: event.target.value });\r\n  };\r\n\r\n  handleTabChange = (event, value) => {\r\n   this.setState({ tab: value });\r\n };\r\n\r\n  imageUpload = (e) => {\r\n    if(e.target.files[0]) {\r\n      const image = e.target.files[0];\r\n      this.setState({image})\r\n      this.setState({imagePreview : URL.createObjectURL(e.target.files[0])})\r\n      this.setState({imageName : image.name})\r\n    }\r\n  }\r\n\r\n  removeImage = () => {\r\n    this.setState({image : \"\"});\r\n    this.setState({imagePreview : \"\"});\r\n    this.setState({imageName: \"\"});\r\n  }\r\n\r\n  updateStart = (e) => {\r\n    this.setState({startTime: e.target.value})\r\n  }\r\n\r\n  updateEnd = (e) => {\r\n    this.setState({endTime: e.target.value})\r\n  }\r\n\r\n  cancel = () => {\r\n    this.props.history.push('/home');\r\n  }\r\n\r\n  submitQuery = (index) => {\r\n    let id = \"b1\"\r\n    if(this.props.info != \"\" && this.props.info[0] != \"None\") {\r\n      id = this.props.info.beacon[0]\r\n    } else {\r\n      return\r\n    }\r\n\r\n    let timeStart = this.state.startTime\r\n    let timeEnd = this.state.endTime\r\n    timeStart = timeStart + ':00'\r\n    timeEnd = timeEnd + ':00'\r\n    const query = {\r\n      \"size\": 10000,\r\n      \"sort\" : [{ \"@timestamp\" : {\"order\" : \"asc\"}}],\r\n      \"query\": {\r\n        \"bool\": {\r\n          \"must\": [\r\n            {\r\n              \"type\" : {\r\n                \"value\": \"position-update\"\r\n              }\r\n            },\r\n            {\r\n              \"match\": {\r\n                \"id\": id\r\n              }\r\n            },\r\n            {\r\n              \"range\" : {\r\n                  \"@timestamp\" : {\r\n                    \"gte\": timeStart,\r\n                    \"lte\": timeEnd,\r\n                    \"time_zone\": \"+08:00\"\r\n                    }\r\n                }\r\n            }\r\n          ]\r\n        }\r\n        }\r\n\r\n    };\r\n\r\n    axios.get(`http://137.132.165.139:9200/zmq/_search?scroll=1m`, {\r\n      params: {\r\n        source: JSON.stringify(query),\r\n        source_content_type: 'application/json'\r\n      }\r\n    }).then((res) => {\r\n\r\n      let fullTrace = res.data.hits.hits\r\n      let map = {}\r\n      let fullShot = []\r\n      let counter = 0\r\n      fullShot = fullShot.concat(fullTrace)\r\n\r\n      let scroll_size = res.data.hits.total\r\n\r\n      let scroll_id = res.data._scroll_id\r\n\r\n      let scrollQuery = {\r\n          'scroll' : '1m',\r\n          'scroll_id': scroll_id\r\n        }\r\n\r\n        this.getAPI(scrollQuery, fullShot)\r\n    });\r\n  }\r\n\r\n  getAPI = (scrollQuery, fullShot) => {\r\n\r\n         axios.get(`http://137.132.165.139:9200/_search/scroll`, {\r\n          params: {\r\n            source: JSON.stringify(scrollQuery),\r\n            source_content_type: 'application/json'\r\n          }\r\n      }).then((res) => {\r\n\r\n        let fullTrace = res.data.hits.hits\r\n        fullShot = fullShot.concat(fullTrace)\r\n\r\n        let scroll_id = res.data._scroll_id\r\n        let scrollQuery = {\r\n          'scroll' : '1m',\r\n          'scroll_id': scroll_id\r\n        }\r\n        let scroll_size = res.data.hits.hits.length\r\n\r\n        if(scroll_size > 0) {\r\n          this.getAPI(scrollQuery, fullShot)\r\n        } else {\r\n          this.setState({zmq: fullShot})\r\n        }\r\n\r\n      })\r\n  }\r\n\r\n  submitForm = () => {\r\n    this.submitQuery('zmq');\r\n  }\r\n\r\n  renderPlaybackForm = () => {\r\n\r\n    const { classes } = this.props;\r\n    let currentTime = moment().format();\r\n\r\n    let timeSplit  = currentTime.split('T')\r\n    let timeString = timeSplit[0] + 'T' + timeSplit[1].slice(0, 5)\r\n\r\n    let form = <div>\r\n    <form className={classes.container} noValidate>\r\n      <TextField\r\n        id=\"datetime-local\"\r\n        label=\"Start\"\r\n        variant=\"outlined\"\r\n        type=\"datetime-local\"\r\n        style={{marginRight: '1em', marginBottom: '1em'}}\r\n        defaultValue={this.state.startTime}\r\n        className={classes.textField}\r\n        onChange={this.updateStart}\r\n        InputLabelProps={{\r\n          shrink: true,\r\n        }}\r\n      />\r\n\r\n      <TextField\r\n        id=\"datetime-local\"\r\n        label=\"End\"\r\n        variant=\"outlined\"\r\n        type=\"datetime-local\"\r\n        defaultValue={this.state.endTime}\r\n        className={classes.textField}\r\n        onChange={this.updateEnd}\r\n        InputLabelProps={{\r\n          shrink: true,\r\n        }}\r\n      />\r\n      <div>\r\n      <Button variant=\"outlined\" color=\"primary\" onClick={this.submitForm} className={classes.button}>\r\n        Fetch\r\n      </Button>\r\n      </div>\r\n    </form>\r\n\r\n    </div>\r\n\r\n    return form\r\n  }\r\n  render() {\r\n\r\n    const { classes } = this.props;\r\n    const { anchorEl, auth } = this.state;\r\n    const open = Boolean(anchorEl)\r\n\r\n    return (\r\n      <div className={classes.root}>\r\n        {this.renderPlaybackForm()}\r\n        <PlaybackMap locationData={this.state.zmq}/>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst ConnectedPlaybackMapMode = connect(mapStateToProps, mapDispatchToProps)(PlaybackMapMode);\r\n\r\nexport default withStyles(styles)(ConnectedPlaybackMapMode);\r\n","import React, { Component } from 'react';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport { connect } from \"react-redux\";\r\nimport { addUsername, removeListenerSpecificEcgVitals, removeListenerSpecificHeartrateVitals, fetchHeartrateVitals, fetchEcgVitals, signOutUser, fetchSpecificHeartrateVitals, fetchSpecificEcgVitals } from \"./actions/index\";\r\nimport Card from '@material-ui/core/Card';\r\nimport CardMedia from '@material-ui/core/CardMedia';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport TemporaryDrawer from './TemporaryDrawer';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport AccountCircle from '@material-ui/icons/AccountCircle';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport classNames from 'classnames';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport Radio from '@material-ui/core/Radio';\r\nimport RadioGroup from '@material-ui/core/RadioGroup';\r\nimport FormLabel from '@material-ui/core/FormLabel';\r\nimport BeaconTable from './BeaconTable';\r\nimport CameraIcon from '@material-ui/icons/PhotoCamera';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport Chip from '@material-ui/core/Chip';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\nimport HealthChart from \"./HealthChart\";\r\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\r\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\r\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport socketIOClient from \"socket.io-client\";\r\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\r\nimport ToggleButton from '@material-ui/lab/ToggleButton';\r\nimport ToggleButtonGroup from '@material-ui/lab/ToggleButtonGroup';\r\nimport axios from 'axios'\r\nimport PlaybackChart from './PlaybackChart'\r\nimport ConnectedPlaybackMode from './PlaybackMode'\r\nimport ECGChart from './ECGChart'\r\nimport RespirationChart from './RespirationChart'\r\nimport InfoMap from \"./InfoMap\"\r\nimport PlaybackMapMode from \"./PlaybackMapMode\"\r\n\r\nconst styles = theme => ({\r\n  container: {\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n  },\r\n  root: {\r\n    flexGrow: 1,\r\n  },\r\n  grow: {\r\n    flexGrow: 1,\r\n  },\r\n  card: {\r\n    minWidth: 275,\r\n    padding: '1.5rem',\r\n    flexGrow: '1',\r\n  },\r\n  textField: {\r\n    // marginLeft: theme.spacing.unit,\r\n    // marginRight: theme.spacing.unit,\r\n  },\r\n  borderBox: {\r\n    border: '1px solid',\r\n    padding: '2rem',\r\n    borderRadius: '16px',\r\n  },\r\n  menu: {\r\n    width: 200,\r\n  },\r\n  menuButton: {\r\n    marginLeft: -12,\r\n    marginRight: 20,\r\n    opacity : 0.4,\r\n    color: 'black',\r\n  },\r\n  align: {\r\n    padding: `${theme.spacing.unit * 2}px ${theme.spacing.unit * 3}px ${theme.spacing.unit * 3}px`,\r\n  },\r\n  label: {\r\n    textTransform: 'capitalize',\r\n  },\r\n  cameraIcon: {\r\n    opacity: '0.5',\r\n    paddingLeft: '10px'\r\n  },\r\n  cardContent: {\r\n    paddingBottom: '16px'\r\n  },\r\n  demo: {\r\n    padding: '16px 32px 24px',\r\n  },\r\n  demoOne: {\r\n    padding: '16px 32px 5px',\r\n  },\r\n  toggleContainer: {\r\n    height: 56,\r\n    padding: `${theme.spacing.unit}px ${theme.spacing.unit * 2}px`,\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'flex-start',\r\n    margin: `${theme.spacing.unit}px 0`,\r\n  },\r\n  button: {\r\n    margin: theme.spacing.unit,\r\n  },\r\n\r\n});\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    beacon: state.beacon,\r\n    ecg: state.ecg,\r\n    info: state.info,\r\n    heartrate: state.heartrate,\r\n    isAuthenticating: state.isAuthenticating,\r\n    authenticated: state.authenticated,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    addUsername: username => dispatch(addUsername(username)),\r\n    fetchEcgVitals: vitals => dispatch(fetchEcgVitals(vitals)),\r\n    fetchHeartrateVitals: vitals => dispatch(fetchHeartrateVitals(vitals)),\r\n    fetchSpecificHeartrateVitals: vitals => dispatch(fetchSpecificHeartrateVitals(vitals)),\r\n    removeListenerSpecificHeartrateVitals: uuid => dispatch(removeListenerSpecificHeartrateVitals(uuid)),\r\n    fetchSpecificEcgVitals: vitals => dispatch(fetchSpecificEcgVitals(vitals)),\r\n    removeListenerSpecificEcgVitals: uuid => dispatch(removeListenerSpecificEcgVitals(uuid)),\r\n    signOutUser: credentials => dispatch(signOutUser(credentials))\r\n  };\r\n};\r\n\r\nclass PatientInfo extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      loading: false,\r\n      values: {},\r\n      anchorEl: null,\r\n      auth: true,\r\n      name: \"Santa Claus\",\r\n      owner: \"\",\r\n      image: \"\",\r\n      imagePreview: \"\",\r\n      imageName: \"\",\r\n      ward: \"\",\r\n      contactDistance: \"\",\r\n      tab: 0,\r\n      beacon: this.props.beacon,\r\n      response: [],\r\n      chartMode: ['live'],\r\n      mapMode: ['live'],\r\n      endpoint: \"https://330f4015.ngrok.io\",\r\n      startTime: '2019-03-11T15:38:48.033972',\r\n      endTime: '2019-03-11T15:38:49.271003',\r\n      playbackRes: [],\r\n      ecg: [],\r\n      heartrate: [],\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState({ loading: true });\r\n\r\n    if(this.props.info != \"\") {\r\n      this.setState({name: this.props.info.name})\r\n      this.setState({devices: this.props.info.devices})\r\n\r\n      let devices = this.props.info.devices\r\n      if(devices != null && devices[0] != \"None\") {\r\n        devices.map((device) => {\r\n          if(device.id.charAt(0) == 'e') {\r\n            this.props.fetchSpecificEcgVitals(device.uuid);\r\n          }\r\n\r\n          if(device.id.charAt(0) == 'h') {\r\n            this.props.fetchSpecificHeartrateVitals(device.uuid);\r\n          }\r\n        })\r\n      }\r\n    } else {\r\n      this.props.history.push('/locationTracking');\r\n    }\r\n\r\n  }\r\n  componentWillUnmount() {\r\n    let devices = this.props.info.devices\r\n    if(devices != null && devices[0] != \"None\") {\r\n      devices.map((device) => {\r\n        if(device.id.charAt(0) == 'e') {\r\n          this.props.removeListenerSpecificEcgVitals(device.uuid);\r\n        }\r\n\r\n        if(device.id.charAt(0) == 'h') {\r\n          this.props.removeListenerSpecificHeartrateVitals(device.uuid);\r\n        }\r\n      })\r\n    }\r\n  }\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if(this.props.ecg !== prevProps.ecg ) {\r\n      this.setState({ecg: this.props.ecg})\r\n    }\r\n\r\n    if(this.props.heartrate !== prevProps.heartrate ) {\r\n      this.setState({heartrate: this.props.heartrate})\r\n    }\r\n\r\n    if(this.props.isAuthenticating == false && this.props.authenticated == false) {\r\n      this.props.history.push('/');\r\n    }\r\n  }\r\n\r\n  toggleDrawer = () => {\r\n    this.setState({ drawer: true});\r\n  }\r\n\r\n  handleFormat = (event, chartMode) => {\r\n    if(chartMode != this.state.chartMode && chartMode != null)\r\n      this.setState({ chartMode });\r\n  }\r\n\r\n  handleMapFormat = (event, mapMode) => {\r\n    if(mapMode != this.state.mapMode && mapMode != null)\r\n      this.setState({ mapMode });\r\n  }\r\n  toggleCloseDrawer = () => {\r\n    this.setState({ drawer: false });\r\n  }\r\n\r\n  handleMenu = event => {\r\n    this.setState({ drawer: false });\r\n    this.setState({ anchorEl: event.currentTarget });\r\n  };\r\n\r\n  handleClose = () => {\r\n    this.setState({ anchorEl: null });\r\n  };\r\n\r\n  backToMap = (e) => {\r\n    e.preventDefault();\r\n    this.props.history.push('/locationTracking');\r\n  }\r\n\r\n  handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    this.props.history.push('/home');\r\n  }\r\n\r\n  handleLoading = () => {\r\n    this.setState(state => ({\r\n      loading: !state.loading,\r\n    }))\r\n  }\r\n\r\n  handleChange = prop => event => {\r\n    this.setState({ [prop]: event.target.value });\r\n  };\r\n\r\n  handleTabChange = (event, value) => {\r\n   this.setState({ tab: value });\r\n };\r\n\r\n  imageUpload = (e) => {\r\n    if(e.target.files[0]) {\r\n      const image = e.target.files[0];\r\n      this.setState({image})\r\n      this.setState({imagePreview : URL.createObjectURL(e.target.files[0])})\r\n      this.setState({imageName : image.name})\r\n    }\r\n  }\r\n\r\n  removeImage = () => {\r\n    this.setState({image : \"\"});\r\n    this.setState({imagePreview : \"\"});\r\n    this.setState({imageName: \"\"});\r\n  }\r\n\r\n  updateStart = (e) => {\r\n    this.setState({startTime: e.target.value})\r\n  }\r\n\r\n  updateEnd = (e) => {\r\n    this.setState({endTime: e.target.value})\r\n  }\r\n\r\n  cancel = () => {\r\n    this.props.history.push('/home');\r\n  }\r\n\r\n  submitQuery = () => {\r\n\r\n    const query = {\r\n      \"size\": 10000,\r\n      \"sort\" : [{ \"timestamp\" : {\"order\" : \"asc\"}}],\r\n      \"query\": {\r\n        \"range\" : {\r\n            \"timestamp\" : {\r\n              \"gte\": this.state.startTime,\r\n              \"lte\": this.state.endTime,\r\n              }\r\n          }\r\n        }\r\n\r\n    };\r\n\r\n    axios.get('http://localhost:9200/_search', {\r\n      params: {\r\n        source: JSON.stringify(query),\r\n        source_content_type: 'application/json'\r\n      }\r\n    }).then((res) => {\r\n      this.setState({playbackRes: res.data.hits.hits})\r\n    });\r\n  }\r\n\r\n  handleLogOut = () => {\r\n    this.handleClose()\r\n    this.props.signOutUser()\r\n  }\r\n\r\n  renderPlaybackForm = () => {\r\n    const { classes } = this.props;\r\n    let form = <div>\r\n    <form className={classes.container} noValidate>\r\n      <TextField\r\n        id=\"datetime-local\"\r\n        label=\"Start\"\r\n        type=\"datetime-local\"\r\n        defaultValue=\"2019-05-24T10:30\"\r\n        className={classes.textField}\r\n        onChange={this.updateStart}\r\n        InputLabelProps={{\r\n          shrink: true,\r\n        }}\r\n      />\r\n\r\n      <TextField\r\n        id=\"datetime-local\"\r\n        label=\"End\"\r\n        type=\"datetime-local\"\r\n        defaultValue=\"2019-05-24T10:30\"\r\n        className={classes.textField}\r\n        onChange={this.updateEnd}\r\n        InputLabelProps={{\r\n          shrink: true,\r\n        }}\r\n      />\r\n      <div>\r\n      <Button variant=\"outlined\" color=\"primary\" onClick={this.submitQuery} className={classes.button}>\r\n        Fetch\r\n      </Button>\r\n      </div>\r\n    </form>\r\n\r\n    </div>\r\n\r\n    return form\r\n  }\r\n  render() {\r\n\r\n    const { classes } = this.props;\r\n    const { anchorEl, auth } = this.state;\r\n    const open = Boolean(anchorEl)\r\n\r\n    return (\r\n      <div className={classes.root}>\r\n      <AppBar position=\"static\" style={{boxShadow: \"none\", backgroundColor: \"white\"}}>\r\n        <Toolbar>\r\n          <IconButton className={classes.menuButton} color=\"inherit\" aria-label=\"Menu\" onClick={this.toggleDrawer}>\r\n            <MenuIcon />\r\n          </IconButton>\r\n          <Typography variant=\"title\" className={classes.grow} style={{color: \"black\"}}>\r\n            Status Tracking\r\n          </Typography>\r\n          {auth && (\r\n              <div>\r\n                <IconButton\r\n                  aria-owns={open ? 'menu-appbar' : null}\r\n                  aria-haspopup=\"true\"\r\n                  onClick={this.handleMenu}\r\n                  color=\"inherit\"\r\n                >\r\n                  <AccountCircle style={{color: \"black\"}} />\r\n                </IconButton>\r\n                <Menu\r\n                  id=\"menu-appbar\"\r\n                  anchorEl={anchorEl}\r\n                  anchorOrigin={{\r\n                    vertical: 'top',\r\n                    horizontal: 'right',\r\n                  }}\r\n                  transformOrigin={{\r\n                    vertical: 'top',\r\n                    horizontal: 'right',\r\n                  }}\r\n                  open={open}\r\n                  onClose={this.handleClose}\r\n                >\r\n                  <MenuItem onClick={this.handleLogOut}>Logout</MenuItem>\r\n                </Menu>\r\n              </div>\r\n            )}\r\n        </Toolbar>\r\n      </AppBar>\r\n      <ClickAwayListener onClickAway={this.toggleCloseDrawer}>\r\n        <TemporaryDrawer toggle={this.state.drawer} />\r\n      </ClickAwayListener>\r\n      <Grid container justify=\"left\">\r\n          <Grid container\r\n            className={classes.demoOne}\r\n            spacing={0}\r\n            alignItems=\"center\"\r\n          >\r\n          <Button size=\"small\" onClick={this.backToMap}>\r\n            Back To Map\r\n          </Button>\r\n        </Grid>\r\n      </Grid>\r\n      <Grid container justify=\"center\">\r\n        <Grid container\r\n          className={classes.demo}\r\n          justify=\"center\"\r\n          spacing={0}\r\n          alignItems=\"center\"\r\n          style={{ minHeight: '75vh'}}>\r\n\r\n          <Card className={classes.card}>\r\n            <CardContent>\r\n              <Grid item xs={12}>\r\n                <Typography variant=\"h6\" gutterBottom>{this.state.name}</Typography>\r\n                <Tabs\r\n                  value={this.state.tab}\r\n                  onChange={this.handleTabChange}\r\n                  indicatorColor=\"primary\"\r\n                  textColor=\"primary\"\r\n                  variant=\"fullWidth\"\r\n                >\r\n                  <Tab label=\"Vitals\" />\r\n                  <Tab label=\"Location\" />\r\n                </Tabs>\r\n              </Grid>\r\n\r\n              {this.state.tab == 0 ?\r\n                <Grid item xs={12}>\r\n                  <div className={classes.toggleContainer}>\r\n                    <ToggleButtonGroup value={this.state.chartMode} exclusive onChange={this.handleFormat}>\r\n                      <ToggleButton value=\"live\">\r\n                        Live\r\n                      </ToggleButton>\r\n                      <ToggleButton value=\"playback\">\r\n                        Playback\r\n                      </ToggleButton>\r\n                    </ToggleButtonGroup>\r\n                  </div>\r\n              {this.state.chartMode == 'playback' ?\r\n                <ConnectedPlaybackMode /> :\r\n                  <div>\r\n                    <ExpansionPanel>\r\n                      <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\r\n                        <Typography variant=\"subtitle1\" gutterBottom>Heart Rate</Typography>\r\n                      </ExpansionPanelSummary>\r\n                      <ExpansionPanelDetails>\r\n                        <div style={{width: '100%'}}>\r\n                          <HealthChart vitals={this.state.heartrate}/>\r\n                        </div>\r\n                      </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                    <ExpansionPanel>\r\n                      <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\r\n                        <Typography variant=\"subtitle1\" gutterBottom >ECG</Typography>\r\n                      </ExpansionPanelSummary>\r\n                      <ExpansionPanelDetails>\r\n                        <div style={{width: '100%'}}>\r\n                          <ECGChart vitals={this.state.ecg} />\r\n                        </div>\r\n                      </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                    <ExpansionPanel>\r\n                      <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\r\n                        <Typography variant=\"subtitle1\" gutterBottom >Respiration</Typography>\r\n                      </ExpansionPanelSummary>\r\n                      <ExpansionPanelDetails>\r\n                        <div style={{width: '100%'}}>\r\n                          <RespirationChart vitals={this.state.ecg} />\r\n                        </div>\r\n                      </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                  </div> }\r\n          </Grid> :\r\n\r\n        <Grid item xs={12}>\r\n          <div className={classes.toggleContainer}>\r\n            <ToggleButtonGroup value={this.state.mapMode} exclusive onChange={this.handleMapFormat}>\r\n              <ToggleButton value=\"live\">\r\n                Live\r\n              </ToggleButton>\r\n              <ToggleButton value=\"playback\">\r\n                Playback\r\n              </ToggleButton>\r\n            </ToggleButtonGroup>\r\n          </div>\r\n            {this.state.mapMode == 'live' ? <InfoMap /> : <PlaybackMapMode />}\r\n        </Grid> }\r\n\r\n            </CardContent>\r\n          </Card>\r\n        </Grid>\r\n      </Grid>\r\n\r\n      <Grid container justify=\"left\">\r\n        <Grid container\r\n          className={classes.demoOne}\r\n          spacing={0}\r\n          alignItems=\"center\"\r\n        >\r\n          <Button size=\"small\" onClick={this.backToMap} style={{marginBottom: '1em'}}>\r\n            Back To Map\r\n          </Button>\r\n        </Grid>\r\n      </Grid>\r\n    </div>\r\n\r\n    )\r\n\r\n  }\r\n}\r\n\r\nconst ConnectedPatientInfo = connect(mapStateToProps, mapDispatchToProps)(PatientInfo);\r\n\r\nexport default withStyles(styles)(ConnectedPatientInfo);\r\n","import React, { Component } from 'react';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport { connect } from \"react-redux\";\r\nimport { addUsername, signOutUser, fetchHeartrateVitals, fetchEcgVitals, fetchSpecificHeartrateVitals, fetchSpecificEcgVitals } from \"./actions/index\";\r\nimport Card from '@material-ui/core/Card';\r\nimport CardMedia from '@material-ui/core/CardMedia';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport TemporaryDrawer from './TemporaryDrawer';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport AccountCircle from '@material-ui/icons/AccountCircle';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport classNames from 'classnames';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport Radio from '@material-ui/core/Radio';\r\nimport RadioGroup from '@material-ui/core/RadioGroup';\r\nimport FormLabel from '@material-ui/core/FormLabel';\r\nimport BeaconTable from './BeaconTable';\r\nimport CameraIcon from '@material-ui/icons/PhotoCamera';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport Chip from '@material-ui/core/Chip';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\nimport HealthChart from \"./HealthChart\";\r\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\r\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\r\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport socketIOClient from \"socket.io-client\";\r\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\r\nimport ToggleButton from '@material-ui/lab/ToggleButton';\r\nimport ToggleButtonGroup from '@material-ui/lab/ToggleButtonGroup';\r\nimport axios from 'axios'\r\nimport PlaybackChart from './PlaybackChart'\r\nimport ConnectedPlaybackMode from './PlaybackMode'\r\nimport ECGChart from './ECGChart'\r\nimport RespirationChart from './RespirationChart'\r\nimport InfoMap from \"./InfoMap\"\r\nimport PlaybackMapMode from \"./PlaybackMapMode\"\r\n\r\nconst styles = theme => ({\r\n  container: {\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n  },\r\n  root: {\r\n    flexGrow: 1,\r\n  },\r\n  grow: {\r\n    flexGrow: 1,\r\n  },\r\n  card: {\r\n    minWidth: 275,\r\n    padding: '1.5rem',\r\n    flexGrow: '1',\r\n  },\r\n  textField: {\r\n    // marginLeft: theme.spacing.unit,\r\n    // marginRight: theme.spacing.unit,\r\n  },\r\n  borderBox: {\r\n    border: '1px solid',\r\n    padding: '2rem',\r\n    borderRadius: '16px',\r\n  },\r\n  menu: {\r\n    width: 200,\r\n  },\r\n  menuButton: {\r\n    marginLeft: -12,\r\n    marginRight: 20,\r\n    opacity : 0.4,\r\n    color: 'black',\r\n  },\r\n  align: {\r\n    padding: `${theme.spacing.unit * 2}px ${theme.spacing.unit * 3}px ${theme.spacing.unit * 3}px`,\r\n  },\r\n  label: {\r\n    textTransform: 'capitalize',\r\n  },\r\n  cameraIcon: {\r\n    opacity: '0.5',\r\n    paddingLeft: '10px'\r\n  },\r\n  cardContent: {\r\n    paddingBottom: '16px'\r\n  },\r\n  demo: {\r\n    padding: '16px 32px 24px',\r\n    // [theme.breakpoints.up(\"sm\")]: {\r\n    //   width: '560px'\r\n    // }\r\n  },\r\n  demoOne: {\r\n    padding: '16px 32px 5px',\r\n    // [theme.breakpoints.up(\"sm\")]: {\r\n    //   width: '560px'\r\n    // }\r\n  },\r\n  toggleContainer: {\r\n    height: 56,\r\n    padding: `${theme.spacing.unit}px ${theme.spacing.unit * 2}px`,\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'flex-start',\r\n    margin: `${theme.spacing.unit}px 0`,\r\n  },\r\n  button: {\r\n    margin: theme.spacing.unit,\r\n  },\r\n\r\n});\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    beacon: state.beacon,\r\n    ecg: state.ecg,\r\n    info: state.info,\r\n    heartrate: state.heartrate,\r\n    isAuthenticating: state.isAuthenticating,\r\n    authenticated: state.authenticated,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    addUsername: username => dispatch(addUsername(username)),\r\n    fetchEcgVitals: vitals => dispatch(fetchEcgVitals(vitals)),\r\n    fetchHeartrateVitals: vitals => dispatch(fetchHeartrateVitals(vitals)),\r\n    fetchSpecificHeartrateVitals: vitals => dispatch(fetchSpecificHeartrateVitals(vitals)),\r\n    fetchSpecificEcgVitals: vitals => dispatch(fetchSpecificEcgVitals(vitals)),\r\n    signOutUser: credentials => dispatch(signOutUser(credentials))\r\n  };\r\n};\r\n\r\nlet id = 0;\r\nfunction createData(name, calories, fat, carbs, protein) {\r\n  id += 1;\r\n  return { id, name, calories, fat, carbs, protein };\r\n}\r\n\r\nconst rows = [\r\n  createData('Frozen yoghurt', 159, 6.0, 24, 4.0),\r\n  createData('Ice cream sandwich', 237, 9.0, 37, 4.3),\r\n  createData('Eclair', 262, 16.0, 24, 6.0),\r\n  createData('Cupcake', 305, 3.7, 67, 4.3),\r\n  createData('Gingerbread', 356, 16.0, 49, 3.9),\r\n];\r\n\r\nclass AssetStaffInfo extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      loading: false,\r\n      values: {},\r\n      anchorEl: null,\r\n      auth: true,\r\n      name: \"Santa Claus\",\r\n      owner: \"\",\r\n      image: \"\",\r\n      imagePreview: \"\",\r\n      imageName: \"\",\r\n      ward: \"\",\r\n      contactDistance: \"\",\r\n      tab: 0,\r\n      beacon: this.props.beacon,\r\n      response: [],\r\n      chartMode: ['live'],\r\n      mapMode: ['live'],\r\n      endpoint: \"https://330f4015.ngrok.io\",\r\n      startTime: '2019-03-11T15:38:48.033972',\r\n      endTime: '2019-03-11T15:38:49.271003',\r\n      playbackRes: [],\r\n      ecg: [],\r\n      heartrate: [],\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState({ loading: true });\r\n\r\n    if(this.props.info != \"\") {\r\n      this.setState({name: this.props.info.name})\r\n      this.setState({devices: this.props.info.devices})\r\n\r\n      let devices = this.props.info.devices\r\n      if(devices != null && devices[0] != \"None\") {\r\n        devices.map((device) => {\r\n          if(device.id.charAt(0) == 'e') {\r\n            this.props.fetchSpecificEcgVitals(device.uuid);\r\n          }\r\n\r\n          if(device.id.charAt(0) == 'h') {\r\n            this.props.fetchSpecificHeartrateVitals(device.uuid);\r\n          }\r\n        })\r\n      }\r\n    } else {\r\n      this.props.history.push('/locationTracking');\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if(this.props.ecg !== prevProps.ecg ) {\r\n      this.setState({ecg: this.props.ecg})\r\n    }\r\n\r\n    if(this.props.heartrate !== prevProps.heartrate ) {\r\n      this.setState({heartrate: this.props.heartrate})\r\n    }\r\n\r\n    if(this.props.isAuthenticating == false && this.props.authenticated == false) {\r\n      this.props.history.push('/');\r\n    }\r\n  }\r\n\r\n  toggleDrawer = () => {\r\n    this.setState({ drawer: true});\r\n  }\r\n\r\n  handleFormat = (event, chartMode) => {\r\n    if(chartMode != this.state.chartMode && chartMode != null)\r\n      this.setState({ chartMode });\r\n  }\r\n\r\n  handleMapFormat = (event, mapMode) => {\r\n    if(mapMode != this.state.mapMode && mapMode != null)\r\n      this.setState({ mapMode });\r\n  }\r\n  toggleCloseDrawer = () => {\r\n    this.setState({ drawer: false });\r\n  }\r\n\r\n  handleMenu = event => {\r\n    this.setState({ drawer: false });\r\n    this.setState({ anchorEl: event.currentTarget });\r\n  };\r\n\r\n  handleClose = () => {\r\n    this.setState({ anchorEl: null });\r\n  };\r\n\r\n  handleLogOut = () => {\r\n    this.handleClose()\r\n    this.props.signOutUser()\r\n  }\r\n\r\n  backToMap = (e) => {\r\n    e.preventDefault();\r\n    this.props.history.push('/locationTracking');\r\n  }\r\n\r\n  handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    this.props.history.push('/home');\r\n\r\n  }\r\n\r\n  handleLoading = () => {\r\n    this.setState(state => ({\r\n      loading: !state.loading,\r\n    }))\r\n  }\r\n\r\n  handleChange = prop => event => {\r\n    this.setState({ [prop]: event.target.value });\r\n  };\r\n\r\n  handleTabChange = (event, value) => {\r\n   this.setState({ tab: value });\r\n };\r\n\r\n  imageUpload = (e) => {\r\n    if(e.target.files[0]) {\r\n      const image = e.target.files[0];\r\n      this.setState({image})\r\n      this.setState({imagePreview : URL.createObjectURL(e.target.files[0])})\r\n      this.setState({imageName : image.name})\r\n    }\r\n  }\r\n\r\n  removeImage = () => {\r\n    this.setState({image : \"\"});\r\n    this.setState({imagePreview : \"\"});\r\n    this.setState({imageName: \"\"});\r\n  }\r\n\r\n  updateStart = (e) => {\r\n    this.setState({startTime: e.target.value})\r\n  }\r\n\r\n  updateEnd = (e) => {\r\n    this.setState({endTime: e.target.value})\r\n  }\r\n\r\n  cancel = () => {\r\n    this.props.history.push('/home');\r\n  }\r\n\r\n  submitQuery = () => {\r\n\r\n    const query = {\r\n      \"size\": 10000,\r\n      \"sort\" : [{ \"timestamp\" : {\"order\" : \"asc\"}}],\r\n      \"query\": {\r\n        \"range\" : {\r\n            \"timestamp\" : {\r\n              \"gte\": this.state.startTime,\r\n              \"lte\": this.state.endTime,\r\n              }\r\n          }\r\n        }\r\n\r\n    };\r\n\r\n    axios.get('http://localhost:9200/_search', {\r\n      params: {\r\n        source: JSON.stringify(query),\r\n        source_content_type: 'application/json'\r\n      }\r\n    }).then((res) => {\r\n      this.setState({playbackRes: res.data.hits.hits})\r\n    });\r\n  }\r\n\r\n  renderPlaybackForm = () => {\r\n    const { classes } = this.props;\r\n    let form = <div>\r\n    <form className={classes.container} noValidate>\r\n      <TextField\r\n        id=\"datetime-local\"\r\n        label=\"Start\"\r\n        type=\"datetime-local\"\r\n        defaultValue=\"2017-05-24T10:30\"\r\n        className={classes.textField}\r\n        onChange={this.updateStart}\r\n        InputLabelProps={{\r\n          shrink: true,\r\n        }}\r\n      />\r\n\r\n      <TextField\r\n        id=\"datetime-local\"\r\n        label=\"End\"\r\n        type=\"datetime-local\"\r\n        defaultValue=\"2017-05-24T10:30\"\r\n        className={classes.textField}\r\n        onChange={this.updateEnd}\r\n        InputLabelProps={{\r\n          shrink: true,\r\n        }}\r\n      />\r\n      <div>\r\n      <Button variant=\"outlined\" color=\"primary\" onClick={this.submitQuery} className={classes.button}>\r\n        Fetch\r\n      </Button>\r\n      </div>\r\n    </form>\r\n\r\n    </div>\r\n\r\n    return form\r\n  }\r\n  render() {\r\n\r\n    const { classes } = this.props;\r\n    const { anchorEl, auth } = this.state;\r\n    const open = Boolean(anchorEl)\r\n\r\n    return (\r\n      <div className={classes.root}>\r\n        <AppBar position=\"static\" style={{boxShadow: \"none\", backgroundColor: \"white\"}}>\r\n          <Toolbar>\r\n            <IconButton className={classes.menuButton} color=\"inherit\" aria-label=\"Menu\" onClick={this.toggleDrawer}>\r\n              <MenuIcon />\r\n            </IconButton>\r\n            <Typography variant=\"title\" className={classes.grow} style={{color: \"black\"}}>\r\n              Status Tracking\r\n            </Typography>\r\n            {auth && (\r\n                <div>\r\n                  <IconButton\r\n                    aria-owns={open ? 'menu-appbar' : null}\r\n                    aria-haspopup=\"true\"\r\n                    onClick={this.handleMenu}\r\n                    color=\"inherit\"\r\n                  >\r\n                    <AccountCircle style={{color: \"black\"}} />\r\n                  </IconButton>\r\n                  <Menu\r\n                    id=\"menu-appbar\"\r\n                    anchorEl={anchorEl}\r\n                    anchorOrigin={{\r\n                      vertical: 'top',\r\n                      horizontal: 'right',\r\n                    }}\r\n                    transformOrigin={{\r\n                      vertical: 'top',\r\n                      horizontal: 'right',\r\n                    }}\r\n                    open={open}\r\n                    onClose={this.handleClose}\r\n                  >\r\n                    <MenuItem onClick={this.handleLogOut}>Logout</MenuItem>\r\n                  </Menu>\r\n                </div>\r\n              )}\r\n          </Toolbar>\r\n        </AppBar>\r\n        <ClickAwayListener onClickAway={this.toggleCloseDrawer}>\r\n          <TemporaryDrawer toggle={this.state.drawer} />\r\n        </ClickAwayListener>\r\n        <Grid container justify=\"left\">\r\n          <Grid container\r\n            className={classes.demoOne}\r\n            spacing={0}\r\n            alignItems=\"center\"\r\n          >\r\n            <Button size=\"small\" onClick={this.backToMap}>\r\n              Back To Map\r\n            </Button>\r\n          </Grid>\r\n        </Grid>\r\n        <Grid container justify=\"center\">\r\n          <Grid container\r\n            className={classes.demo}\r\n            justify=\"center\"\r\n            spacing={0}\r\n            alignItems=\"center\"\r\n            style={{ minHeight: '75vh'}}>\r\n            <Card className={classes.card}>\r\n              <CardContent>\r\n                <Grid item xs={12}>\r\n                  <Typography variant=\"h6\" gutterBottom>{this.state.name}</Typography>\r\n                </Grid>\r\n\r\n                <Grid item xs={12}>\r\n                  <div className={classes.toggleContainer}>\r\n                    <ToggleButtonGroup value={this.state.mapMode} exclusive onChange={this.handleMapFormat}>\r\n                      <ToggleButton value=\"live\">\r\n                        Live\r\n                      </ToggleButton>\r\n                      <ToggleButton value=\"playback\">\r\n                        Playback\r\n                      </ToggleButton>\r\n                    </ToggleButtonGroup>\r\n                  </div>\r\n                  {this.state.mapMode == 'live' ? <InfoMap /> : <PlaybackMapMode />}\r\n                </Grid>\r\n              </CardContent>\r\n            </Card>\r\n          </Grid>\r\n        </Grid>\r\n\r\n        <Grid container justify=\"left\">\r\n          <Grid container\r\n            className={classes.demoOne}\r\n            spacing={0}\r\n            alignItems=\"center\"\r\n            >\r\n            <Button size=\"small\" onClick={this.backToMap} style={{marginBottom: '1em'}}>\r\n              Back To Map\r\n            </Button>\r\n          </Grid>\r\n        </Grid>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst ConnectedAssetStaffInfo = connect(mapStateToProps, mapDispatchToProps)(AssetStaffInfo);\r\n\r\nexport default withStyles(styles)(ConnectedAssetStaffInfo);\r\n","import React, { Component } from 'react';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport { connect } from \"react-redux\";\r\nimport { addUsername, loadMap, editPatient, signOutUser } from \"./actions/index\";\r\nimport Card from '@material-ui/core/Card';\r\nimport CardMedia from '@material-ui/core/CardMedia';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport TemporaryDrawer from './TemporaryDrawer';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport AccountCircle from '@material-ui/icons/AccountCircle';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport classNames from 'classnames';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport Radio from '@material-ui/core/Radio';\r\nimport RadioGroup from '@material-ui/core/RadioGroup';\r\nimport FormLabel from '@material-ui/core/FormLabel';\r\nimport BeaconTable from './BeaconTable';\r\nimport CameraIcon from '@material-ui/icons/PhotoCamera';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport Chip from '@material-ui/core/Chip';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\nimport HealthChart from \"./HealthChart\";\r\nimport axios from 'axios';\r\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\r\nimport LocationOnIcon from '@material-ui/icons/LocationOn';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport ImageIcon from '@material-ui/icons/Image';\r\nimport WorkIcon from '@material-ui/icons/Work';\r\nimport BeachAccessIcon from '@material-ui/icons/BeachAccess';\r\nimport PersonIcon from '@material-ui/icons/Person';\r\nimport ListSubheader from '@material-ui/core/ListSubheader';\r\n\r\nconst graphqlUrlHTTPS = 'http://137.132.165.139:3000/graphql';\r\n\r\n\r\nconst styles = theme => ({\r\n  container: {\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n  },\r\n  root: {\r\n    flexGrow: 1,\r\n  },\r\n  grow: {\r\n    flexGrow: 1,\r\n  },\r\n  card: {\r\n    minWidth: 275,\r\n    padding: '1.5rem',\r\n  },\r\n  textField: {\r\n    // marginLeft: theme.spacing.unit,\r\n    // marginRight: theme.spacing.unit,\r\n  },\r\n  borderBox: {\r\n    border: '1px solid',\r\n    padding: '2rem',\r\n    borderRadius: '16px',\r\n  },\r\n  menu: {\r\n    width: 200,\r\n  },\r\n  menuButton: {\r\n    marginLeft: -12,\r\n    marginRight: 20,\r\n    opacity : 0.4,\r\n    color: 'black',\r\n  },\r\n  align: {\r\n    padding: `${theme.spacing.unit * 2}px ${theme.spacing.unit * 3}px ${theme.spacing.unit * 3}px`,\r\n  },\r\n  label: {\r\n    textTransform: 'capitalize',\r\n  },\r\n  cameraIcon: {\r\n    opacity: '0.5',\r\n    paddingLeft: '10px'\r\n  },\r\n  cardContent: {\r\n    paddingBottom: '16px'\r\n  },\r\n  demo: {\r\n    padding: '16px 32px 24px',\r\n    width: 'auto',\r\n    // [theme.breakpoints.up(\"sm\")]: {\r\n    //   width: '560px'\r\n    // }\r\n  },\r\n  demoOne: {\r\n    padding: '16px 32px 5px',\r\n    // [theme.breakpoints.up(\"sm\")]: {\r\n    //   width: '560px'\r\n    // }\r\n  }\r\n\r\n});\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    confirmType: state.confirmType ,\r\n    edit: state.edit,\r\n    isAuthenticating: state.isAuthenticating,\r\n    authenticated: state.authenticated,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    addUsername: username => dispatch(addUsername(username)),\r\n    editPatient: patient => dispatch(editPatient(patient)),\r\n    loadMap: map => dispatch(loadMap(map)),\r\n    signOutUser: credentials => dispatch(signOutUser(credentials))\r\n  };\r\n};\r\n\r\nclass AddConfirmation extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      anchorEl: null,\r\n      auth: true,\r\n      name: \"Santa Claus\",\r\n      owner: \"\",\r\n      image: \"\",\r\n      imagePreview: \"\",\r\n      imageName: \"\",\r\n      ward: \"Ward 52\",\r\n      tab: 0,\r\n      type: \"\",\r\n      beacon: \"b30\",\r\n      edit: false,\r\n      age: \"\"\r\n    };\r\n\r\n  }\r\n\r\n  componentDidMount() {\r\n\r\n    if(this.props.confirmType == null) {\r\n      this.props.history.push('/home')\r\n    } else {\r\n    if(this.props.confirmType.confirm == null) {\r\n\r\n    } else {\r\n      this.setState({name: this.props.confirmType.confirm.name})\r\n      this.setState({ward: this.props.confirmType.confirm.ward})\r\n      this.setState({type: this.props.confirmType.confirm.type})\r\n      this.setState({beacon: this.props.confirmType.confirm.beacon})\r\n\r\n      if(this.props.confirmType.confirm.type == \"Patient\" | this.props.confirmType.confirm.type == \"Staff\") {\r\n        this.setState({age: this.props.confirmType.confirm.age})\r\n        this.setState({race: this.props.confirmType.confirm.race})\r\n        this.setState({gender: this.props.confirmType.confirm.gender})\r\n      }\r\n\r\n      if(this.props.confirmType.confirm.type == \"Asset\") {\r\n        this.setState({owner: this.props.confirmType.confirm.owner})\r\n      }\r\n\r\n      if(this.props.confirmType.confirm.type == \"Patient\") {\r\n        this.setState({devices: this.props.confirmType.confirm.devices})\r\n      }\r\n\r\n    }\r\n  }\r\n    if(this.props.edit != \"\") {\r\n      this.setState({edit: true})\r\n    }\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    if(this.props.isAuthenticating == false && this.props.authenticated == false) {\r\n      this.props.history.push('/');\r\n    }\r\n  }\r\n\r\n  toggleDrawer = () => {\r\n    this.setState({ drawer: true});\r\n  }\r\n\r\n  toggleCloseDrawer = () => {\r\n    this.setState({drawer: false})\r\n  }\r\n\r\n  handleMenu = event => {\r\n    this.setState({ drawer: false });\r\n    this.setState({ anchorEl: event.currentTarget });\r\n  };\r\n\r\n  handleClose = () => {\r\n    this.setState({ anchorEl: null });\r\n  };\r\n\r\n  backToMap = (e) => {\r\n    e.preventDefault();\r\n    this.props.history.push('/locationTracking');\r\n  }\r\n\r\n  handleAddAnother = (e) => {\r\n    e.preventDefault();\r\n    if(this.state.type == \"Patient\") {\r\n      this.props.history.push('/addPatient');\r\n    } else if (this.state.type == \"Staff\") {\r\n      this.props.history.push('/addStaff');\r\n    } else {\r\n      this.props.history.push('/addAsset');\r\n    }\r\n\r\n  }\r\n\r\n  handleToMap = (e) => {\r\n    e.preventDefault();\r\n    this.load(this.state.ward);\r\n    if(this.state.edit)\r\n      this.props.editPatient(\"\");\r\n    this.props.history.push('/locationTracking');\r\n\r\n\r\n  }\r\n\r\n  request = ({query, variables}) => {\r\n    let promise = axios({\r\n      method:   'post',\r\n      url:      `${graphqlUrlHTTPS}`,\r\n      headers:  {'Content-Type': 'application/json'},\r\n      data:     JSON.stringify({query, variables})\r\n    })\r\n    return promise;\r\n  }\r\n\r\n  load = (id) => {\r\n    let query = `\r\n      query {\r\n        map (id: \"${id}\") {\r\n          id\r\n          scale\r\n          coordinates\r\n          imageURL\r\n          navMesh\r\n          navPath\r\n          pois\r\n        }\r\n      }\r\n    `\r\n    this.request({query})\r\n    .then ((data) => {\r\n      this.props.loadMap(data.data.data.map);\r\n    })\r\n  }\r\n\r\n  handleLoading = () => {\r\n    this.setState(state => ({\r\n      loading: !state.loading,\r\n    }))\r\n  }\r\n\r\n  handleChange = prop => event => {\r\n    this.setState({ [prop]: event.target.value });\r\n  };\r\n\r\n  handleTabChange = (event, value) => {\r\n   this.setState({ tab: value });\r\n };\r\n\r\n handleLogOut = () => {\r\n   this.handleClose()\r\n   this.props.signOutUser()\r\n }\r\n\r\n  imageUpload = (e) => {\r\n    if(e.target.files[0]) {\r\n      const image = e.target.files[0];\r\n      this.setState({image})\r\n      this.setState({imagePreview : URL.createObjectURL(e.target.files[0])})\r\n      this.setState({imageName : image.name})\r\n    }\r\n\r\n  }\r\n\r\n  removeImage = () => {\r\n    this.setState({image : \"\"});\r\n    this.setState({imagePreview : \"\"});\r\n    this.setState({imageName: \"\"});\r\n  }\r\n\r\n  cancel = () => {\r\n    this.props.history.push('/home');\r\n  }\r\n\r\n  renderInformation = () => {\r\n    let listitems = []\r\n    if(this.state.type == \"Patient\" | this.state.type == \"Staff\") {\r\n      if(this.state.age != \"\") {\r\n        listitems.push(\r\n          <div>\r\n          <ListItem>\r\n            <Grid item xs={4} style={{textAlign: 'center'}}>\r\n              <Typography variant=\"body1\">Age:</Typography>\r\n            </Grid>\r\n            <Grid item xs={8} style={{textAlign: 'center'}} >\r\n              <Typography variant=\"body1\">{this.state.age}</Typography>\r\n            </Grid>\r\n          </ListItem>\r\n          <Divider variant=\"middle\"/>\r\n          </div>\r\n        )\r\n      }\r\n\r\n\r\n\r\n      if(this.state.gender != \"\") {\r\n        let gender = ''\r\n        if(this.state.gender == 'male') {\r\n          gender = 'Male'\r\n        } else {\r\n          gender = 'Female'\r\n        }\r\n        listitems.push(\r\n          <div>\r\n          <ListItem>\r\n            <Grid item xs={4} style={{textAlign: 'center'}}>\r\n              <Typography variant=\"body1\">Gender:</Typography>\r\n            </Grid>\r\n            <Grid item xs={8} style={{textAlign: 'center'}} >\r\n              <Typography variant=\"body1\">{gender}</Typography>\r\n            </Grid>\r\n          </ListItem>\r\n          <Divider variant=\"middle\"/>\r\n          </div>\r\n        )\r\n      }\r\n\r\n      if(this.state.race != \"\") {\r\n        listitems.push(\r\n          <div>\r\n          <ListItem>\r\n            <Grid item xs={4} style={{textAlign: 'center'}}>\r\n              <Typography variant=\"body1\">Race:</Typography>\r\n            </Grid>\r\n            <Grid item xs={8} style={{textAlign: 'center'}} >\r\n              <Typography variant=\"body1\">{this.state.race}</Typography>\r\n            </Grid>\r\n          </ListItem>\r\n          <Divider variant=\"middle\"/>\r\n          </div>\r\n        )\r\n      }\r\n    } else if(this.state.type == 'Asset') {\r\n      if(this.state.owner != \"\") {\r\n        listitems.push(\r\n          <div>\r\n          <ListItem>\r\n            <Grid item xs={4} style={{textAlign: 'center'}}>\r\n              <Typography variant=\"body1\">Owner:</Typography>\r\n            </Grid>\r\n            <Grid item xs={8} style={{textAlign: 'center'}} >\r\n              <Typography variant=\"body1\">{this.state.owner}</Typography>\r\n            </Grid>\r\n          </ListItem>\r\n          <Divider variant=\"middle\"/>\r\n          </div>\r\n        )\r\n      }\r\n    }\r\n\r\n    if(this.state.type == \"Patient\") {\r\n      let devices = ''\r\n      if(this.state.devices != null && this.state.devices[0] != \"None\") {\r\n        this.state.devices.map((device) => {\r\n         devices += `${device.id} `\r\n        })\r\n\r\n        listitems.push(\r\n          <div>\r\n          <ListItem>\r\n            <Grid item xs={4} style={{textAlign: 'center'}}>\r\n              <Typography variant=\"body1\">Devices:</Typography>\r\n            </Grid>\r\n            <Grid item xs={8} style={{textAlign: 'center'}} >\r\n              <Typography variant=\"body1\">{devices}</Typography>\r\n            </Grid>\r\n          </ListItem>\r\n          <Divider variant=\"middle\"/>\r\n          </div>\r\n        )\r\n      }\r\n    }\r\n    if(listitems.length == 0) {\r\n      listitems.push(\r\n        <div>\r\n        <ListItem>\r\n          <Grid item xs={12} style={{textAlign: 'center'}}>\r\n            <Typography variant=\"body1\">-None-</Typography>\r\n          </Grid>\r\n\r\n        </ListItem>\r\n\r\n        </div>\r\n      )\r\n    }\r\n    return listitems\r\n  }\r\n  render() {\r\n\r\n    const { classes } = this.props;\r\n    const { anchorEl, auth } = this.state;\r\n    const open = Boolean(anchorEl)\r\n\r\n    return (\r\n      <div className={classes.root}>\r\n        <AppBar position=\"static\" style={{boxShadow: \"none\", backgroundColor: \"white\"}}>\r\n          <Toolbar>\r\n            <IconButton className={classes.menuButton} color=\"inherit\" aria-label=\"Menu\" onClick={this.toggleDrawer}>\r\n              <MenuIcon />\r\n            </IconButton>\r\n            <Typography variant=\"title\" className={classes.grow} style={{color: \"black\"}}>\r\n              {this.state.edit ? 'Edit' : 'Add'} {this.state.type}\r\n            </Typography>\r\n            {auth && (\r\n                <div>\r\n                  <IconButton\r\n                    aria-owns={open ? 'menu-appbar' : null}\r\n                    aria-haspopup=\"true\"\r\n                    onClick={this.handleMenu}\r\n                    color=\"inherit\"\r\n                  >\r\n                    <AccountCircle style={{color: \"black\"}} />\r\n                  </IconButton>\r\n                  <Menu\r\n                    id=\"menu-appbar\"\r\n                    anchorEl={anchorEl}\r\n                    anchorOrigin={{\r\n                      vertical: 'top',\r\n                      horizontal: 'right',\r\n                    }}\r\n                    transformOrigin={{\r\n                      vertical: 'top',\r\n                      horizontal: 'right',\r\n                    }}\r\n                    open={open}\r\n                    onClose={this.handleClose}\r\n                  >\r\n                    <MenuItem onClick={this.handleLogOut}>Logout</MenuItem>\r\n                  </Menu>\r\n                </div>\r\n              )}\r\n          </Toolbar>\r\n        </AppBar>\r\n        <ClickAwayListener onClickAway={this.toggleCloseDrawer}>\r\n          <TemporaryDrawer toggle={this.state.drawer} />\r\n        </ClickAwayListener>\r\n        <Grid container justify=\"center\">\r\n          <Grid container\r\n            className={classes.demo}\r\n            justify=\"center\"\r\n            spacing={0}\r\n            alignItems=\"center\"\r\n            style={{ minHeight: '75vh'}}\r\n          >\r\n            <Grid item xs={12}>\r\n              <Typography variant=\"h5\" style={{marginBottom: '2em'}} gutterBottom>{this.state.type} Successfully {this.state.edit ? 'Edited' : 'Added'}!</Typography>\r\n              <Card style={{marginTop: '2em', width:'min-content', margin: 'auto'}}>\r\n                <CardContent style={{paddingBottom: '5px', paddingTop: '5px', textAlign: 'center'}}>\r\n                  <Grid container style={{alignItems: 'center'}}>\r\n                    <Grid item xs={12} style={{minWidth: '300px'}}>\r\n                      <Avatar style={{margin:'auto', marginTop: '1em', backgroundColor: 'orange'}}>\r\n                      {this.state.type == \"Patient\" ? <i className=\"fas fa-user-injured\"></i> : null}\r\n                      {this.state.type == \"Asset\" ? <i className=\"fas fa-laptop-medical\"></i> : null}\r\n                      {this.state.type == \"Staff\" ? <i className=\"fas fa-user-md\"></i> : null}\r\n                      </Avatar>\r\n                      <Typography variant=\"h5\" style={{marginTop: '0.5em'}}>{this.state.name}</Typography>\r\n                    </Grid>\r\n                    <Grid item xs={12}>\r\n                      <Typography className={classes.pos} color=\"textSecondary\">\r\n                        {this.state.ward}\r\n                      </Typography>\r\n                      <Chip\r\n                        icon={<LocationOnIcon />}\r\n                        label={this.state.beacon != \"\" ? this.state.beacon[0] : 'Unassigned'}\r\n                        className={classes.chip}\r\n                        variant=\"outlined\"\r\n                        style={{marginTop: '1em'}}\r\n                      />\r\n                      <Divider variant=\"middle\" style={{marginTop: '1em'}} />\r\n                    </Grid>\r\n                    <Grid item xs={12} style={{textAlign: 'left', marginTop: '1em', marginLeft: '1em'}}>\r\n                      <Typography color=\"textSecondary\">Information</Typography>\r\n                    </Grid>\r\n                    <Grid item xs={12}>\r\n                      <List>\r\n                        {this.renderInformation()}\r\n                      </List>\r\n                    </Grid>\r\n                  </Grid>\r\n                </CardContent>\r\n              </Card>\r\n            </Grid>\r\n          <Grid item xs={6} style={{ textAlign: 'center', paddingTop: '2em'}}>\r\n            {this.state.edit ? \"\" :\r\n            <Button variant=\"outlined\" onClick={(event) => this.handleAddAnother(event)}>\r\n              Add Another {this.state.type}\r\n            </Button>\r\n            }\r\n          </Grid>\r\n          <Grid item xs={6} style={{ textAlign: 'center', paddingTop: '2em'}}>\r\n            <Button variant=\"outlined\" onClick={this.handleToMap}>\r\n              Map: {this.state.ward}\r\n            </Button>\r\n          </Grid>\r\n          </Grid>\r\n        </Grid>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst ConnectedAddConfirmation = connect(mapStateToProps, mapDispatchToProps)(AddConfirmation);\r\n\r\nexport default withStyles(styles)(ConnectedAddConfirmation);\r\n","import React, { Component } from 'react';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport { connect } from \"react-redux\";\r\nimport { confirmType, addPatient, fetchMaps, editPatient, removePatient } from \"./actions/index\";\r\nimport Card from '@material-ui/core/Card';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport TemporaryDrawer from './TemporaryDrawer';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport AccountCircle from '@material-ui/icons/AccountCircle';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport classNames from 'classnames';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport Radio from '@material-ui/core/Radio';\r\nimport RadioGroup from '@material-ui/core/RadioGroup';\r\nimport FormLabel from '@material-ui/core/FormLabel';\r\nimport BeaconTable from './BeaconTable';\r\nimport Scanner from './Scanner';\r\nimport Result from './Result';\r\nimport Select from 'react-select';\r\nimport axios from 'axios';\r\nimport NoSsr from '@material-ui/core/NoSsr';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Chip from '@material-ui/core/Chip';\r\nimport CancelIcon from '@material-ui/icons/Cancel';\r\n\r\nconst graphqlUrlHTTPS = 'http://137.132.165.139:3000/graphql';\r\n\r\n\r\nconst styles = theme => ({\r\n  container: {\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n  },\r\n  root: {\r\n    flexGrow: 1,\r\n  },\r\n  grow: {\r\n    flexGrow: 1,\r\n  },\r\n  card: {\r\n    minWidth: 275,\r\n    padding: '2rem'\r\n  },\r\n  textField: {\r\n    // marginLeft: theme.spacing.unit,\r\n    // marginRight: theme.spacing.unit,\r\n  },\r\n  borderBox: {\r\n    border: '1px solid',\r\n    padding: '2rem',\r\n    borderRadius: '16px',\r\n  },\r\n  menu: {\r\n    width: 200,\r\n  },\r\n  menuButton: {\r\n    marginLeft: -12,\r\n    marginRight: 20,\r\n    opacity : 0.4,\r\n    color: 'black',\r\n  },\r\n  align: {\r\n    padding: `${theme.spacing.unit * 2}px ${theme.spacing.unit * 3}px ${theme.spacing.unit * 3}px`,\r\n  },\r\n  input: {\r\n    display: 'flex',\r\n    padding: 0,\r\n  },\r\n  valueContainer: {\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n    flex: 1,\r\n    alignItems: 'center',\r\n    overflow: 'hidden',\r\n    padding: '18.5px 14px',\r\n  },\r\n  noOptionsMessage: {\r\n   padding: `${theme.spacing.unit}px ${theme.spacing.unit * 2}px`,\r\n },\r\n singleValue: {\r\n    fontSize: 16,\r\n  },\r\n  placeholder: {\r\n    position: 'absolute',\r\n    left: 2,\r\n    fontSize: 16,\r\n    padding: '18.5px 14px',\r\n  },\r\n  paper: {\r\n    position: 'absolute',\r\n    zIndex: 1,\r\n    marginTop: theme.spacing.unit,\r\n    left: 0,\r\n    right: 0,\r\n  },\r\n});\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    beacon: state.beacon,\r\n    maps: state.maps,\r\n    edit: state.edit,\r\n   };\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    confirmType: type => dispatch(confirmType(type)),\r\n    addPatient: patient => dispatch(addPatient(patient)),\r\n    editPatient: patient => dispatch(editPatient(patient)),\r\n    removePatient: patient => dispatch(removePatient(patient)),\r\n    fetchMaps: maps => dispatch(fetchMaps(maps))\r\n  };\r\n};\r\n\r\nfunction NoOptionsMessage(props) {\r\n  return (\r\n    <Typography\r\n      color=\"textSecondary\"\r\n      className={props.selectProps.classes.noOptionsMessage}\r\n      {...props.innerProps}\r\n    >\r\n      {props.children}\r\n    </Typography>\r\n  );\r\n}\r\n\r\nfunction inputComponent({ inputRef, ...props }) {\r\n  return <div ref={inputRef} {...props} />;\r\n}\r\n\r\nfunction Control(props) {\r\n  return (\r\n    <TextField\r\n      fullWidth\r\n      variant=\"outlined\"\r\n      InputProps={{\r\n        inputComponent,\r\n        inputProps: {\r\n          className: props.selectProps.classes.input,\r\n          inputRef: props.innerRef,\r\n          children: props.children,\r\n          ...props.innerProps,\r\n        },\r\n      }}\r\n      {...props.selectProps.textFieldProps}\r\n    />\r\n  );\r\n}\r\n\r\nfunction Option(props) {\r\n  return (\r\n    <MenuItem\r\n      buttonRef={props.innerRef}\r\n      selected={props.isFocused}\r\n      component=\"div\"\r\n      style={{\r\n        fontWeight: props.isSelected ? 500 : 400,\r\n      }}\r\n      {...props.innerProps}\r\n    >\r\n      {props.children}\r\n    </MenuItem>\r\n  );\r\n}\r\n\r\nfunction Placeholder(props) {\r\n  return (\r\n    <Typography\r\n      color=\"textSecondary\"\r\n      className={props.selectProps.classes.placeholder}\r\n      {...props.innerProps}\r\n    >\r\n      {props.children}\r\n    </Typography>\r\n  );\r\n}\r\n\r\nfunction SingleValue(props) {\r\n  return (\r\n    <Typography className={props.selectProps.classes.singleValue} {...props.innerProps}>\r\n      {props.children}\r\n    </Typography>\r\n  );\r\n}\r\n\r\nfunction ValueContainer(props) {\r\n  return <div className={props.selectProps.classes.valueContainer}>{props.children}</div>;\r\n}\r\n\r\nfunction MultiValue(props) {\r\n  return (\r\n    <Chip\r\n      tabIndex={-1}\r\n      label={props.children}\r\n      className={classNames(props.selectProps.classes.chip, {\r\n        [props.selectProps.classes.chipFocused]: props.isFocused,\r\n      })}\r\n      onDelete={props.removeProps.onClick}\r\n      deleteIcon={<CancelIcon {...props.removeProps} />}\r\n    />\r\n  );\r\n}\r\n\r\nfunction SubMenu(props) {\r\n  return (\r\n    <Paper square className={props.selectProps.classes.paper} {...props.innerProps}>\r\n      {props.children}\r\n    </Paper>\r\n  );\r\n}\r\n\r\nconst components = {\r\n  Control,\r\n  SubMenu,\r\n  MultiValue,\r\n  NoOptionsMessage,\r\n  Option,\r\n  Placeholder,\r\n  SingleValue,\r\n  ValueContainer,\r\n};\r\n\r\nclass AddDevice extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      anchorEl: null,\r\n      auth: true,\r\n      id: \"\",\r\n      beaconId: \"\",\r\n      measuredPower: \"\",\r\n      gattId: \"\",\r\n      gattProfile: \"\",\r\n      beacon: this.props.beacon,\r\n      scanning: false,\r\n      results: [],\r\n      options: [],\r\n      edit: false,\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.fetch();\r\n    if(this.props.edit != \"\" && this.props.edit != null) {\r\n      let edit = this.props.edit;\r\n      this.setState({\r\n        name: edit.name,\r\n        age: edit.age,\r\n        race: edit.race,\r\n        gender: edit.gender,\r\n        ward: {value: edit.ward, label: edit.ward},\r\n        edit: true,\r\n      })\r\n    }\r\n  }\r\n\r\n  createOptions = (maps) => {\r\n\r\n    let options = maps.map((map) => ({\r\n      value: map.id,\r\n      label: map.id,\r\n    }))\r\n\r\n    this.setState({options})\r\n  }\r\n\r\n  fetch = (dispatch) => {\r\n    let query = `\r\n      query {\r\n        maps {\r\n          id\r\n          scale\r\n          coordinates\r\n          imageURL\r\n          navMesh\r\n          navPath\r\n          pois\r\n        }\r\n      }\r\n    `\r\n    this.request({query})\r\n    .then (data => {\r\n      this.props.fetchMaps(data.data.data.maps);\r\n      this.createOptions(data.data.data.maps);\r\n    })\r\n  }\r\n\r\n  request = ({query, variables}) => {\r\n    let promise = axios({\r\n      method:   'post',\r\n      url:      `${graphqlUrlHTTPS}`,\r\n      headers:  {'Content-Type': 'application/json'},\r\n      data:     JSON.stringify({query, variables})\r\n    })\r\n    return promise;\r\n  }\r\n\r\n  toggleDrawer = () => {\r\n    this.setState({ drawer: true});\r\n  }\r\n\r\n  handleMenu = event => {\r\n    this.setState({ drawer: false });\r\n    this.setState({ anchorEl: event.currentTarget });\r\n  };\r\n\r\n  handleClose = () => {\r\n    this.setState({ anchorEl: null });\r\n  };\r\n\r\n  packageDevice = () => {\r\n    let device = {}\r\n\r\n    if(this.state.id != \"\") {\r\n      device.device = {id: this.state.id, type: 'mobile'}\r\n    }\r\n\r\n    if(this.state.beaconId != \"\") {\r\n      device.device = {id: this.state.beaconId}\r\n    }\r\n\r\n    if(this.state.gattId != \"\") {\r\n      device.gatt = {id: this.state.gattId};\r\n      if (this.state.gattProfile != \"\") {\r\n        device.gatt.profile = JSON.parse(this.state.gattProfile );\r\n      }\r\n    }\r\n    return device\r\n  }\r\n\r\n  // create: (device) -> (dispatch) ->\r\n  //   variables = {input: device}\r\n  //   query = \"\r\n  //     mutation ($input: CreateDeviceInput!) {\r\n  //       createDevice(input: $input) { id }\r\n  //     }\r\n  //   \"\r\n  //   request({query, variables})\r\n  //   .then ({data}) ->\r\n  //     dispatch actions.fetch()\r\n  createDevice = (device) => {\r\n    let variables  = {input: device}\r\n    let query = `\r\n        mutation ($input: CreateDeviceInput!) {\r\n          createDevice(input: $input) { id }\r\n        }\r\n      `;\r\n    this.requestPost({query, variables})\r\n  }\r\n\r\n  requestPost = ({query, variables}) => {\r\n    let graphqlUrl= \"http://137.132.165.139:3000/graphql\"\r\n    axios({\r\n        method:   'post',\r\n        url:      `${graphqlUrl}`,\r\n        headers:  {'Content-Type': 'application/json'},\r\n        data:     JSON.stringify({query, variables})\r\n      })\r\n  }\r\n\r\n\r\n\r\n  handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    const { type } = this.state;\r\n\r\n    let device = this.packageDevice()\r\n\r\n    this.createDevice(device);\r\n\r\n  }\r\n\r\n  handleLoading = () => {\r\n    this.setState(state => ({\r\n      loading: !state.loading,\r\n    }))\r\n  }\r\n\r\n  handleChange = prop => event => {\r\n    if(prop == \"ward\")\r\n      this.setState({ [prop]: event });\r\n    else {\r\n      this.setState({ [prop]: event.target.value });\r\n    }\r\n  };\r\n\r\n\r\n  cancel = () => {\r\n    this.props.history.push('/home');\r\n  }\r\n\r\n  _scan = (e) => {\r\n        e.preventDefault();\r\n        this.setState({scanning: !this.state.scanning});\r\n    }\r\n\r\n    _onDetected = (result) => {\r\n        let results = this.state.results;\r\n        if(results.indexOf(result) < 0)\r\n          this.setState({results: this.state.results.concat([result])});\r\n    }\r\n\r\n\r\n  render() {\r\n\r\n    const { classes, theme } = this.props;\r\n    const { anchorEl, auth } = this.state;\r\n    const open = Boolean(anchorEl)\r\n    \r\n\r\n    const selectStyles = {\r\n      input: base => ({\r\n        ...base,\r\n        color: theme.palette.text.primary,\r\n        '& input': {\r\n          font: 'inherit',\r\n        },\r\n      }),\r\n    };\r\n\r\n    return (\r\n      <div className={classes.root}>\r\n      <AppBar position=\"static\" style={{boxShadow: \"none\", backgroundColor: \"white\"}}>\r\n        <Toolbar>\r\n          <IconButton className={classes.menuButton} color=\"inherit\" aria-label=\"Menu\" onClick={this.toggleDrawer}>\r\n            <MenuIcon />\r\n          </IconButton>\r\n          <Typography variant=\"title\" className={classes.grow} style={{color: \"black\"}}>\r\n            {this.state.edit ? 'Edit': 'Add'} Device\r\n          </Typography>\r\n          {auth && (\r\n              <div>\r\n                <IconButton\r\n                  aria-owns={open ? 'menu-appbar' : null}\r\n                  aria-haspopup=\"true\"\r\n                  onClick={this.handleMenu}\r\n                  color=\"inherit\"\r\n                >\r\n                  <AccountCircle style={{color: \"black\"}} />\r\n                </IconButton>\r\n                <Menu\r\n                  id=\"menu-appbar\"\r\n                  anchorEl={anchorEl}\r\n                  anchorOrigin={{\r\n                    vertical: 'top',\r\n                    horizontal: 'right',\r\n                  }}\r\n                  transformOrigin={{\r\n                    vertical: 'top',\r\n                    horizontal: 'right',\r\n                  }}\r\n                  open={open}\r\n                  onClose={this.handleClose}\r\n                >\r\n                  <MenuItem onClick={this.handleClose}>Logout</MenuItem>\r\n                </Menu>\r\n              </div>\r\n            )}\r\n        </Toolbar>\r\n      </AppBar>\r\n        <TemporaryDrawer toggle={this.state.drawer} />\r\n        <form className={classes.align}>\r\n        <Grid container\r\n          direction=\"column\"\r\n          spacing={0}\r\n          alignItems=\"center\"\r\n          style={{ minHeight: '75vh'}}>\r\n\r\n          <Grid item xs={12} lg={5}>\r\n          <div className={classes.layout}>\r\n            <Typography variant=\"h4\" gutterBottom>Device</Typography>\r\n            <Typography variant=\"h6\" gutterBottom>Barcode Scan</Typography>\r\n            <Button variant=\"outlined\" onClick={this._scan}>{this.state.scanning ? 'Stop' : 'Start'}</Button>\r\n              <ul className=\"results\">\r\n                  {this.state.results.map((result) => (<Result key={result.codeResult.code} result={result} />))}\r\n              </ul>\r\n              {this.state.scanning ? <Scanner onDetected={this._onDetected}/> : null}\r\n\r\n              <FormControl margin=\"normal\" required fullWidth>\r\n                <TextField\r\n                  label=\"id\"\r\n                  placeholder=\"id\"\r\n                  variant=\"outlined\"\r\n                  value={this.state.id}\r\n                  fullWidth\r\n                  className={classes.textField}\r\n                  onChange = {(e) => this.setState({id:e.target.value})}\r\n                />\r\n              </FormControl>\r\n            </div>\r\n            <FormControl margin=\"normal\" required fullWidth>\r\n              <TextField\r\n                label=\"Beacon ID\"\r\n                placeholder=\"Beacon ID\"\r\n                variant=\"outlined\"\r\n                value={this.state.beaconId}\r\n                fullWidth\r\n                className={classes.textField}\r\n                onChange = {(e) => this.setState({beaconId:e.target.value})}\r\n              />\r\n            </FormControl>\r\n\r\n            <FormControl margin=\"normal\" required fullWidth>\r\n              <TextField\r\n                label=\"Measured Power\"\r\n                placeholder=\"Measured Power\"\r\n                variant=\"outlined\"\r\n                value={this.state.measuredPower}\r\n                fullWidth\r\n                className={classes.textField}\r\n                onChange = {(e) => this.setState({measuredPower:e.target.value})}\r\n              />\r\n            </FormControl>\r\n\r\n            <FormControl margin=\"normal\" required fullWidth>\r\n              <TextField\r\n                label=\"Gatt ID\"\r\n                placeholder=\"Gatt ID\"\r\n                variant=\"outlined\"\r\n                value={this.state.gattId}\r\n                fullWidth\r\n                className={classes.textField}\r\n                onChange = {(e) => this.setState({gattId:e.target.value})}\r\n              />\r\n            </FormControl>\r\n\r\n            <FormControl margin=\"normal\" required fullWidth>\r\n              <TextField\r\n                label=\"Gatt Profile\"\r\n                placeholder=\"Gatt Profile\"\r\n                variant=\"outlined\"\r\n                value={this.state.gattProfile}\r\n                fullWidth\r\n                className={classes.textField}\r\n                onChange = {(e) => this.setState({gattProfile:e.target.value})}\r\n              />\r\n            </FormControl>\r\n\r\n\r\n\r\n\r\n          <br/>\r\n          <div style={{ textAlign: 'center', paddingTop: '1rem'}}>\r\n          <Button variant=\"contained\" color=\"primary\" onClick={(event) => this.handleSubmit(event)}>\r\n            Submit\r\n          </Button>\r\n          <Button style={{marginLeft: '3em'}} onClick={this.cancel}>\r\n            Cancel\r\n          </Button>\r\n\r\n\r\n\r\n      </div>\r\n    </Grid>\r\n    </Grid>\r\n    </form>\r\n\r\n    </div>\r\n\r\n    )\r\n\r\n  }\r\n}\r\n\r\nconst ConnectedAddDevice = connect(mapStateToProps, mapDispatchToProps)(AddDevice);\r\n\r\nexport default withStyles(styles, {withTheme: true})(ConnectedAddDevice);\r\n","import React from \"react\";\r\nimport { Route, Switch } from \"react-router-dom\";\r\nimport Home from \"./Home\";\r\nimport Login from \"./Login\";\r\nimport AddPatient from \"./AddPatient\";\r\nimport AddAsset from \"./AddAsset\";\r\nimport AddStaff from \"./AddStaff\";\r\nimport LocationTracking from \"./LocationTracking\";\r\nimport ContactTracing from \"./ContactTracing\";\r\nimport ContactTracingResults from \"./ContactTracingResults\";\r\nimport PatientInfo from \"./PatientInfo\";\r\nimport AssetStaffInfo from \"./AssetStaffInfo\"\r\nimport AddConfirmation from \"./AddConfirmation\"\r\nimport AddDevice from \"./AddDevice\"\r\n\r\nexport default () =>\r\n  <Switch>\r\n    <Route path=\"/\" exact component={Login} />\r\n    <Route path=\"/home\" exact component={Home} />\r\n    <Route path=\"/addPatient\" exact component={AddPatient} />\r\n    <Route path=\"/editPatient\" exact component={AddPatient} />\r\n    <Route path=\"/addAsset\" exact component={AddAsset} />\r\n    <Route path=\"/addStaff\" exact component={AddStaff} />\r\n    <Route path=\"/locationTracking\" exact component={LocationTracking} />\r\n    <Route path=\"/contactTracing\" exact component={ContactTracing} />\r\n    <Route path=\"/contactTracingResults\" exact component={ContactTracingResults} />\r\n    <Route path=\"/patientInfo\" exact component={PatientInfo} />\r\n    <Route path=\"/staffInfo\" exact component={AssetStaffInfo} />\r\n    <Route path=\"/assetInfo\" exact component={AssetStaffInfo} />\r\n    <Route path=\"/addConfirmation\" exact component={AddConfirmation} />\r\n  </Switch>;\r\n","import React, { Component } from 'react';\nimport logo from './logo.svg';\nimport './App.css';\nimport Routes from \"./Routes\";\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\nimport MenuIcon from '@material-ui/icons/Menu';\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      page: \"Login\"\n    };\n  }\n\n\n  render() {\n\n    return (\n      <div className=\"App\">\n        <Routes />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport default function register() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import {\r\n  AUTH_USER,\r\n  AUTH_ERROR,\r\n  SIGN_OUT_USER,\r\n  ADD_USERNAME,\r\n  ASSIGN_BEACON,\r\n  ASSIGN_DEVICES,\r\n  CONFIRM_TYPE,\r\n  ADD_PATIENT,\r\n  EDIT_PATIENT,\r\n  REMOVE_PATIENT,\r\n  REMOVE_STAFF,\r\n  REMOVE_ASSET,\r\n  ADD_STAFF,\r\n  ADD_ASSET,\r\n  FETCH_MAPS,\r\n  LOAD_MAP,\r\n  LOAD_INFO,\r\n  FETCH_DEVICES,\r\n  HIGHLIGHT_PATIENT,\r\n  HIGHLIGHT_ASSET,\r\n  HIGHLIGHT_STAFF,\r\n  FETCH_PATIENT_COUNT,\r\n  FETCH_ASSET_COUNT,\r\n  FETCH_STAFF_COUNT,\r\n  FETCH_DEVICE_LOCATIONS,\r\n  FETCH_SIMULATION_COORDINATES,\r\n  FETCH_CONTACT_TRACE,\r\n  FETCH_ECG_VITALS,\r\n  FETCH_HEARTRATE_VITALS,\r\n  FETCHING_PROCESS,\r\n  FETCHING_DONE,\r\n  UPDATE_TRACE_DETAILS,\r\n  UPDATE_PATIENT,\r\n  UPDATE_STAFF,\r\n  UPDATE_ASSET,\r\n  FETCH_FILTER_TRACE,\r\n  FETCH_NEW_BEACON,\r\n  READ_PATIENTS,\r\n  READ_ASSETS,\r\n  READ_STAFF,\r\n} from \"../constants/action-types\";\r\nimport update from 'immutability-helper';\r\nconst initialState = {\r\n  username: { username: 'staff', },\r\n  confirmType: { type: 'Patient'},\r\n  assets: [],\r\n  staff: [],\r\n  patients: [],\r\n  contactTrace: [],\r\n  edit: \"\",\r\n  maps: [],\r\n  map : \"\",\r\n  devices: [],\r\n  deviceLogs: [],\r\n  ecg: {},\r\n  heartrate: {},\r\n  simulation: \"\",\r\n  info: \"\",\r\n  fetching: false,\r\n  traceDetails: [],\r\n  filterTrace: [],\r\n  beaconCounter: \"\",\r\n};\r\n\r\nconst rootReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n      case READ_PATIENTS:\r\n      return {...state, patients: action.payload.map(patient => {\r\n        state.patients.forEach(item => {\r\n          if(item.id == patient.id) {\r\n            patient.highlight = item.highlight\r\n          }\r\n        })\r\n        return patient\r\n      })}\r\n      case READ_ASSETS:\r\n      return {...state, assets: action.payload.map(asset => {\r\n        state.assets.forEach(item => {\r\n          if(item.id == asset.id) {\r\n            asset.highlight = item.highlight\r\n          }\r\n        })\r\n        return asset\r\n      })}\r\n      case READ_STAFF:\r\n      return {...state, staff: action.payload.map(staff => {\r\n        state.staff.forEach(item => {\r\n          if(item.id == staff.id) {\r\n            staff.highlight = item.highlight\r\n          }\r\n        })\r\n        return staff\r\n      })}\r\n      case AUTH_USER:\r\n        return {...state, authenticated: true, autherror: null, isAuthenticating: false};\r\n      case SIGN_OUT_USER:\r\n        return {...state, authenticated: false, autherror: null, isAuthenticating: false}\r\n      case AUTH_ERROR:\r\n        return {...state, authenticated: false, autherror: action.payload.message, isAuthenticating: false}\r\n      case ADD_USERNAME:\r\n        return { ...state, username: action.payload };\r\n      case ASSIGN_BEACON:\r\n        return { ...state, beacon: action.payload };\r\n      case ASSIGN_DEVICES:\r\n        return { ...state, assignDevices: action.payload };\r\n      case CONFIRM_TYPE:\r\n        return { ...state, confirmType: action.payload };\r\n      case ADD_PATIENT:\r\n        return { ...state,  patients: [...state.patients, action.payload] };\r\n      case EDIT_PATIENT:\r\n        return {...state,  edit: action.payload}\r\n      case REMOVE_PATIENT:\r\n        return {...state,  patients: state.patients.filter(patient => patient !== action.payload)}\r\n      case ADD_STAFF:\r\n        return { ...state,  staff: [...state.staff, action.payload] };\r\n      case REMOVE_STAFF:\r\n        return {...state,  staff: state.staff.filter(staffmember => staffmember !== action.payload)}\r\n      case ADD_ASSET:\r\n        return { ...state,  assets: [...state.assets, action.payload] };\r\n      case REMOVE_ASSET:\r\n        return {...state,  assets: state.assets.filter(asset => asset !== action.payload)}\r\n      case FETCH_MAPS:\r\n        return { ...state,  maps: action.payload };\r\n      case LOAD_MAP:\r\n        return { ...state,  map: action.payload };\r\n      case FETCH_DEVICES:\r\n        return { ...state,  devices: action.payload };\r\n      case FETCH_DEVICE_LOCATIONS:\r\n        return { ...state,  deviceLogs: action.payload.aggregations.id.buckets.map ((x) => x.latest.hits.hits[0]._source) };\r\n      case FETCH_ECG_VITALS:\r\n        return { ...state,  ecg: action.payload };\r\n      case FETCH_SIMULATION_COORDINATES:\r\n        return {...state, simulation: action.payload}\r\n        case FETCH_HEARTRATE_VITALS:\r\n          return { ...state,  heartrate: action.payload };\r\n      case LOAD_INFO:\r\n        return { ...state,  info: action.payload };\r\n      case FETCH_CONTACT_TRACE:\r\n        return { ...state,  contactTrace: action.payload };\r\n      case FETCHING_PROCESS:\r\n        return { ...state,  fetching: true };\r\n      case FETCHING_DONE:\r\n        return { ...state,  fetching: false };\r\n      case UPDATE_TRACE_DETAILS:\r\n        return {...state,  traceDetails: action.payload}\r\n      case FETCH_FILTER_TRACE:\r\n        return {...state,  filterTrace: action.payload}\r\n      case FETCH_NEW_BEACON:\r\n        return {...state,  beaconCounter: action.payload}\r\n      case FETCH_PATIENT_COUNT:\r\n        return {...state, patientCounter: action.payload}\r\n      case FETCH_ASSET_COUNT:\r\n        return {...state, assetCounter: action.payload}\r\n      case FETCH_STAFF_COUNT:\r\n        return {...state, staffCounter: action.payload}\r\n      case UPDATE_PATIENT:\r\n      return {\r\n        ...state,\r\n          patients: state.patients.map(patient => (patient.id === action.payload.id) ? action.payload : patient),\r\n      }\r\n      case UPDATE_STAFF:\r\n      return {\r\n        ...state,\r\n          staff: state.staff.map(staffmem => (staffmem.id === action.payload.id) ? action.payload : staffmem),\r\n      }\r\n      case UPDATE_ASSET:\r\n      return {\r\n        ...state,\r\n          assets: state.assets.map(asset => (asset.id === action.payload.id) ? action.payload : asset),\r\n      }\r\n      case HIGHLIGHT_PATIENT:\r\n        return update(state, {\r\n            patients: {\r\n              [action.payload.index]: {\r\n                highlight: {$set: action.payload.highlight}\r\n              }\r\n            }\r\n        })\r\n        case HIGHLIGHT_ASSET:\r\n          return update(state, {\r\n              assets: {\r\n                [action.payload.index]: {\r\n                  highlight: {$set: action.payload.highlight}\r\n                }\r\n              }\r\n          })\r\n          case HIGHLIGHT_STAFF:\r\n            return update(state, {\r\n                staff: {\r\n                  [action.payload.index]: {\r\n                    highlight: {$set: action.payload.highlight}\r\n                  }\r\n                }\r\n            })\r\n      default:\r\n        return state;\r\n    }\r\n};\r\n\r\nexport default rootReducer;\r\n","import { createStore, applyMiddleware } from \"redux\";\r\nimport rootReducer from \"../reducers/index\";\r\nimport reduxThunk from 'redux-thunk';\r\nimport * as Actions from '../actions';\r\n\r\nconst initialState = {\r\n  username: null,\r\n  confirmType: null,\r\n  authenticated: false,\r\n  isAuthenticating: true,\r\n  autherror: null,\r\n  assets: [],\r\n  staff: [],\r\n  patients: [],\r\n  edit: \"\",\r\n  maps: [],\r\n  map : \"\",\r\n  devices: [],\r\n  deviceLogs: [],\r\n  vitals: {},\r\n  info: \"\",\r\n  beaconCounter: \"\",\r\n  assetCounter: \"\",\r\n  patientCounter: \"\",\r\n  staffCounter: \"\",\r\n  fetching: false,\r\n  simulation: \"\"\r\n};\r\n\r\nconst store = createStore(rootReducer, initialState, applyMiddleware(reduxThunk));\r\nstore.dispatch(Actions.verifyAuth())\r\nstore.dispatch(Actions.readPatients())\r\nstore.dispatch(Actions.readAssets())\r\nstore.dispatch(Actions.readStaff())\r\nexport default store;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport './index.css';\nimport App from './App';\nimport registerServiceWorker from './registerServiceWorker';\nimport { BrowserRouter as Router } from \"react-router-dom\";\nimport store from \"./store/index\";\n\nReactDOM.render(\n  <Provider store={store}>\n    <Router>\n      <App />\n    </Router>\n  </Provider>,\n  document.getElementById('root')\n);\nregisterServiceWorker();\n"],"sourceRoot":""}